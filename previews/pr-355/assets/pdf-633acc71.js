var Os=Object.defineProperty;var Is=(b,s,ft)=>s in b?Os(b,s,{enumerable:!0,configurable:!0,writable:!0,value:ft}):b[s]=ft;var Ie=(b,s,ft)=>(Is(b,typeof s!="symbol"?s+"":s,ft),ft),yn=(b,s,ft)=>{if(!s.has(b))throw TypeError("Cannot "+ft)};var e=(b,s,ft)=>(yn(b,s,"read from private field"),ft?ft.call(b):s.get(b)),Et=(b,s,ft)=>{if(s.has(b))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(b):s.set(b,ft)},jt=(b,s,ft,o)=>(yn(b,s,"write to private field"),o?o.call(b,ft):s.set(b,ft),ft);var Ke=(b,s,ft,o)=>({set _(k){jt(b,s,k,ft)},get _(){return e(b,s,o)}}),xt=(b,s,ft)=>(yn(b,s,"access private method"),ft);import{g as getDefaultExportFromCjs,b as browser$1,B as Buffer,c as commonjsRequire,r as require$$5}from"./contracts-9980506a.js";function _mergeNamespaces(b,s){for(var ft=0;ft<s.length;ft++){const o=s[ft];if(typeof o!="string"&&!Array.isArray(o)){for(const k in o)if(k!=="default"&&!(k in b)){const St=Object.getOwnPropertyDescriptor(o,k);St&&Object.defineProperty(b,k,St.get?St:{enumerable:!0,get:()=>o[k]})}}}return Object.freeze(Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}))}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z=Symbol.iterator;function A(b){return b===null||typeof b!="object"?null:(b=z&&b[z]||b["@@iterator"],typeof b=="function"?b:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(b,s,ft){this.props=b,this.context=s,this.refs=D,this.updater=ft||B}E.prototype.isReactComponent={};E.prototype.setState=function(b,s){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,s,"setState")};E.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function F(){}F.prototype=E.prototype;function G(b,s,ft){this.props=b,this.context=s,this.refs=D,this.updater=ft||B}var H=G.prototype=new F;H.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function M(b,s,ft){var o,k={},St=null,bt=null;if(s!=null)for(o in s.ref!==void 0&&(bt=s.ref),s.key!==void 0&&(St=""+s.key),s)J.call(s,o)&&!L.hasOwnProperty(o)&&(k[o]=s[o]);var Wt=arguments.length-2;if(Wt===1)k.children=ft;else if(1<Wt){for(var ut=Array(Wt),rt=0;rt<Wt;rt++)ut[rt]=arguments[rt+2];k.children=ut}if(b&&b.defaultProps)for(o in Wt=b.defaultProps,Wt)k[o]===void 0&&(k[o]=Wt[o]);return{$$typeof:l,type:b,key:St,ref:bt,props:k,_owner:K.current}}function N(b,s){return{$$typeof:l,type:b.type,key:s,ref:b.ref,props:b.props,_owner:b._owner}}function O(b){return typeof b=="object"&&b!==null&&b.$$typeof===l}function escape$1(b){var s={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ft){return s[ft]})}var P=/\/+/g;function Q(b,s){return typeof b=="object"&&b!==null&&b.key!=null?escape$1(""+b.key):s.toString(36)}function R(b,s,ft,o,k){var St=typeof b;(St==="undefined"||St==="boolean")&&(b=null);var bt=!1;if(b===null)bt=!0;else switch(St){case"string":case"number":bt=!0;break;case"object":switch(b.$$typeof){case l:case n:bt=!0}}if(bt)return bt=b,k=k(bt),b=o===""?"."+Q(bt,0):o,I(k)?(ft="",b!=null&&(ft=b.replace(P,"$&/")+"/"),R(k,s,ft,"",function(rt){return rt})):k!=null&&(O(k)&&(k=N(k,ft+(!k.key||bt&&bt.key===k.key?"":(""+k.key).replace(P,"$&/")+"/")+b)),s.push(k)),1;if(bt=0,o=o===""?".":o+":",I(b))for(var Wt=0;Wt<b.length;Wt++){St=b[Wt];var ut=o+Q(St,Wt);bt+=R(St,s,ft,ut,k)}else if(ut=A(b),typeof ut=="function")for(b=ut.call(b),Wt=0;!(St=b.next()).done;)St=St.value,ut=o+Q(St,Wt++),bt+=R(St,s,ft,ut,k);else if(St==="object")throw s=String(b),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return bt}function S(b,s,ft){if(b==null)return b;var o=[],k=0;return R(b,o,"","",function(St){return s.call(ft,St,k++)}),o}function T(b){if(b._status===-1){var s=b._result;s=s(),s.then(function(ft){(b._status===0||b._status===-1)&&(b._status=1,b._result=ft)},function(ft){(b._status===0||b._status===-1)&&(b._status=2,b._result=ft)}),b._status===-1&&(b._status=0,b._result=s)}if(b._status===1)return b._result.default;throw b._result}var U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};react_production_min.Children={map:S,forEach:function(b,s,ft){S(b,function(){s.apply(this,arguments)},ft)},count:function(b){var s=0;return S(b,function(){s++}),s},toArray:function(b){return S(b,function(s){return s})||[]},only:function(b){if(!O(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};react_production_min.Component=E;react_production_min.Fragment=p;react_production_min.Profiler=r$1;react_production_min.PureComponent=G;react_production_min.StrictMode=q;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;react_production_min.cloneElement=function(b,s,ft){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var o=C({},b.props),k=b.key,St=b.ref,bt=b._owner;if(s!=null){if(s.ref!==void 0&&(St=s.ref,bt=K.current),s.key!==void 0&&(k=""+s.key),b.type&&b.type.defaultProps)var Wt=b.type.defaultProps;for(ut in s)J.call(s,ut)&&!L.hasOwnProperty(ut)&&(o[ut]=s[ut]===void 0&&Wt!==void 0?Wt[ut]:s[ut])}var ut=arguments.length-2;if(ut===1)o.children=ft;else if(1<ut){Wt=Array(ut);for(var rt=0;rt<ut;rt++)Wt[rt]=arguments[rt+2];o.children=Wt}return{$$typeof:l,type:b.type,key:k,ref:St,props:o,_owner:bt}};react_production_min.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:t,_context:b},b.Consumer=b};react_production_min.createElement=M;react_production_min.createFactory=function(b){var s=M.bind(null,b);return s.type=b,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(b){return{$$typeof:v,render:b}};react_production_min.isValidElement=O;react_production_min.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:T}};react_production_min.memo=function(b,s){return{$$typeof:x,type:b,compare:s===void 0?null:s}};react_production_min.startTransition=function(b){var s=V.transition;V.transition={};try{b()}finally{V.transition=s}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(b,s){return U.current.useCallback(b,s)};react_production_min.useContext=function(b){return U.current.useContext(b)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(b){return U.current.useDeferredValue(b)};react_production_min.useEffect=function(b,s){return U.current.useEffect(b,s)};react_production_min.useId=function(){return U.current.useId()};react_production_min.useImperativeHandle=function(b,s,ft){return U.current.useImperativeHandle(b,s,ft)};react_production_min.useInsertionEffect=function(b,s){return U.current.useInsertionEffect(b,s)};react_production_min.useLayoutEffect=function(b,s){return U.current.useLayoutEffect(b,s)};react_production_min.useMemo=function(b,s){return U.current.useMemo(b,s)};react_production_min.useReducer=function(b,s,ft){return U.current.useReducer(b,s,ft)};react_production_min.useRef=function(b){return U.current.useRef(b)};react_production_min.useState=function(b){return U.current.useState(b)};react_production_min.useSyncExternalStore=function(b,s,ft){return U.current.useSyncExternalStore(b,s,ft)};react_production_min.useTransition=function(){return U.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var pdf$1={exports:{}};(function(module,exports){(function(s,ft){module.exports=s.pdfjsLib=ft()})(globalThis,()=>(()=>{var __webpack_modules__=[,(b,s)=>{var Ce;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=Vt,s.bytesToString=vt,s.createValidAbsoluteUrl=ne,s.getModificationDate=oe,s.getUuid=Te,s.getVerbosityLevel=Rt,s.info=Ut,s.isArrayBuffer=qt,s.isArrayEqual=ae,s.isNodeJS=void 0,s.normalizeUnicode=we,s.objectFromMap=Gt,s.objectSize=Ot,s.setVerbosityLevel=at,s.shadow=re,s.string32=Lt,s.stringToBytes=Bt,s.stringToPDFString=Yt,s.stringToUTF8String=It,s.unreachable=Pt,s.utf8StringToString=Nt,s.warn=$t;const ft=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");s.isNodeJS=ft;const o=[1,0,0,1,0,0];s.IDENTITY_MATRIX=o;const k=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=k;const St=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=St;const bt=1.35;s.LINE_FACTOR=bt;const Wt=.35;s.LINE_DESCENT_FACTOR=Wt;const ut=Wt/bt;s.BASELINE_FACTOR=ut;const rt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=rt;const X={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=X;const mt="pdfjs_internal_editor_";s.AnnotationEditorPrefix=mt;const _t={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=_t;const ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=ht;const st={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=st;const et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=et;const j={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=j;const tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=tt;const lt={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=lt;const ot={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=ot;const nt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=nt;const d={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=d;const m={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=m;const pt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=pt;const Y={O:"PageOpen",C:"PageClose"};s.PageActionEventType=Y;const f={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=f;const dt={NONE:0,BINARY:1};s.CMapCompressionType=dt;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=$;const Tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=Tt;let wt=f.WARNINGS;function at(Xt){Number.isInteger(Xt)&&(wt=Xt)}function Rt(){return wt}function Ut(Xt){wt>=f.INFOS&&console.log(`Info: ${Xt}`)}function $t(Xt){wt>=f.WARNINGS&&console.log(`Warning: ${Xt}`)}function Pt(Xt){throw new Error(Xt)}function Vt(Xt,Dt){Xt||Pt(Dt)}function Kt(Xt){switch(Xt==null?void 0:Xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ne(Xt,Dt=null,kt=null){if(!Xt)return null;try{if(kt&&typeof Xt=="string"){if(kt.addDefaultProtocol&&Xt.startsWith("www.")){const ee=Xt.match(/\./g);(ee==null?void 0:ee.length)>=2&&(Xt=`http://${Xt}`)}if(kt.tryConvertEncoding)try{Xt=It(Xt)}catch{}}const Zt=Dt?new URL(Xt,Dt):new URL(Xt);if(Kt(Zt))return Zt}catch{}return null}function re(Xt,Dt,kt,Zt=!1){return Object.defineProperty(Xt,Dt,{value:kt,enumerable:!Zt,configurable:!0,writable:!1}),kt}const ct=function(){function Dt(kt,Zt){this.constructor===Dt&&Pt("Cannot initialize BaseException."),this.message=kt,this.name=Zt}return Dt.prototype=new Error,Dt.constructor=Dt,Dt}();s.BaseException=ct;class a extends ct{constructor(Dt,kt){super(Dt,"PasswordException"),this.code=kt}}s.PasswordException=a;class h extends ct{constructor(Dt,kt){super(Dt,"UnknownErrorException"),this.details=kt}}s.UnknownErrorException=h;class c extends ct{constructor(Dt){super(Dt,"InvalidPDFException")}}s.InvalidPDFException=c;class g extends ct{constructor(Dt){super(Dt,"MissingPDFException")}}s.MissingPDFException=g;class _ extends ct{constructor(Dt,kt){super(Dt,"UnexpectedResponseException"),this.status=kt}}s.UnexpectedResponseException=_;class it extends ct{constructor(Dt){super(Dt,"FormatError")}}s.FormatError=it;class gt extends ct{constructor(Dt){super(Dt,"AbortException")}}s.AbortException=gt;function vt(Xt){(typeof Xt!="object"||(Xt==null?void 0:Xt.length)===void 0)&&Pt("Invalid argument for bytesToString");const Dt=Xt.length,kt=8192;if(Dt<kt)return String.fromCharCode.apply(null,Xt);const Zt=[];for(let ee=0;ee<Dt;ee+=kt){const Oe=Math.min(ee+kt,Dt),Le=Xt.subarray(ee,Oe);Zt.push(String.fromCharCode.apply(null,Le))}return Zt.join("")}function Bt(Xt){typeof Xt!="string"&&Pt("Invalid argument for stringToBytes");const Dt=Xt.length,kt=new Uint8Array(Dt);for(let Zt=0;Zt<Dt;++Zt)kt[Zt]=Xt.charCodeAt(Zt)&255;return kt}function Lt(Xt){return String.fromCharCode(Xt>>24&255,Xt>>16&255,Xt>>8&255,Xt&255)}function Ot(Xt){return Object.keys(Xt).length}function Gt(Xt){const Dt=Object.create(null);for(const[kt,Zt]of Xt)Dt[kt]=Zt;return Dt}function Jt(){const Xt=new Uint8Array(4);return Xt[0]=1,new Uint32Array(Xt.buffer,0,1)[0]===1}function zt(){try{return new Function(""),!0}catch{return!1}}class ue{static get isLittleEndian(){return re(this,"isLittleEndian",Jt())}static get isEvalSupported(){return re(this,"isEvalSupported",zt())}static get isOffscreenCanvasSupported(){return re(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?re(this,"platform",{isWin:!1,isMac:!1}):re(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Dt,kt;return re(this,"isCSSRoundSupported",(kt=(Dt=globalThis.CSS)==null?void 0:Dt.supports)==null?void 0:kt.call(Dt,"width: round(1.5px, 1px)"))}}s.FeatureTest=ue;const ye=[...Array(256).keys()].map(Xt=>Xt.toString(16).padStart(2,"0"));class se{static makeHexColor(Dt,kt,Zt){return`#${ye[Dt]}${ye[kt]}${ye[Zt]}`}static scaleMinMax(Dt,kt){let Zt;Dt[0]?(Dt[0]<0&&(Zt=kt[0],kt[0]=kt[1],kt[1]=Zt),kt[0]*=Dt[0],kt[1]*=Dt[0],Dt[3]<0&&(Zt=kt[2],kt[2]=kt[3],kt[3]=Zt),kt[2]*=Dt[3],kt[3]*=Dt[3]):(Zt=kt[0],kt[0]=kt[2],kt[2]=Zt,Zt=kt[1],kt[1]=kt[3],kt[3]=Zt,Dt[1]<0&&(Zt=kt[2],kt[2]=kt[3],kt[3]=Zt),kt[2]*=Dt[1],kt[3]*=Dt[1],Dt[2]<0&&(Zt=kt[0],kt[0]=kt[1],kt[1]=Zt),kt[0]*=Dt[2],kt[1]*=Dt[2]),kt[0]+=Dt[4],kt[1]+=Dt[4],kt[2]+=Dt[5],kt[3]+=Dt[5]}static transform(Dt,kt){return[Dt[0]*kt[0]+Dt[2]*kt[1],Dt[1]*kt[0]+Dt[3]*kt[1],Dt[0]*kt[2]+Dt[2]*kt[3],Dt[1]*kt[2]+Dt[3]*kt[3],Dt[0]*kt[4]+Dt[2]*kt[5]+Dt[4],Dt[1]*kt[4]+Dt[3]*kt[5]+Dt[5]]}static applyTransform(Dt,kt){const Zt=Dt[0]*kt[0]+Dt[1]*kt[2]+kt[4],ee=Dt[0]*kt[1]+Dt[1]*kt[3]+kt[5];return[Zt,ee]}static applyInverseTransform(Dt,kt){const Zt=kt[0]*kt[3]-kt[1]*kt[2],ee=(Dt[0]*kt[3]-Dt[1]*kt[2]+kt[2]*kt[5]-kt[4]*kt[3])/Zt,Oe=(-Dt[0]*kt[1]+Dt[1]*kt[0]+kt[4]*kt[1]-kt[5]*kt[0])/Zt;return[ee,Oe]}static getAxialAlignedBoundingBox(Dt,kt){const Zt=this.applyTransform(Dt,kt),ee=this.applyTransform(Dt.slice(2,4),kt),Oe=this.applyTransform([Dt[0],Dt[3]],kt),Le=this.applyTransform([Dt[2],Dt[1]],kt);return[Math.min(Zt[0],ee[0],Oe[0],Le[0]),Math.min(Zt[1],ee[1],Oe[1],Le[1]),Math.max(Zt[0],ee[0],Oe[0],Le[0]),Math.max(Zt[1],ee[1],Oe[1],Le[1])]}static inverseTransform(Dt){const kt=Dt[0]*Dt[3]-Dt[1]*Dt[2];return[Dt[3]/kt,-Dt[1]/kt,-Dt[2]/kt,Dt[0]/kt,(Dt[2]*Dt[5]-Dt[4]*Dt[3])/kt,(Dt[4]*Dt[1]-Dt[5]*Dt[0])/kt]}static singularValueDecompose2dScale(Dt){const kt=[Dt[0],Dt[2],Dt[1],Dt[3]],Zt=Dt[0]*kt[0]+Dt[1]*kt[2],ee=Dt[0]*kt[1]+Dt[1]*kt[3],Oe=Dt[2]*kt[0]+Dt[3]*kt[2],Le=Dt[2]*kt[1]+Dt[3]*kt[3],Mt=(Zt+Le)/2,ie=Math.sqrt((Zt+Le)**2-4*(Zt*Le-Oe*ee))/2,me=Mt+ie||1,le=Mt-ie||1;return[Math.sqrt(me),Math.sqrt(le)]}static normalizeRect(Dt){const kt=Dt.slice(0);return Dt[0]>Dt[2]&&(kt[0]=Dt[2],kt[2]=Dt[0]),Dt[1]>Dt[3]&&(kt[1]=Dt[3],kt[3]=Dt[1]),kt}static intersect(Dt,kt){const Zt=Math.max(Math.min(Dt[0],Dt[2]),Math.min(kt[0],kt[2])),ee=Math.min(Math.max(Dt[0],Dt[2]),Math.max(kt[0],kt[2]));if(Zt>ee)return null;const Oe=Math.max(Math.min(Dt[1],Dt[3]),Math.min(kt[1],kt[3])),Le=Math.min(Math.max(Dt[1],Dt[3]),Math.max(kt[1],kt[3]));return Oe>Le?null:[Zt,Oe,ee,Le]}static bezierBoundingBox(Dt,kt,Zt,ee,Oe,Le,Mt,ie){const me=[],le=[[],[]];let be,_e,Me,te,ke,ge,yt,i;for(let Ft=0;Ft<2;++Ft){if(Ft===0?(_e=6*Dt-12*Zt+6*Oe,be=-3*Dt+9*Zt-9*Oe+3*Mt,Me=3*Zt-3*Dt):(_e=6*kt-12*ee+6*Le,be=-3*kt+9*ee-9*Le+3*ie,Me=3*ee-3*kt),Math.abs(be)<1e-12){if(Math.abs(_e)<1e-12)continue;te=-Me/_e,0<te&&te<1&&me.push(te);continue}yt=_e*_e-4*Me*be,i=Math.sqrt(yt),!(yt<0)&&(ke=(-_e+i)/(2*be),0<ke&&ke<1&&me.push(ke),ge=(-_e-i)/(2*be),0<ge&&ge<1&&me.push(ge))}let Z=me.length,At;const Ct=Z;for(;Z--;)te=me[Z],At=1-te,le[0][Z]=At*At*At*Dt+3*At*At*te*Zt+3*At*te*te*Oe+te*te*te*Mt,le[1][Z]=At*At*At*kt+3*At*At*te*ee+3*At*te*te*Le+te*te*te*ie;return le[0][Ct]=Dt,le[1][Ct]=kt,le[0][Ct+1]=Mt,le[1][Ct+1]=ie,le[0].length=le[1].length=Ct+2,[Math.min(...le[0]),Math.min(...le[1]),Math.max(...le[0]),Math.max(...le[1])]}}s.Util=se;const pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Yt(Xt){if(Xt[0]>="ï"){let kt;if(Xt[0]==="þ"&&Xt[1]==="ÿ"?kt="utf-16be":Xt[0]==="ÿ"&&Xt[1]==="þ"?kt="utf-16le":Xt[0]==="ï"&&Xt[1]==="»"&&Xt[2]==="¿"&&(kt="utf-8"),kt)try{const Zt=new TextDecoder(kt,{fatal:!0}),ee=Bt(Xt);return Zt.decode(ee)}catch(Zt){$t(`stringToPDFString: "${Zt}".`)}}const Dt=[];for(let kt=0,Zt=Xt.length;kt<Zt;kt++){const ee=pe[Xt.charCodeAt(kt)];Dt.push(ee?String.fromCharCode(ee):Xt.charAt(kt))}return Dt.join("")}function It(Xt){return decodeURIComponent(escape(Xt))}function Nt(Xt){return unescape(encodeURIComponent(Xt))}function qt(Xt){return typeof Xt=="object"&&(Xt==null?void 0:Xt.byteLength)!==void 0}function ae(Xt,Dt){if(Xt.length!==Dt.length)return!1;for(let kt=0,Zt=Xt.length;kt<Zt;kt++)if(Xt[kt]!==Dt[kt])return!1;return!0}function oe(Xt=new Date){return[Xt.getUTCFullYear().toString(),(Xt.getUTCMonth()+1).toString().padStart(2,"0"),Xt.getUTCDate().toString().padStart(2,"0"),Xt.getUTCHours().toString().padStart(2,"0"),Xt.getUTCMinutes().toString().padStart(2,"0"),Xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ae{constructor(){Et(this,Ce,!1);this.promise=new Promise((Dt,kt)=>{this.resolve=Zt=>{jt(this,Ce,!0),Dt(Zt)},this.reject=Zt=>{jt(this,Ce,!0),kt(Zt)}})}get settled(){return e(this,Ce)}}Ce=new WeakMap,s.PromiseCapability=Ae;let Pe=null,ve=null;function we(Xt){return Pe||(Pe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ve=new Map([["ﬅ","ſt"]])),Xt.replaceAll(Pe,(Dt,kt,Zt)=>kt?kt.normalize("NFKC"):ve.get(Zt))}function Te(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Xt);else for(let Dt=0;Dt<32;Dt++)Xt[Dt]=Math.floor(Math.random()*255);return vt(Xt)}const Ee="pdfjs_internal_id_";s.AnnotationPrefix=Ee},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var b,ft,o,k,Ve,bt,rn,ut,rt,X,mt,_t,ht,st,et,j,an,lt,ot,An,d,m;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Y){if(typeof Y=="string"||Y instanceof URL?Y={url:Y}:(0,_util.isArrayBuffer)(Y)&&(Y={data:Y}),typeof Y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Y.url&&!Y.data&&!Y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const f=new PDFDocumentLoadingTask,{docId:dt}=f,$=Y.url?getUrlProp(Y.url):null,Tt=Y.data?getDataProp(Y.data):null,wt=Y.httpHeaders||null,at=Y.withCredentials===!0,Rt=Y.password??null,Ut=Y.range instanceof PDFDataRangeTransport?Y.range:null,$t=Number.isInteger(Y.rangeChunkSize)&&Y.rangeChunkSize>0?Y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Pt=Y.worker instanceof PDFWorker?Y.worker:null;const Vt=Y.verbosity,Kt=typeof Y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Y.docBaseUrl)?Y.docBaseUrl:null,ne=typeof Y.cMapUrl=="string"?Y.cMapUrl:null,re=Y.cMapPacked!==!1,ct=Y.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof Y.standardFontDataUrl=="string"?Y.standardFontDataUrl:null,h=Y.StandardFontDataFactory||DefaultStandardFontDataFactory,c=Y.stopAtErrors!==!0,g=Number.isInteger(Y.maxImageSize)&&Y.maxImageSize>-1?Y.maxImageSize:-1,_=Y.isEvalSupported!==!1,it=typeof Y.isOffscreenCanvasSupported=="boolean"?Y.isOffscreenCanvasSupported:!_util.isNodeJS,gt=Number.isInteger(Y.canvasMaxAreaInBytes)?Y.canvasMaxAreaInBytes:-1,vt=typeof Y.disableFontFace=="boolean"?Y.disableFontFace:_util.isNodeJS,Bt=Y.fontExtraProperties===!0,Lt=Y.enableXfa===!0,Ot=Y.ownerDocument||globalThis.document,Gt=Y.disableRange===!0,Jt=Y.disableStream===!0,zt=Y.disableAutoFetch===!0,ue=Y.pdfBug===!0,ye=Ut?Ut.length:Y.length??NaN,se=typeof Y.useSystemFonts=="boolean"?Y.useSystemFonts:!_util.isNodeJS&&!vt,pe=typeof Y.useWorkerFetch=="boolean"?Y.useWorkerFetch:ct===_display_utils.DOMCMapReaderFactory&&h===_display_utils.DOMStandardFontDataFactory&&ne&&a&&(0,_display_utils.isValidFetchUrl)(ne,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),Yt=Y.canvasFactory||new DefaultCanvasFactory({ownerDocument:Ot}),It=Y.filterFactory||new DefaultFilterFactory({docId:dt,ownerDocument:Ot}),Nt=null;(0,_util.setVerbosityLevel)(Vt);const qt={canvasFactory:Yt,filterFactory:It};if(pe||(qt.cMapReaderFactory=new ct({baseUrl:ne,isCompressed:re}),qt.standardFontDataFactory=new h({baseUrl:a})),!Pt){const Ae={verbosity:Vt,port:_worker_options.GlobalWorkerOptions.workerPort};Pt=Ae.port?PDFWorker.fromPort(Ae):new PDFWorker(Ae),f._worker=Pt}const ae={docId:dt,apiVersion:"3.11.174",data:Tt,password:Rt,disableAutoFetch:zt,rangeChunkSize:$t,length:ye,docBaseUrl:Kt,enableXfa:Lt,evaluatorOptions:{maxImageSize:g,disableFontFace:vt,ignoreErrors:c,isEvalSupported:_,isOffscreenCanvasSupported:it,canvasMaxAreaInBytes:gt,fontExtraProperties:Bt,useSystemFonts:se,cMapUrl:pe?ne:null,standardFontDataUrl:pe?a:null}},oe={ignoreErrors:c,isEvalSupported:_,disableFontFace:vt,fontExtraProperties:Bt,enableXfa:Lt,ownerDocument:Ot,disableAutoFetch:zt,pdfBug:ue,styleElement:Nt};return Pt.promise.then(function(){if(f.destroyed)throw new Error("Loading aborted");const Ae=_fetchDocument(Pt,ae),Pe=new Promise(function(ve){let we;Ut?we=new _transport_stream.PDFDataTransportStream({length:ye,initialData:Ut.initialData,progressiveDone:Ut.progressiveDone,contentDispositionFilename:Ut.contentDispositionFilename,disableRange:Gt,disableStream:Jt},Ut):Tt||(we=(Ee=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ee):(0,_display_utils.isValidFetchUrl)(Ee.url)?new _displayFetch_stream.PDFFetchStream(Ee):new _displayNetwork.PDFNetworkStream(Ee))({url:$,length:ye,httpHeaders:wt,withCredentials:at,rangeChunkSize:$t,disableRange:Gt,disableStream:Jt})),ve(we)});return Promise.all([Ae,Pe]).then(function([ve,we]){if(f.destroyed)throw new Error("Loading aborted");const Te=new _message_handler.MessageHandler(dt,ve,Pt.port),Ee=new WorkerTransport(Te,f,we,oe,qt);f._transport=Ee,Te.send("Ready",null)})}).catch(f._capability.reject),f}async function _fetchDocument(Y,f){if(Y.destroyed)throw new Error("Worker was destroyed");const dt=await Y.messageHandler.sendWithPromise("GetDocRequest",f,f.data?[f.data.buffer]:null);if(Y.destroyed)throw new Error("Worker was destroyed");return dt}function getUrlProp(Y){if(Y instanceof URL)return Y.href;try{return new URL(Y,window.location).href}catch{if(_util.isNodeJS&&typeof Y=="string")return Y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Y){if(_util.isNodeJS&&typeof Buffer<"u"&&Y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Y instanceof Uint8Array&&Y.byteLength===Y.buffer.byteLength)return Y;if(typeof Y=="string")return(0,_util.stringToBytes)(Y);if(typeof Y=="object"&&!isNaN(Y==null?void 0:Y.length)||(0,_util.isArrayBuffer)(Y))return new Uint8Array(Y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Ke(s,b)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var f,dt,$;this.destroyed=!0;try{(f=this._worker)!=null&&f.port&&(this._worker._pendingDestroy=!0),await((dt=this._transport)==null?void 0:dt.destroy())}catch(Tt){throw($=this._worker)!=null&&$.port&&delete this._worker._pendingDestroy,Tt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};b=new WeakMap,Et(s,b,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(f,dt,$=!1,Tt=null){this.length=f,this.initialData=dt,this.progressiveDone=$,this.contentDispositionFilename=Tt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(f){this._rangeListeners.push(f)}addProgressListener(f){this._progressListeners.push(f)}addProgressiveReadListener(f){this._progressiveReadListeners.push(f)}addProgressiveDoneListener(f){this._progressiveDoneListeners.push(f)}onDataRange(f,dt){for(const $ of this._rangeListeners)$(f,dt)}onDataProgress(f,dt){this._readyCapability.promise.then(()=>{for(const $ of this._progressListeners)$(f,dt)})}onDataProgressiveRead(f){this._readyCapability.promise.then(()=>{for(const dt of this._progressiveReadListeners)dt(f)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const f of this._progressiveDoneListeners)f()})}transportReady(){this._readyCapability.resolve()}requestDataRange(f,dt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(f,dt){this._pdfInfo=f,this._transport=dt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then($=>{if(!$)return $;const Tt=[];for(const wt in $)Tt.push(...$[wt]);return Tt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(f){return this._transport.getPage(f)}getPageIndex(f){return this._transport.getPageIndex(f)}getDestinations(){return this._transport.getDestinations()}getDestination(f){return this._transport.getDestination(f)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(f=!1){return this._transport.startCleanup(f||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(f,dt,$,Tt=!1){Et(this,k);Et(this,bt);Et(this,ft,null);Et(this,o,!1);this._pageIndex=f,this._pageInfo=dt,this._transport=$,this._stats=Tt?new _display_utils.StatTimer:null,this._pdfBug=Tt,this.commonObjs=$.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:f,rotation:dt=this.rotate,offsetX:$=0,offsetY:Tt=0,dontFlip:wt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:f,rotation:dt,offsetX:$,offsetY:Tt,dontFlip:wt})}getAnnotations({intent:f="display"}={}){const dt=this._transport.getRenderingIntent(f);return this._transport.getAnnotations(this._pageIndex,dt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var f;return((f=this._transport._htmlForXfa)==null?void 0:f.children[this._pageIndex])||null}render({canvasContext:f,viewport:dt,intent:$="display",annotationMode:Tt=_util.AnnotationMode.ENABLE,transform:wt=null,background:at=null,optionalContentConfigPromise:Rt=null,annotationCanvasMap:Ut=null,pageColors:$t=null,printAnnotationStorage:Pt=null}){var h,c;(h=this._stats)==null||h.time("Overall");const Vt=this._transport.getRenderingIntent($,Tt,Pt);jt(this,o,!1),xt(this,bt,rn).call(this),Rt||(Rt=this._transport.getOptionalContentConfig());let Kt=this._intentStates.get(Vt.cacheKey);Kt||(Kt=Object.create(null),this._intentStates.set(Vt.cacheKey,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const ne=!!(Vt.renderingIntent&_util.RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=new _util.PromiseCapability,Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(Vt));const re=g=>{var _,it;Kt.renderTasks.delete(ct),(this._maybeCleanupAfterRender||ne)&&jt(this,o,!0),xt(this,k,Ve).call(this,!ne),g?(ct.capability.reject(g),this._abortOperatorList({intentState:Kt,reason:g instanceof Error?g:new Error(g)})):ct.capability.resolve(),(_=this._stats)==null||_.timeEnd("Rendering"),(it=this._stats)==null||it.timeEnd("Overall")},ct=new InternalRenderTask({callback:re,params:{canvasContext:f,viewport:dt,transform:wt,background:at},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ut,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ne,pdfBug:this._pdfBug,pageColors:$t});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(ct);const a=ct.task;return Promise.all([Kt.displayReadyCapability.promise,Rt]).then(([g,_])=>{var it;if(this.destroyed){re();return}(it=this._stats)==null||it.time("Rendering"),ct.initializeGraphics({transparency:g,optionalContentConfig:_}),ct.operatorListChanged()}).catch(re),a}getOperatorList({intent:f="display",annotationMode:dt=_util.AnnotationMode.ENABLE,printAnnotationStorage:$=null}={}){var Ut;function Tt(){at.operatorList.lastChunk&&(at.opListReadCapability.resolve(at.operatorList),at.renderTasks.delete(Rt))}const wt=this._transport.getRenderingIntent(f,dt,$,!0);let at=this._intentStates.get(wt.cacheKey);at||(at=Object.create(null),this._intentStates.set(wt.cacheKey,at));let Rt;return at.opListReadCapability||(Rt=Object.create(null),Rt.operatorListChanged=Tt,at.opListReadCapability=new _util.PromiseCapability,(at.renderTasks||(at.renderTasks=new Set)).add(Rt),at.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ut=this._stats)==null||Ut.time("Page Request"),this._pumpOperatorList(wt)),at.opListReadCapability.promise}streamTextContent({includeMarkedContent:f=!1,disableNormalization:dt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:f===!0,disableNormalization:dt===!0},{highWaterMark:100,size(Tt){return Tt.items.length}})}getTextContent(f={}){if(this._transport._htmlForXfa)return this.getXfa().then($=>_xfa_text.XfaText.textContent($));const dt=this.streamTextContent(f);return new Promise(function($,Tt){function wt(){at.read().then(function({value:Ut,done:$t}){if($t){$(Rt);return}Object.assign(Rt.styles,Ut.styles),Rt.items.push(...Ut.items),wt()},Tt)}const at=dt.getReader(),Rt={items:[],styles:Object.create(null)};wt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const f=[];for(const dt of this._intentStates.values())if(this._abortOperatorList({intentState:dt,reason:new Error("Page was destroyed."),force:!0}),!dt.opListReadCapability)for(const $ of dt.renderTasks)f.push($.completed),$.cancel();return this.objs.clear(),jt(this,o,!1),xt(this,bt,rn).call(this),Promise.all(f)}cleanup(f=!1){jt(this,o,!0);const dt=xt(this,k,Ve).call(this,!1);return f&&dt&&this._stats&&(this._stats=new _display_utils.StatTimer),dt}_startRenderPage(f,dt){var Tt,wt;const $=this._intentStates.get(dt);$&&((Tt=this._stats)==null||Tt.timeEnd("Page Request"),(wt=$.displayReadyCapability)==null||wt.resolve(f))}_renderPageChunk(f,dt){for(let $=0,Tt=f.length;$<Tt;$++)dt.operatorList.fnArray.push(f.fnArray[$]),dt.operatorList.argsArray.push(f.argsArray[$]);dt.operatorList.lastChunk=f.lastChunk,dt.operatorList.separateAnnots=f.separateAnnots;for(const $ of dt.renderTasks)$.operatorListChanged();f.lastChunk&&xt(this,k,Ve).call(this,!0)}_pumpOperatorList({renderingIntent:f,cacheKey:dt,annotationStorageSerializable:$}){const{map:Tt,transfers:wt}=$,Rt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:f,cacheKey:dt,annotationStorage:Tt},wt).getReader(),Ut=this._intentStates.get(dt);Ut.streamReader=Rt;const $t=()=>{Rt.read().then(({value:Pt,done:Vt})=>{if(Vt){Ut.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Pt,Ut),$t())},Pt=>{if(Ut.streamReader=null,!this._transport.destroyed){if(Ut.operatorList){Ut.operatorList.lastChunk=!0;for(const Vt of Ut.renderTasks)Vt.operatorListChanged();xt(this,k,Ve).call(this,!0)}if(Ut.displayReadyCapability)Ut.displayReadyCapability.reject(Pt);else if(Ut.opListReadCapability)Ut.opListReadCapability.reject(Pt);else throw Pt}})};$t()}_abortOperatorList({intentState:f,reason:dt,force:$=!1}){if(f.streamReader){if(f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null),!$){if(f.renderTasks.size>0)return;if(dt instanceof _display_utils.RenderingCancelledException){let Tt=RENDERING_CANCELLED_TIMEOUT;dt.extraDelay>0&&dt.extraDelay<1e3&&(Tt+=dt.extraDelay),f.streamReaderCancelTimeout=setTimeout(()=>{f.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:f,reason:dt,force:!0})},Tt);return}}if(f.streamReader.cancel(new _util.AbortException(dt.message)).catch(()=>{}),f.streamReader=null,!this._transport.destroyed){for(const[Tt,wt]of this._intentStates)if(wt===f){this._intentStates.delete(Tt);break}this.cleanup()}}}get stats(){return this._stats}}ft=new WeakMap,o=new WeakMap,k=new WeakSet,Ve=function(f=!1){if(xt(this,bt,rn).call(this),!e(this,o)||this.destroyed)return!1;if(f)return jt(this,ft,setTimeout(()=>{jt(this,ft,null),xt(this,k,Ve).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:dt,operatorList:$}of this._intentStates.values())if(dt.size>0||!$.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),jt(this,o,!1),!0},bt=new WeakSet,rn=function(){e(this,ft)&&(clearTimeout(e(this,ft)),jt(this,ft,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Et(this,ut,new Set);Et(this,rt,Promise.resolve())}postMessage(f,dt){const $={data:structuredClone(f,dt?{transfer:dt}:null)};e(this,rt).then(()=>{for(const Tt of e(this,ut))Tt.call(this,$)})}addEventListener(f,dt){e(this,ut).add(dt)}removeEventListener(f,dt){e(this,ut).delete(dt)}terminate(){e(this,ut).clear()}}ut=new WeakMap,rt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Y=(X=document==null?void 0:document.currentScript)==null?void 0:X.src;Y&&(PDFWorkerUtil.fallbackWorkerSrc=Y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Y,f){let dt;try{if(dt=new URL(Y),!dt.origin||dt.origin==="null")return!1}catch{return!1}const $=new URL(f,dt);return dt.origin===$.origin},PDFWorkerUtil.createCDNWrapper=function(Y){const f=`importScripts("${Y}");`;return URL.createObjectURL(new Blob([f]))}}const _PDFWorker=class _PDFWorker{constructor({name:Y=null,port:f=null,verbosity:dt=(0,_util.getVerbosityLevel)()}={}){var $;if(this.name=Y,this.destroyed=!1,this.verbosity=dt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,f){if(($=e(_PDFWorker,mt))!=null&&$.has(f))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,mt)||jt(_PDFWorker,mt,new WeakMap)).set(f,this),this._initializeFromPort(f);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Y){this._port=Y,this._messageHandler=new _message_handler.MessageHandler("main","worker",Y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Y)||(Y=PDFWorkerUtil.createCDNWrapper(new URL(Y,window.location).href));const f=new Worker(Y),dt=new _message_handler.MessageHandler("main","worker",f),$=()=>{f.removeEventListener("error",Tt),dt.destroy(),f.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Tt=()=>{this._webWorker||$()};f.addEventListener("error",Tt),dt.on("test",at=>{if(f.removeEventListener("error",Tt),this.destroyed){$();return}at?(this._messageHandler=dt,this._port=f,this._webWorker=f,this._readyCapability.resolve(),dt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),dt.destroy(),f.terminate())}),dt.on("ready",at=>{if(f.removeEventListener("error",Tt),this.destroyed){$();return}try{wt()}catch{this._setupFakeWorker()}});const wt=()=>{const at=new Uint8Array;dt.send("test",at,[at.buffer])};wt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const f=new LoopbackPort;this._port=f;const dt=`fake${PDFWorkerUtil.fakeWorkerId++}`,$=new _message_handler.MessageHandler(dt+"_worker",dt,f);Y.setup($,f);const Tt=new _message_handler.MessageHandler(dt,dt+"_worker",f);this._messageHandler=Tt,this._readyCapability.resolve(),Tt.send("configure",{verbosity:this.verbosity})}).catch(Y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Y.message}".`))})}destroy(){var Y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Y=e(_PDFWorker,mt))==null||Y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Y){var dt;if(!(Y!=null&&Y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const f=(dt=e(this,mt))==null?void 0:dt.get(Y.port);if(f){if(f._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return f}return new _PDFWorker(Y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Y;try{return((Y=globalThis.pdfjsWorker)==null?void 0:Y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};mt=new WeakMap,Et(_PDFWorker,mt,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(f,dt,$,Tt,wt){Et(this,j);Et(this,_t,new Map);Et(this,ht,new Map);Et(this,st,new Map);Et(this,et,null);this.messageHandler=f,this.loadingTask=dt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Tt.ownerDocument,styleElement:Tt.styleElement}),this._params=Tt,this.canvasFactory=wt.canvasFactory,this.filterFactory=wt.filterFactory,this.cMapReaderFactory=wt.cMapReaderFactory,this.standardFontDataFactory=wt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=$,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(f,dt=_util.AnnotationMode.ENABLE,$=null,Tt=!1){let wt=_util.RenderingIntentFlag.DISPLAY,at=_annotation_storage.SerializableEmpty;switch(f){case"any":wt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":wt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${f}`)}switch(dt){case _util.AnnotationMode.DISABLE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:wt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:wt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,at=(wt&_util.RenderingIntentFlag.PRINT&&$ instanceof _annotation_storage.PrintAnnotationStorage?$:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${dt}`)}return Tt&&(wt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:wt,cacheKey:`${wt}_${at.hash}`,annotationStorageSerializable:at}}destroy(){var $;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,($=e(this,et))==null||$.reject(new Error("Worker was destroyed during onPassword callback"));const f=[];for(const Tt of e(this,ht).values())f.push(Tt._destroy());e(this,ht).clear(),e(this,st).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const dt=this.messageHandler.sendWithPromise("Terminate",null);return f.push(dt),Promise.all(f).then(()=>{var Tt;this.commonObjs.clear(),this.fontLoader.clear(),e(this,_t).clear(),this.filterFactory.destroy(),(Tt=this._networkStream)==null||Tt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:f,loadingTask:dt}=this;f.on("GetReader",($,Tt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=wt=>{this._lastProgress={loaded:wt.loaded,total:wt.total}},Tt.onPull=()=>{this._fullReader.read().then(function({value:wt,done:at}){if(at){Tt.close();return}(0,_util.assert)(wt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(wt),1,[wt])}).catch(wt=>{Tt.error(wt)})},Tt.onCancel=wt=>{this._fullReader.cancel(wt),Tt.ready.catch(at=>{if(!this.destroyed)throw at})}}),f.on("ReaderHeadersReady",$=>{const Tt=new _util.PromiseCapability,wt=this._fullReader;return wt.headersReady.then(()=>{var at;(!wt.isStreamingSupported||!wt.isRangeSupported)&&(this._lastProgress&&((at=dt.onProgress)==null||at.call(dt,this._lastProgress)),wt.onProgress=Rt=>{var Ut;(Ut=dt.onProgress)==null||Ut.call(dt,{loaded:Rt.loaded,total:Rt.total})}),Tt.resolve({isStreamingSupported:wt.isStreamingSupported,isRangeSupported:wt.isRangeSupported,contentLength:wt.contentLength})},Tt.reject),Tt.promise}),f.on("GetRangeReader",($,Tt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const wt=this._networkStream.getRangeReader($.begin,$.end);if(!wt){Tt.close();return}Tt.onPull=()=>{wt.read().then(function({value:at,done:Rt}){if(Rt){Tt.close();return}(0,_util.assert)(at instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(at),1,[at])}).catch(at=>{Tt.error(at)})},Tt.onCancel=at=>{wt.cancel(at),Tt.ready.catch(Rt=>{if(!this.destroyed)throw Rt})}}),f.on("GetDoc",({pdfInfo:$})=>{this._numPages=$.numPages,this._htmlForXfa=$.htmlForXfa,delete $.htmlForXfa,dt._capability.resolve(new PDFDocumentProxy($,this))}),f.on("DocException",function($){let Tt;switch($.name){case"PasswordException":Tt=new _util.PasswordException($.message,$.code);break;case"InvalidPDFException":Tt=new _util.InvalidPDFException($.message);break;case"MissingPDFException":Tt=new _util.MissingPDFException($.message);break;case"UnexpectedResponseException":Tt=new _util.UnexpectedResponseException($.message,$.status);break;case"UnknownErrorException":Tt=new _util.UnknownErrorException($.message,$.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}dt._capability.reject(Tt)}),f.on("PasswordRequest",$=>{if(jt(this,et,new _util.PromiseCapability),dt.onPassword){const Tt=wt=>{wt instanceof Error?e(this,et).reject(wt):e(this,et).resolve({password:wt})};try{dt.onPassword(Tt,$.code)}catch(wt){e(this,et).reject(wt)}}else e(this,et).reject(new _util.PasswordException($.message,$.code));return e(this,et).promise}),f.on("DataLoaded",$=>{var Tt;(Tt=dt.onProgress)==null||Tt.call(dt,{loaded:$.length,total:$.length}),this.downloadInfoCapability.resolve($)}),f.on("StartRenderPage",$=>{if(this.destroyed)return;e(this,ht).get($.pageIndex)._startRenderPage($.transparency,$.cacheKey)}),f.on("commonobj",([$,Tt,wt])=>{var at;if(!this.destroyed&&!this.commonObjs.has($))switch(Tt){case"Font":const Rt=this._params;if("error"in wt){const Pt=wt.error;(0,_util.warn)(`Error during font loading: ${Pt}`),this.commonObjs.resolve($,Pt);break}const Ut=Rt.pdfBug&&((at=globalThis.FontInspector)!=null&&at.enabled)?(Pt,Vt)=>globalThis.FontInspector.fontAdded(Pt,Vt):null,$t=new _font_loader.FontFaceObject(wt,{isEvalSupported:Rt.isEvalSupported,disableFontFace:Rt.disableFontFace,ignoreErrors:Rt.ignoreErrors,inspectFont:Ut});this.fontLoader.bind($t).catch(Pt=>f.sendWithPromise("FontFallback",{id:$})).finally(()=>{!Rt.fontExtraProperties&&$t.data&&($t.data=null),this.commonObjs.resolve($,$t)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve($,wt);break;default:throw new Error(`Got unknown common object type ${Tt}`)}}),f.on("obj",([$,Tt,wt,at])=>{var Ut;if(this.destroyed)return;const Rt=e(this,ht).get(Tt);if(!Rt.objs.has($))switch(wt){case"Image":if(Rt.objs.resolve($,at),at){let $t;if(at.bitmap){const{width:Pt,height:Vt}=at;$t=Pt*Vt*4}else $t=((Ut=at.data)==null?void 0:Ut.length)||0;$t>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Rt._maybeCleanupAfterRender=!0)}break;case"Pattern":Rt.objs.resolve($,at);break;default:throw new Error(`Got unknown object type ${wt}`)}}),f.on("DocProgress",$=>{var Tt;this.destroyed||(Tt=dt.onProgress)==null||Tt.call(dt,{loaded:$.loaded,total:$.total})}),f.on("FetchBuiltInCMap",$=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch($):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),f.on("FetchStandardFontData",$=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch($):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var $;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:f,transfers:dt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:f,filename:(($=this._fullReader)==null?void 0:$.filename)??null},dt).finally(()=>{this.annotationStorage.resetModified()})}getPage(f){if(!Number.isInteger(f)||f<=0||f>this._numPages)return Promise.reject(new Error("Invalid page request."));const dt=f-1,$=e(this,st).get(dt);if($)return $;const Tt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:dt}).then(wt=>{if(this.destroyed)throw new Error("Transport destroyed");const at=new PDFPageProxy(dt,wt,this,this._params.pdfBug);return e(this,ht).set(dt,at),at});return e(this,st).set(dt,Tt),Tt}getPageIndex(f){return typeof f!="object"||f===null||!Number.isInteger(f.num)||f.num<0||!Number.isInteger(f.gen)||f.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:f.num,gen:f.gen})}getAnnotations(f,dt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:f,intent:dt})}getFieldObjects(){return xt(this,j,an).call(this,"GetFieldObjects")}hasJSActions(){return xt(this,j,an).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(f){return typeof f!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:f})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return xt(this,j,an).call(this,"GetDocJSActions")}getPageJSActions(f){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:f})}getStructTree(f){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:f})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(f=>new _optional_content_config.OptionalContentConfig(f))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const f="GetMetadata",dt=e(this,_t).get(f);if(dt)return dt;const $=this.messageHandler.sendWithPromise(f,null).then(Tt=>{var wt,at;return{info:Tt[0],metadata:Tt[1]?new _metadata.Metadata(Tt[1]):null,contentDispositionFilename:((wt=this._fullReader)==null?void 0:wt.filename)??null,contentLength:((at=this._fullReader)==null?void 0:at.contentLength)??null}});return e(this,_t).set(f,$),$}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(f=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const dt of e(this,ht).values())if(!dt.cleanup())throw new Error(`startCleanup: Page ${dt.pageNumber} is currently rendering.`);this.commonObjs.clear(),f||this.fontLoader.clear(),e(this,_t).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:f,enableXfa:dt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:f,enableXfa:dt})}}_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakSet,an=function(f,dt=null){const $=e(this,_t).get(f);if($)return $;const Tt=this.messageHandler.sendWithPromise(f,dt);return e(this,_t).set(f,Tt),Tt};class PDFObjects{constructor(){Et(this,ot);Et(this,lt,Object.create(null))}get(f,dt=null){if(dt){const Tt=xt(this,ot,An).call(this,f);return Tt.capability.promise.then(()=>dt(Tt.data)),null}const $=e(this,lt)[f];if(!($!=null&&$.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${f}.`);return $.data}has(f){const dt=e(this,lt)[f];return(dt==null?void 0:dt.capability.settled)||!1}resolve(f,dt=null){const $=xt(this,ot,An).call(this,f);$.data=dt,$.capability.resolve()}clear(){var f;for(const dt in e(this,lt)){const{data:$}=e(this,lt)[dt];(f=$==null?void 0:$.bitmap)==null||f.close()}jt(this,lt,Object.create(null))}}lt=new WeakMap,ot=new WeakSet,An=function(f){var dt;return(dt=e(this,lt))[f]||(dt[f]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(f){Et(this,d,null);jt(this,d,f),this.onContinue=null}get promise(){return e(this,d).capability.promise}cancel(f=0){e(this,d).cancel(null,f)}get separateAnnots(){const{separateAnnots:f}=e(this,d).operatorList;if(!f)return!1;const{annotationCanvasMap:dt}=e(this,d);return f.form||f.canvas&&(dt==null?void 0:dt.size)>0}}d=new WeakMap,exports.RenderTask=RenderTask;const pt=class pt{constructor({callback:f,params:dt,objs:$,commonObjs:Tt,annotationCanvasMap:wt,operatorList:at,pageIndex:Rt,canvasFactory:Ut,filterFactory:$t,useRequestAnimationFrame:Pt=!1,pdfBug:Vt=!1,pageColors:Kt=null}){this.callback=f,this.params=dt,this.objs=$,this.commonObjs=Tt,this.annotationCanvasMap=wt,this.operatorListIdx=null,this.operatorList=at,this._pageIndex=Rt,this.canvasFactory=Ut,this.filterFactory=$t,this._pdfBug=Vt,this.pageColors=Kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Pt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=dt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:f=!1,optionalContentConfig:dt}){var Rt,Ut;if(this.cancelled)return;if(this._canvas){if(e(pt,m).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(pt,m).add(this._canvas)}this._pdfBug&&((Rt=globalThis.StepperManager)!=null&&Rt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:$,viewport:Tt,transform:wt,background:at}=this.params;this.gfx=new _canvas.CanvasGraphics($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:dt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:wt,viewport:Tt,transparency:f,background:at}),this.operatorListIdx=0,this.graphicsReady=!0,(Ut=this.graphicsReadyCallback)==null||Ut.call(this)}cancel(f=null,dt=0){var $;this.running=!1,this.cancelled=!0,($=this.gfx)==null||$.endDrawing(),e(pt,m).delete(this._canvas),this.callback(f||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,dt))}operatorListChanged(){var f;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(f=this.stepper)==null||f.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(pt,m).delete(this._canvas),this.callback())))}};m=new WeakMap,Et(pt,m,new WeakSet);let InternalRenderTask=pt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(b,s,ft)=>{var rt,X,mt,es,ht;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var o=ft(1),k=ft(4),St=ft(8);const bt=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=bt;class Wt{constructor(){Et(this,mt);Et(this,rt,!1);Et(this,X,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(et,j){const tt=e(this,X).get(et);return tt===void 0?j:Object.assign(j,tt)}getRawValue(et){return e(this,X).get(et)}remove(et){if(e(this,X).delete(et),e(this,X).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const j of e(this,X).values())if(j instanceof k.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(et,j){const tt=e(this,X).get(et);let lt=!1;if(tt!==void 0)for(const[ot,nt]of Object.entries(j))tt[ot]!==nt&&(lt=!0,tt[ot]=nt);else lt=!0,e(this,X).set(et,j);lt&&xt(this,mt,es).call(this),j instanceof k.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(j.constructor._type)}has(et){return e(this,X).has(et)}getAll(){return e(this,X).size>0?(0,o.objectFromMap)(e(this,X)):null}setAll(et){for(const[j,tt]of Object.entries(et))this.setValue(j,tt)}get size(){return e(this,X).size}resetModified(){e(this,rt)&&(jt(this,rt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ut(this)}get serializable(){if(e(this,X).size===0)return bt;const et=new Map,j=new St.MurmurHash3_64,tt=[],lt=Object.create(null);let ot=!1;for(const[nt,d]of e(this,X)){const m=d instanceof k.AnnotationEditor?d.serialize(!1,lt):d;m&&(et.set(nt,m),j.update(`${nt}:${JSON.stringify(m)}`),ot||(ot=!!m.bitmap))}if(ot)for(const nt of et.values())nt.bitmap&&tt.push(nt.bitmap);return et.size>0?{map:et,hash:j.hexdigest(),transfers:tt}:bt}}rt=new WeakMap,X=new WeakMap,mt=new WeakSet,es=function(){e(this,rt)||(jt(this,rt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=Wt;class ut extends Wt{constructor(j){super();Et(this,ht,void 0);const{map:tt,hash:lt,transfers:ot}=j.serializable,nt=structuredClone(tt,ot?{transfer:ot}:null);jt(this,ht,{map:nt,hash:lt,transfers:ot})}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,ht)}}ht=new WeakMap,s.PrintAnnotationStorage=ut},(b,s,ft)=>{var ut,rt,X,mt,_t,ht,st,et,j,tt,lt,ot,nt,d,m,vn,Y,En,dt,Sn,Tt,Tn,at,ns,Ut,ss,Pt,is,Kt,Pn,re,rs;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var o=ft(5),k=ft(1),St=ft(6);const a=class a{constructor(c){Et(this,m);Et(this,Y);Et(this,Tt);Et(this,at);Et(this,Ut);Et(this,Pt);Et(this,Kt);Et(this,re);Et(this,ut,"");Et(this,rt,!1);Et(this,X,null);Et(this,mt,null);Et(this,_t,null);Et(this,ht,!1);Et(this,st,null);Et(this,et,this.focusin.bind(this));Et(this,j,this.focusout.bind(this));Et(this,tt,!1);Et(this,lt,!1);Et(this,ot,!1);Ie(this,"_initialOptions",Object.create(null));Ie(this,"_uiManager",null);Ie(this,"_focusEventsAllowed",!0);Ie(this,"_l10nPromise",null);Et(this,nt,!1);Et(this,d,a._zIndex++);this.constructor===a&&(0,k.unreachable)("Cannot initialize AnnotationEditor."),this.parent=c.parent,this.id=c.id,this.width=this.height=null,this.pageIndex=c.parent.pageIndex,this.name=c.name,this.div=null,this._uiManager=c.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=c.isCentered,this._structTreeParentId=null;const{rotation:g,rawDims:{pageWidth:_,pageHeight:it,pageX:gt,pageY:vt}}=this.parent.viewport;this.rotation=g,this.pageRotation=(360+g-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[_,it],this.pageTranslation=[gt,vt];const[Bt,Lt]=this.parentDimensions;this.x=c.x/Bt,this.y=c.y/Lt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,k.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(c){const g=new Wt({id:c.parent.getNextId(),parent:c.parent,uiManager:c._uiManager});g.annotationElementId=c.annotationElementId,g.deleted=!0,g._uiManager.addToAnnotationStorage(g)}static initialize(c,g=null){if(a._l10nPromise||(a._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(it=>[it,c.get(it)]))),g!=null&&g.strings)for(const it of g.strings)a._l10nPromise.set(it,c.get(it));if(a._borderLineWidth!==-1)return;const _=getComputedStyle(document.documentElement);a._borderLineWidth=parseFloat(_.getPropertyValue("--outline-width"))||0}static updateDefaultParams(c,g){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(c){return!1}static paste(c,g){(0,k.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,nt)}set _isDraggable(c){var g;jt(this,nt,c),(g=this.div)==null||g.classList.toggle("draggable",c)}center(){const[c,g]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*g/(c*2),this.y+=this.width*c/(g*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*g/(c*2),this.y-=this.width*c/(g*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(c){this._uiManager.addCommands(c)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,d)}setParent(c){c!==null&&(this.pageIndex=c.pageIndex,this.pageDimensions=c.pageDimensions),this.parent=c}focusin(c){this._focusEventsAllowed&&(e(this,tt)?jt(this,tt,!1):this.parent.setSelected(this))}focusout(c){var _;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const g=c.relatedTarget;g!=null&&g.closest(`#${this.id}`)||(c.preventDefault(),(_=this.parent)!=null&&_.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(c,g,_,it){const[gt,vt]=this.parentDimensions;[_,it]=this.screenToPageTranslation(_,it),this.x=(c+_)/gt,this.y=(g+it)/vt,this.fixAndSetPosition()}translate(c,g){xt(this,m,vn).call(this,this.parentDimensions,c,g)}translateInPage(c,g){xt(this,m,vn).call(this,this.pageDimensions,c,g),this.div.scrollIntoView({block:"nearest"})}drag(c,g){const[_,it]=this.parentDimensions;if(this.x+=c/_,this.y+=g/it,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Ot,y:Gt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ot,Gt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:gt,y:vt}=this;const[Bt,Lt]=xt(this,Y,En).call(this);gt+=Bt,vt+=Lt,this.div.style.left=`${(100*gt).toFixed(2)}%`,this.div.style.top=`${(100*vt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[c,g]=this.pageDimensions;let{x:_,y:it,width:gt,height:vt}=this;switch(gt*=c,vt*=g,_*=c,it*=g,this.rotation){case 0:_=Math.max(0,Math.min(c-gt,_)),it=Math.max(0,Math.min(g-vt,it));break;case 90:_=Math.max(0,Math.min(c-vt,_)),it=Math.min(g,Math.max(gt,it));break;case 180:_=Math.min(c,Math.max(gt,_)),it=Math.min(g,Math.max(vt,it));break;case 270:_=Math.min(c,Math.max(vt,_)),it=Math.max(0,Math.min(g-gt,it));break}this.x=_/=c,this.y=it/=g;const[Bt,Lt]=xt(this,Y,En).call(this);_+=Bt,it+=Lt;const{style:Ot}=this.div;Ot.left=`${(100*_).toFixed(2)}%`,Ot.top=`${(100*it).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(c,g){var _;return xt(_=a,dt,Sn).call(_,c,g,this.parentRotation)}pageTranslationToScreen(c,g){var _;return xt(_=a,dt,Sn).call(_,c,g,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:c,pageDimensions:[g,_]}=this,it=g*c,gt=_*c;return k.FeatureTest.isCSSRoundSupported?[Math.round(it),Math.round(gt)]:[it,gt]}setDims(c,g){var gt;const[_,it]=this.parentDimensions;this.div.style.width=`${(100*c/_).toFixed(2)}%`,e(this,ht)||(this.div.style.height=`${(100*g/it).toFixed(2)}%`),(gt=e(this,X))==null||gt.classList.toggle("small",c<a.SMALL_EDITOR_SIZE||g<a.SMALL_EDITOR_SIZE)}fixDims(){const{style:c}=this.div,{height:g,width:_}=c,it=_.endsWith("%"),gt=!e(this,ht)&&g.endsWith("%");if(it&&gt)return;const[vt,Bt]=this.parentDimensions;it||(c.width=`${(100*parseFloat(_)/vt).toFixed(2)}%`),!e(this,ht)&&!gt&&(c.height=`${(100*parseFloat(g)/Bt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,X))return;const c=jt(this,X,document.createElement("button"));c.className="altText";const g=await a._l10nPromise.get("editor_alt_text_button_label");c.textContent=g,c.setAttribute("aria-label",g),c.tabIndex="0",c.addEventListener("contextmenu",St.noContextMenu),c.addEventListener("pointerdown",_=>_.stopPropagation()),c.addEventListener("click",_=>{_.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),c.addEventListener("keydown",_=>{_.target===c&&_.key==="Enter"&&(_.preventDefault(),this._uiManager.editAltText(this))}),xt(this,Kt,Pn).call(this),this.div.append(c),a.SMALL_EDITOR_SIZE||(a.SMALL_EDITOR_SIZE=Math.min(128,Math.round(c.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,ut),decorative:e(this,rt)}}set altTextData({altText:c,decorative:g}){e(this,ut)===c&&e(this,rt)===g||(jt(this,ut,c),jt(this,rt,g),xt(this,Kt,Pn).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,et)),this.div.addEventListener("focusout",e(this,j));const[c,g]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*g/c).toFixed(2)}%`,this.div.style.maxHeight=`${(100*c/g).toFixed(2)}%`);const[_,it]=this.getInitialTranslation();return this.translate(_,it),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(c){const{isMac:g}=k.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&g){c.preventDefault();return}jt(this,tt,!0),xt(this,re,rs).call(this,c)}moveInDOM(){var c;(c=this.parent)==null||c.moveEditorInDOM(this)}_setParentAndPosition(c,g,_){c.changeParent(this),this.x=g,this.y=_,this.fixAndSetPosition()}getRect(c,g){const _=this.parentScale,[it,gt]=this.pageDimensions,[vt,Bt]=this.pageTranslation,Lt=c/_,Ot=g/_,Gt=this.x*it,Jt=this.y*gt,zt=this.width*it,ue=this.height*gt;switch(this.rotation){case 0:return[Gt+Lt+vt,gt-Jt-Ot-ue+Bt,Gt+Lt+zt+vt,gt-Jt-Ot+Bt];case 90:return[Gt+Ot+vt,gt-Jt+Lt+Bt,Gt+Ot+ue+vt,gt-Jt+Lt+zt+Bt];case 180:return[Gt-Lt-zt+vt,gt-Jt+Ot+Bt,Gt-Lt+vt,gt-Jt+Ot+ue+Bt];case 270:return[Gt-Ot-ue+vt,gt-Jt-Lt-zt+Bt,Gt-Ot+vt,gt-Jt-Lt+Bt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(c,g){const[_,it,gt,vt]=c,Bt=gt-_,Lt=vt-it;switch(this.rotation){case 0:return[_,g-vt,Bt,Lt];case 90:return[_,g-it,Lt,Bt];case 180:return[gt,g-it,Bt,Lt];case 270:return[gt,g-vt,Lt,Bt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){jt(this,ot,!0)}disableEditMode(){jt(this,ot,!1)}isInEditMode(){return e(this,ot)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var c,g;(c=this.div)==null||c.addEventListener("focusin",e(this,et)),(g=this.div)==null||g.addEventListener("focusout",e(this,j))}serialize(c=!1,g=null){(0,k.unreachable)("An editor must be serializable")}static deserialize(c,g,_){const it=new this.prototype.constructor({parent:g,id:g.getNextId(),uiManager:_});it.rotation=c.rotation;const[gt,vt]=it.pageDimensions,[Bt,Lt,Ot,Gt]=it.getRectInCurrentCoords(c.rect,vt);return it.x=Bt/gt,it.y=Lt/vt,it.width=Ot/gt,it.height=Gt/vt,it}remove(){var c;this.div.removeEventListener("focusin",e(this,et)),this.div.removeEventListener("focusout",e(this,j)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(c=e(this,X))==null||c.remove(),jt(this,X,null),jt(this,mt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(xt(this,at,ns).call(this),e(this,st).classList.remove("hidden"))}select(){var c;this.makeResizable(),(c=this.div)==null||c.classList.add("selectedEditor")}unselect(){var c,g,_;(c=e(this,st))==null||c.classList.add("hidden"),(g=this.div)==null||g.classList.remove("selectedEditor"),(_=this.div)!=null&&_.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(c,g){}disableEditing(){e(this,X)&&(e(this,X).hidden=!0)}enableEditing(){e(this,X)&&(e(this,X).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,lt)}set isEditing(c){jt(this,lt,c),this.parent&&(c?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(c,g){jt(this,ht,!0);const _=c/g,{style:it}=this.div;it.aspectRatio=_,it.height="auto"}static get MIN_SIZE(){return 16}};ut=new WeakMap,rt=new WeakMap,X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakMap,lt=new WeakMap,ot=new WeakMap,nt=new WeakMap,d=new WeakMap,m=new WeakSet,vn=function([c,g],_,it){[_,it]=this.screenToPageTranslation(_,it),this.x+=_/c,this.y+=it/g,this.fixAndSetPosition()},Y=new WeakSet,En=function(){const[c,g]=this.parentDimensions,{_borderLineWidth:_}=a,it=_/c,gt=_/g;switch(this.rotation){case 90:return[-it,gt];case 180:return[it,gt];case 270:return[it,-gt];default:return[-it,-gt]}},dt=new WeakSet,Sn=function(c,g,_){switch(_){case 90:return[g,-c];case 180:return[-c,-g];case 270:return[-g,c];default:return[c,g]}},Tt=new WeakSet,Tn=function(c){switch(c){case 90:{const[g,_]=this.pageDimensions;return[0,-g/_,_/g,0]}case 180:return[-1,0,0,-1];case 270:{const[g,_]=this.pageDimensions;return[0,g/_,-_/g,0]}default:return[1,0,0,1]}},at=new WeakSet,ns=function(){if(e(this,st))return;jt(this,st,document.createElement("div")),e(this,st).classList.add("resizers");const c=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||c.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const g of c){const _=document.createElement("div");e(this,st).append(_),_.classList.add("resizer",g),_.addEventListener("pointerdown",xt(this,Ut,ss).bind(this,g)),_.addEventListener("contextmenu",St.noContextMenu)}this.div.prepend(e(this,st))},Ut=new WeakSet,ss=function(c,g){g.preventDefault();const{isMac:_}=k.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&_)return;const it=xt(this,Pt,is).bind(this,c),gt=this._isDraggable;this._isDraggable=!1;const vt={passive:!0,capture:!0};window.addEventListener("pointermove",it,vt);const Bt=this.x,Lt=this.y,Ot=this.width,Gt=this.height,Jt=this.parent.div.style.cursor,zt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(g.target).cursor;const ue=()=>{this._isDraggable=gt,window.removeEventListener("pointerup",ue),window.removeEventListener("blur",ue),window.removeEventListener("pointermove",it,vt),this.parent.div.style.cursor=Jt,this.div.style.cursor=zt;const ye=this.x,se=this.y,pe=this.width,Yt=this.height;ye===Bt&&se===Lt&&pe===Ot&&Yt===Gt||this.addCommands({cmd:()=>{this.width=pe,this.height=Yt,this.x=ye,this.y=se;const[It,Nt]=this.parentDimensions;this.setDims(It*pe,Nt*Yt),this.fixAndSetPosition()},undo:()=>{this.width=Ot,this.height=Gt,this.x=Bt,this.y=Lt;const[It,Nt]=this.parentDimensions;this.setDims(It*Ot,Nt*Gt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ue),window.addEventListener("blur",ue)},Pt=new WeakSet,is=function(c,g){const[_,it]=this.parentDimensions,gt=this.x,vt=this.y,Bt=this.width,Lt=this.height,Ot=a.MIN_SIZE/_,Gt=a.MIN_SIZE/it,Jt=Zt=>Math.round(Zt*1e4)/1e4,zt=xt(this,Tt,Tn).call(this,this.rotation),ue=(Zt,ee)=>[zt[0]*Zt+zt[2]*ee,zt[1]*Zt+zt[3]*ee],ye=xt(this,Tt,Tn).call(this,360-this.rotation),se=(Zt,ee)=>[ye[0]*Zt+ye[2]*ee,ye[1]*Zt+ye[3]*ee];let pe,Yt,It=!1,Nt=!1;switch(c){case"topLeft":It=!0,pe=(Zt,ee)=>[0,0],Yt=(Zt,ee)=>[Zt,ee];break;case"topMiddle":pe=(Zt,ee)=>[Zt/2,0],Yt=(Zt,ee)=>[Zt/2,ee];break;case"topRight":It=!0,pe=(Zt,ee)=>[Zt,0],Yt=(Zt,ee)=>[0,ee];break;case"middleRight":Nt=!0,pe=(Zt,ee)=>[Zt,ee/2],Yt=(Zt,ee)=>[0,ee/2];break;case"bottomRight":It=!0,pe=(Zt,ee)=>[Zt,ee],Yt=(Zt,ee)=>[0,0];break;case"bottomMiddle":pe=(Zt,ee)=>[Zt/2,ee],Yt=(Zt,ee)=>[Zt/2,0];break;case"bottomLeft":It=!0,pe=(Zt,ee)=>[0,ee],Yt=(Zt,ee)=>[Zt,0];break;case"middleLeft":Nt=!0,pe=(Zt,ee)=>[0,ee/2],Yt=(Zt,ee)=>[Zt,ee/2];break}const qt=pe(Bt,Lt),ae=Yt(Bt,Lt);let oe=ue(...ae);const Ae=Jt(gt+oe[0]),Pe=Jt(vt+oe[1]);let ve=1,we=1,[Te,Ee]=this.screenToPageTranslation(g.movementX,g.movementY);if([Te,Ee]=se(Te/_,Ee/it),It){const Zt=Math.hypot(Bt,Lt);ve=we=Math.max(Math.min(Math.hypot(ae[0]-qt[0]-Te,ae[1]-qt[1]-Ee)/Zt,1/Bt,1/Lt),Ot/Bt,Gt/Lt)}else Nt?ve=Math.max(Ot,Math.min(1,Math.abs(ae[0]-qt[0]-Te)))/Bt:we=Math.max(Gt,Math.min(1,Math.abs(ae[1]-qt[1]-Ee)))/Lt;const Ce=Jt(Bt*ve),Xt=Jt(Lt*we);oe=ue(...Yt(Ce,Xt));const Dt=Ae-oe[0],kt=Pe-oe[1];this.width=Ce,this.height=Xt,this.x=Dt,this.y=kt,this.setDims(_*Ce,it*Xt),this.fixAndSetPosition()},Kt=new WeakSet,Pn=async function(){var _;const c=e(this,X);if(!c)return;if(!e(this,ut)&&!e(this,rt)){c.classList.remove("done"),(_=e(this,mt))==null||_.remove();return}a._l10nPromise.get("editor_alt_text_edit_button_label").then(it=>{c.setAttribute("aria-label",it)});let g=e(this,mt);if(!g){jt(this,mt,g=document.createElement("span")),g.className="tooltip",g.setAttribute("role","tooltip");const it=g.id=`alt-text-tooltip-${this.id}`;c.setAttribute("aria-describedby",it);const gt=100;c.addEventListener("mouseenter",()=>{jt(this,_t,setTimeout(()=>{jt(this,_t,null),e(this,mt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},gt))}),c.addEventListener("mouseleave",()=>{var vt;clearTimeout(e(this,_t)),jt(this,_t,null),(vt=e(this,mt))==null||vt.classList.remove("show")})}c.classList.add("done"),g.innerText=e(this,rt)?await a._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,ut),g.parentNode||c.append(g)},re=new WeakSet,rs=function(c){if(!this._isDraggable)return;const g=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let _,it;g&&(_={passive:!0,capture:!0},it=vt=>{const[Bt,Lt]=this.screenToPageTranslation(vt.movementX,vt.movementY);this._uiManager.dragSelectedEditors(Bt,Lt)},window.addEventListener("pointermove",it,_));const gt=()=>{if(window.removeEventListener("pointerup",gt),window.removeEventListener("blur",gt),g&&window.removeEventListener("pointermove",it,_),jt(this,tt,!1),!this._uiManager.endDragSession()){const{isMac:vt}=k.FeatureTest.platform;c.ctrlKey&&!vt||c.shiftKey||c.metaKey&&vt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",gt),window.addEventListener("blur",gt)},Et(a,dt),Ie(a,"_borderLineWidth",-1),Ie(a,"_colorManager",new o.ColorManager),Ie(a,"_zIndex",1),Ie(a,"SMALL_EDITOR_SIZE",0);let bt=a;s.AnnotationEditor=bt;class Wt extends bt{constructor(c){super(c),this.annotationElementId=c.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(b,s,ft)=>{var ht,st,et,j,tt,wn,nt,d,m,pt,Y,as,$,Tt,wt,at,Rt,Ut,$t,Pt,Vt,Kt,ne,re,ct,a,h,c,g,_,it,gt,vt,Bt,Lt,Ot,Gt,Jt,zt,ue,ye,se,pe,Yt,It,Nt,qt,os,oe,Cn,Pe,xn,we,on,Ee,Rn,Xt,kn,kt,je,ee,Je,Le,ls,ie,cs,le,Fn,_e,Qe,te,Mn;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=St,s.opacityToHex=bt;var o=ft(1),k=ft(6);function St(yt,i,Z){for(const At of Z)i.addEventListener(At,yt[At].bind(yt))}function bt(yt){return Math.round(Math.min(255,Math.max(1,255*yt))).toString(16).padStart(2,"0")}class Wt{constructor(){Et(this,ht,0)}getId(){return`${o.AnnotationEditorPrefix}${Ke(this,ht)._++}`}}ht=new WeakMap;const ot=class ot{constructor(){Et(this,tt);Et(this,st,(0,o.getUuid)());Et(this,et,0);Et(this,j,null)}static get _isSVGFittingCanvas(){const i='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',At=new OffscreenCanvas(1,3).getContext("2d"),Ct=new Image;Ct.src=i;const Ft=Ct.decode().then(()=>(At.drawImage(Ct,0,0,1,1,0,0,1,3),new Uint32Array(At.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",Ft)}async getFromFile(i){const{lastModified:Z,name:At,size:Ct,type:Ft}=i;return xt(this,tt,wn).call(this,`${Z}_${At}_${Ct}_${Ft}`,i)}async getFromUrl(i){return xt(this,tt,wn).call(this,i,i)}async getFromId(i){e(this,j)||jt(this,j,new Map);const Z=e(this,j).get(i);return Z?Z.bitmap?(Z.refCounter+=1,Z):Z.file?this.getFromFile(Z.file):this.getFromUrl(Z.url):null}getSvgUrl(i){const Z=e(this,j).get(i);return Z!=null&&Z.isSvg?Z.svgUrl:null}deleteId(i){e(this,j)||jt(this,j,new Map);const Z=e(this,j).get(i);Z&&(Z.refCounter-=1,Z.refCounter===0&&(Z.bitmap=null))}isValidId(i){return i.startsWith(`image_${e(this,st)}_`)}};st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakSet,wn=async function(i,Z){e(this,j)||jt(this,j,new Map);let At=e(this,j).get(i);if(At===null)return null;if(At!=null&&At.bitmap)return At.refCounter+=1,At;try{At||(At={bitmap:null,id:`image_${e(this,st)}_${Ke(this,et)._++}`,refCounter:0,isSvg:!1});let Ct;if(typeof Z=="string"){At.url=Z;const Ft=await fetch(Z);if(!Ft.ok)throw new Error(Ft.statusText);Ct=await Ft.blob()}else Ct=At.file=Z;if(Ct.type==="image/svg+xml"){const Ft=ot._isSVGFittingCanvas,Ht=new FileReader,Qt=new Image,he=new Promise((ce,xe)=>{Qt.onload=()=>{At.bitmap=Qt,At.isSvg=!0,ce()},Ht.onload=async()=>{const de=At.svgUrl=Ht.result;Qt.src=await Ft?`${de}#svgView(preserveAspectRatio(none))`:de},Qt.onerror=Ht.onerror=xe});Ht.readAsDataURL(Ct),await he}else At.bitmap=await createImageBitmap(Ct);At.refCounter=1}catch(Ct){console.error(Ct),At=null}return e(this,j).set(i,At),At&&e(this,j).set(At.id,At),At};let ut=ot;class rt{constructor(i=128){Et(this,nt,[]);Et(this,d,!1);Et(this,m,void 0);Et(this,pt,-1);jt(this,m,i)}add({cmd:i,undo:Z,mustExec:At,type:Ct=NaN,overwriteIfSameType:Ft=!1,keepUndo:Ht=!1}){if(At&&i(),e(this,d))return;const Qt={cmd:i,undo:Z,type:Ct};if(e(this,pt)===-1){e(this,nt).length>0&&(e(this,nt).length=0),jt(this,pt,0),e(this,nt).push(Qt);return}if(Ft&&e(this,nt)[e(this,pt)].type===Ct){Ht&&(Qt.undo=e(this,nt)[e(this,pt)].undo),e(this,nt)[e(this,pt)]=Qt;return}const he=e(this,pt)+1;he===e(this,m)?e(this,nt).splice(0,1):(jt(this,pt,he),he<e(this,nt).length&&e(this,nt).splice(he)),e(this,nt).push(Qt)}undo(){e(this,pt)!==-1&&(jt(this,d,!0),e(this,nt)[e(this,pt)].undo(),jt(this,d,!1),jt(this,pt,e(this,pt)-1))}redo(){e(this,pt)<e(this,nt).length-1&&(jt(this,pt,e(this,pt)+1),jt(this,d,!0),e(this,nt)[e(this,pt)].cmd(),jt(this,d,!1))}hasSomethingToUndo(){return e(this,pt)!==-1}hasSomethingToRedo(){return e(this,pt)<e(this,nt).length-1}destroy(){jt(this,nt,null)}}nt=new WeakMap,d=new WeakMap,m=new WeakMap,pt=new WeakMap,s.CommandManager=rt;class X{constructor(i){Et(this,Y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Z}=o.FeatureTest.platform;for(const[At,Ct,Ft={}]of i)for(const Ht of At){const Qt=Ht.startsWith("mac+");Z&&Qt?(this.callbacks.set(Ht.slice(4),{callback:Ct,options:Ft}),this.allKeys.add(Ht.split("+").at(-1))):!Z&&!Qt&&(this.callbacks.set(Ht,{callback:Ct,options:Ft}),this.allKeys.add(Ht.split("+").at(-1)))}}exec(i,Z){if(!this.allKeys.has(Z.key))return;const At=this.callbacks.get(xt(this,Y,as).call(this,Z));if(!At)return;const{callback:Ct,options:{bubbles:Ft=!1,args:Ht=[],checker:Qt=null}}=At;Qt&&!Qt(i,Z)||(Ct.bind(i,...Ht)(),Ft||(Z.stopPropagation(),Z.preventDefault()))}}Y=new WeakSet,as=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const Z=this.buffer.join("+");return this.buffer.length=0,Z},s.KeyboardManager=X;const dt=class dt{get _colors(){const i=new Map([["CanvasText",null],["Canvas",null]]);return(0,k.getColorValues)(i),(0,o.shadow)(this,"_colors",i)}convert(i){const Z=(0,k.getRGB)(i);if(!window.matchMedia("(forced-colors: active)").matches)return Z;for(const[At,Ct]of this._colors)if(Ct.every((Ft,Ht)=>Ft===Z[Ht]))return dt._colorsMapping.get(At);return Z}getHexCode(i){const Z=this._colors.get(i);return Z?o.Util.makeHexColor(...Z):i}};Ie(dt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let mt=dt;s.ColorManager=mt;const ge=class ge{constructor(i,Z,At,Ct,Ft,Ht){Et(this,qt);Et(this,oe);Et(this,Pe);Et(this,we);Et(this,Ee);Et(this,Xt);Et(this,kt);Et(this,ee);Et(this,Le);Et(this,ie);Et(this,le);Et(this,_e);Et(this,te);Et(this,$,null);Et(this,Tt,new Map);Et(this,wt,new Map);Et(this,at,null);Et(this,Rt,null);Et(this,Ut,new rt);Et(this,$t,0);Et(this,Pt,new Set);Et(this,Vt,null);Et(this,Kt,null);Et(this,ne,new Set);Et(this,re,null);Et(this,ct,new Wt);Et(this,a,!1);Et(this,h,!1);Et(this,c,null);Et(this,g,o.AnnotationEditorType.NONE);Et(this,_,new Set);Et(this,it,null);Et(this,gt,this.blur.bind(this));Et(this,vt,this.focus.bind(this));Et(this,Bt,this.copy.bind(this));Et(this,Lt,this.cut.bind(this));Et(this,Ot,this.paste.bind(this));Et(this,Gt,this.keydown.bind(this));Et(this,Jt,this.onEditingAction.bind(this));Et(this,zt,this.onPageChanging.bind(this));Et(this,ue,this.onScaleChanging.bind(this));Et(this,ye,this.onRotationChanging.bind(this));Et(this,se,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Et(this,pe,[0,0]);Et(this,Yt,null);Et(this,It,null);Et(this,Nt,null);jt(this,It,i),jt(this,Nt,Z),jt(this,at,At),this._eventBus=Ct,this._eventBus._on("editingaction",e(this,Jt)),this._eventBus._on("pagechanging",e(this,zt)),this._eventBus._on("scalechanging",e(this,ue)),this._eventBus._on("rotationchanging",e(this,ye)),jt(this,Rt,Ft.annotationStorage),jt(this,re,Ft.filterFactory),jt(this,it,Ht),this.viewParameters={realScale:k.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const i=ge.prototype,Z=Ft=>{const{activeElement:Ht}=document;return Ht&&e(Ft,It).contains(Ht)&&Ft.hasSomethingToControl()},At=this.TRANSLATE_SMALL,Ct=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new X([[["ctrl+a","mac+meta+a"],i.selectAll],[["ctrl+z","mac+meta+z"],i.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],i.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],i.delete],[["Escape","mac+Escape"],i.unselectAll],[["ArrowLeft","mac+ArrowLeft"],i.translateSelectedEditors,{args:[-At,0],checker:Z}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i.translateSelectedEditors,{args:[-Ct,0],checker:Z}],[["ArrowRight","mac+ArrowRight"],i.translateSelectedEditors,{args:[At,0],checker:Z}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i.translateSelectedEditors,{args:[Ct,0],checker:Z}],[["ArrowUp","mac+ArrowUp"],i.translateSelectedEditors,{args:[0,-At],checker:Z}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i.translateSelectedEditors,{args:[0,-Ct],checker:Z}],[["ArrowDown","mac+ArrowDown"],i.translateSelectedEditors,{args:[0,At],checker:Z}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i.translateSelectedEditors,{args:[0,Ct],checker:Z}]]))}destroy(){xt(this,we,on).call(this),xt(this,oe,Cn).call(this),this._eventBus._off("editingaction",e(this,Jt)),this._eventBus._off("pagechanging",e(this,zt)),this._eventBus._off("scalechanging",e(this,ue)),this._eventBus._off("rotationchanging",e(this,ye));for(const i of e(this,wt).values())i.destroy();e(this,wt).clear(),e(this,Tt).clear(),e(this,ne).clear(),jt(this,$,null),e(this,_).clear(),e(this,Ut).destroy(),e(this,at).destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",e(this,it)?e(this,re).addHCMFilter(e(this,it).foreground,e(this,it).background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(e(this,It)).direction)}editAltText(i){var Z;(Z=e(this,at))==null||Z.editAltText(this,i)}onPageChanging({pageNumber:i}){jt(this,$t,i-1)}focusMainContainer(){e(this,It).focus()}findParent(i,Z){for(const At of e(this,wt).values()){const{x:Ct,y:Ft,width:Ht,height:Qt}=At.div.getBoundingClientRect();if(i>=Ct&&i<=Ct+Ht&&Z>=Ft&&Z<=Ft+Qt)return At}return null}disableUserSelect(i=!1){e(this,Nt).classList.toggle("noUserSelect",i)}addShouldRescale(i){e(this,ne).add(i)}removeShouldRescale(i){e(this,ne).delete(i)}onScaleChanging({scale:i}){this.commitOrRemove(),this.viewParameters.realScale=i*k.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Z of e(this,ne))Z.onScaleChanging()}onRotationChanging({pagesRotation:i}){this.commitOrRemove(),this.viewParameters.rotation=i}addToAnnotationStorage(i){!i.isEmpty()&&e(this,Rt)&&!e(this,Rt).has(i.id)&&e(this,Rt).setValue(i.id,i)}blur(){if(!this.hasSelection)return;const{activeElement:i}=document;for(const Z of e(this,_))if(Z.div.contains(i)){jt(this,c,[Z,i]),Z._focusEventsAllowed=!1;break}}focus(){if(!e(this,c))return;const[i,Z]=e(this,c);jt(this,c,null),Z.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0}),Z.focus()}addEditListeners(){xt(this,Pe,xn).call(this),xt(this,Ee,Rn).call(this)}removeEditListeners(){xt(this,we,on).call(this),xt(this,Xt,kn).call(this)}copy(i){var At;if(i.preventDefault(),(At=e(this,$))==null||At.commitOrRemove(),!this.hasSelection)return;const Z=[];for(const Ct of e(this,_)){const Ft=Ct.serialize(!0);Ft&&Z.push(Ft)}Z.length!==0&&i.clipboardData.setData("application/pdfjs",JSON.stringify(Z))}cut(i){this.copy(i),this.delete()}paste(i){i.preventDefault();const{clipboardData:Z}=i;for(const Ft of Z.items)for(const Ht of e(this,Kt))if(Ht.isHandlingMimeForPasting(Ft.type)){Ht.paste(Ft,this.currentLayer);return}let At=Z.getData("application/pdfjs");if(!At)return;try{At=JSON.parse(At)}catch(Ft){(0,o.warn)(`paste: "${Ft.message}".`);return}if(!Array.isArray(At))return;this.unselectAll();const Ct=this.currentLayer;try{const Ft=[];for(const he of At){const ce=Ct.deserialize(he);if(!ce)return;Ft.push(ce)}const Ht=()=>{for(const he of Ft)xt(this,le,Fn).call(this,he);xt(this,te,Mn).call(this,Ft)},Qt=()=>{for(const he of Ft)he.remove()};this.addCommands({cmd:Ht,undo:Qt,mustExec:!0})}catch(Ft){(0,o.warn)(`paste: "${Ft.message}".`)}}keydown(i){var Z;(Z=this.getActive())!=null&&Z.shouldGetKeyboardEvents()||ge._keyboardManager.exec(this,i)}onEditingAction(i){["undo","redo","delete","selectAll"].includes(i.name)&&this[i.name]()}setEditingState(i){i?(xt(this,qt,os).call(this),xt(this,Pe,xn).call(this),xt(this,Ee,Rn).call(this),xt(this,kt,je).call(this,{isEditing:e(this,g)!==o.AnnotationEditorType.NONE,isEmpty:xt(this,_e,Qe).call(this),hasSomethingToUndo:e(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:e(this,Ut).hasSomethingToRedo(),hasSelectedEditor:!1})):(xt(this,oe,Cn).call(this),xt(this,we,on).call(this),xt(this,Xt,kn).call(this),xt(this,kt,je).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(i){if(!e(this,Kt)){jt(this,Kt,i);for(const Z of e(this,Kt))xt(this,ee,Je).call(this,Z.defaultPropertiesToUpdate)}}getId(){return e(this,ct).getId()}get currentLayer(){return e(this,wt).get(e(this,$t))}getLayer(i){return e(this,wt).get(i)}get currentPageIndex(){return e(this,$t)}addLayer(i){e(this,wt).set(i.pageIndex,i),e(this,a)?i.enable():i.disable()}removeLayer(i){e(this,wt).delete(i.pageIndex)}updateMode(i,Z=null){if(e(this,g)!==i){if(jt(this,g,i),i===o.AnnotationEditorType.NONE){this.setEditingState(!1),xt(this,ie,cs).call(this);return}this.setEditingState(!0),xt(this,Le,ls).call(this),this.unselectAll();for(const At of e(this,wt).values())At.updateMode(i);if(Z){for(const At of e(this,Tt).values())if(At.annotationElementId===Z){this.setSelected(At),At.enterInEditMode();break}}}}updateToolbar(i){i!==e(this,g)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:i})}updateParams(i,Z){if(e(this,Kt)){if(i===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(i);return}for(const At of e(this,_))At.updateParams(i,Z);for(const At of e(this,Kt))At.updateDefaultParams(i,Z)}}enableWaiting(i=!1){if(e(this,h)!==i){jt(this,h,i);for(const Z of e(this,wt).values())i?Z.disableClick():Z.enableClick(),Z.div.classList.toggle("waiting",i)}}getEditors(i){const Z=[];for(const At of e(this,Tt).values())At.pageIndex===i&&Z.push(At);return Z}getEditor(i){return e(this,Tt).get(i)}addEditor(i){e(this,Tt).set(i.id,i)}removeEditor(i){var Z;e(this,Tt).delete(i.id),this.unselect(i),(!i.annotationElementId||!e(this,Pt).has(i.annotationElementId))&&((Z=e(this,Rt))==null||Z.remove(i.id))}addDeletedAnnotationElement(i){e(this,Pt).add(i.annotationElementId),i.deleted=!0}isDeletedAnnotationElement(i){return e(this,Pt).has(i)}removeDeletedAnnotationElement(i){e(this,Pt).delete(i.annotationElementId),i.deleted=!1}setActiveEditor(i){e(this,$)!==i&&(jt(this,$,i),i&&xt(this,ee,Je).call(this,i.propertiesToUpdate))}toggleSelected(i){if(e(this,_).has(i)){e(this,_).delete(i),i.unselect(),xt(this,kt,je).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,_).add(i),i.select(),xt(this,ee,Je).call(this,i.propertiesToUpdate),xt(this,kt,je).call(this,{hasSelectedEditor:!0})}setSelected(i){for(const Z of e(this,_))Z!==i&&Z.unselect();e(this,_).clear(),e(this,_).add(i),i.select(),xt(this,ee,Je).call(this,i.propertiesToUpdate),xt(this,kt,je).call(this,{hasSelectedEditor:!0})}isSelected(i){return e(this,_).has(i)}unselect(i){i.unselect(),e(this,_).delete(i),xt(this,kt,je).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,_).size!==0}undo(){e(this,Ut).undo(),xt(this,kt,je).call(this,{hasSomethingToUndo:e(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:xt(this,_e,Qe).call(this)})}redo(){e(this,Ut).redo(),xt(this,kt,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,Ut).hasSomethingToRedo(),isEmpty:xt(this,_e,Qe).call(this)})}addCommands(i){e(this,Ut).add(i),xt(this,kt,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:xt(this,_e,Qe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const i=[...e(this,_)],Z=()=>{for(const Ct of i)Ct.remove()},At=()=>{for(const Ct of i)xt(this,le,Fn).call(this,Ct)};this.addCommands({cmd:Z,undo:At,mustExec:!0})}commitOrRemove(){var i;(i=e(this,$))==null||i.commitOrRemove()}hasSomethingToControl(){return e(this,$)||this.hasSelection}selectAll(){for(const i of e(this,_))i.commit();xt(this,te,Mn).call(this,e(this,Tt).values())}unselectAll(){if(e(this,$)){e(this,$).commitOrRemove();return}if(this.hasSelection){for(const i of e(this,_))i.unselect();e(this,_).clear(),xt(this,kt,je).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(i,Z,At=!1){if(At||this.commitOrRemove(),!this.hasSelection)return;e(this,pe)[0]+=i,e(this,pe)[1]+=Z;const[Ct,Ft]=e(this,pe),Ht=[...e(this,_)],Qt=1e3;e(this,Yt)&&clearTimeout(e(this,Yt)),jt(this,Yt,setTimeout(()=>{jt(this,Yt,null),e(this,pe)[0]=e(this,pe)[1]=0,this.addCommands({cmd:()=>{for(const he of Ht)e(this,Tt).has(he.id)&&he.translateInPage(Ct,Ft)},undo:()=>{for(const he of Ht)e(this,Tt).has(he.id)&&he.translateInPage(-Ct,-Ft)},mustExec:!1})},Qt));for(const he of Ht)he.translateInPage(i,Z)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),jt(this,Vt,new Map);for(const i of e(this,_))e(this,Vt).set(i,{savedX:i.x,savedY:i.y,savedPageIndex:i.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,Vt))return!1;this.disableUserSelect(!1);const i=e(this,Vt);jt(this,Vt,null);let Z=!1;for(const[{x:Ct,y:Ft,pageIndex:Ht},Qt]of i)Qt.newX=Ct,Qt.newY=Ft,Qt.newPageIndex=Ht,Z||(Z=Ct!==Qt.savedX||Ft!==Qt.savedY||Ht!==Qt.savedPageIndex);if(!Z)return!1;const At=(Ct,Ft,Ht,Qt)=>{if(e(this,Tt).has(Ct.id)){const he=e(this,wt).get(Qt);he?Ct._setParentAndPosition(he,Ft,Ht):(Ct.pageIndex=Qt,Ct.x=Ft,Ct.y=Ht)}};return this.addCommands({cmd:()=>{for(const[Ct,{newX:Ft,newY:Ht,newPageIndex:Qt}]of i)At(Ct,Ft,Ht,Qt)},undo:()=>{for(const[Ct,{savedX:Ft,savedY:Ht,savedPageIndex:Qt}]of i)At(Ct,Ft,Ht,Qt)},mustExec:!0}),!0}dragSelectedEditors(i,Z){if(e(this,Vt))for(const At of e(this,Vt).keys())At.drag(i,Z)}rebuild(i){if(i.parent===null){const Z=this.getLayer(i.pageIndex);Z?(Z.changeParent(i),Z.addOrRebuild(i)):(this.addEditor(i),this.addToAnnotationStorage(i),i.rebuild())}else i.parent.addOrRebuild(i)}isActive(i){return e(this,$)===i}getActive(){return e(this,$)}getMode(){return e(this,g)}get imageManager(){return(0,o.shadow)(this,"imageManager",new ut)}};$=new WeakMap,Tt=new WeakMap,wt=new WeakMap,at=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,$t=new WeakMap,Pt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,ne=new WeakMap,re=new WeakMap,ct=new WeakMap,a=new WeakMap,h=new WeakMap,c=new WeakMap,g=new WeakMap,_=new WeakMap,it=new WeakMap,gt=new WeakMap,vt=new WeakMap,Bt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,zt=new WeakMap,ue=new WeakMap,ye=new WeakMap,se=new WeakMap,pe=new WeakMap,Yt=new WeakMap,It=new WeakMap,Nt=new WeakMap,qt=new WeakSet,os=function(){window.addEventListener("focus",e(this,vt)),window.addEventListener("blur",e(this,gt))},oe=new WeakSet,Cn=function(){window.removeEventListener("focus",e(this,vt)),window.removeEventListener("blur",e(this,gt))},Pe=new WeakSet,xn=function(){window.addEventListener("keydown",e(this,Gt),{capture:!0})},we=new WeakSet,on=function(){window.removeEventListener("keydown",e(this,Gt),{capture:!0})},Ee=new WeakSet,Rn=function(){document.addEventListener("copy",e(this,Bt)),document.addEventListener("cut",e(this,Lt)),document.addEventListener("paste",e(this,Ot))},Xt=new WeakSet,kn=function(){document.removeEventListener("copy",e(this,Bt)),document.removeEventListener("cut",e(this,Lt)),document.removeEventListener("paste",e(this,Ot))},kt=new WeakSet,je=function(i){Object.entries(i).some(([At,Ct])=>e(this,se)[At]!==Ct)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,se),i)})},ee=new WeakSet,Je=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},Le=new WeakSet,ls=function(){if(!e(this,a)){jt(this,a,!0);for(const i of e(this,wt).values())i.enable()}},ie=new WeakSet,cs=function(){if(this.unselectAll(),e(this,a)){jt(this,a,!1);for(const i of e(this,wt).values())i.disable()}},le=new WeakSet,Fn=function(i){const Z=e(this,wt).get(i.pageIndex);Z?Z.addOrRebuild(i):this.addEditor(i)},_e=new WeakSet,Qe=function(){if(e(this,Tt).size===0)return!0;if(e(this,Tt).size===1)for(const i of e(this,Tt).values())return i.isEmpty();return!1},te=new WeakSet,Mn=function(i){e(this,_).clear();for(const Z of i)Z.isEmpty()||(e(this,_).add(Z),Z.select());xt(this,kt,je).call(this,{hasSelectedEditor:!0})},Ie(ge,"TRANSLATE_SMALL",1),Ie(ge,"TRANSLATE_BIG",10);let _t=ge;s.AnnotationEditorUIManager=_t},(b,s,ft)=>{var $t,Pt,Vt,Kt,ne,re,ct,a,h,c,g,_,ze,gt,Xe,Bt,Dn,Ot,ln,Jt,cn,ue,Ze,se,tn;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=pt,s.getColorValues=Tt,s.getCurrentTransform=wt,s.getCurrentTransformInverse=at,s.getFilenameFromUrl=tt,s.getPdfFilenameFromUrl=lt,s.getRGB=$,s.getXfaPageViewport=dt,s.isDataScheme=et,s.isPdfFile=j,s.isValidFetchUrl=nt,s.loadScript=m,s.noContextMenu=d,s.setLayerDimensions=Rt;var o=ft(7),k=ft(1);const St="http://www.w3.org/2000/svg",Ut=class Ut{};Ie(Ut,"CSS",96),Ie(Ut,"PDF",72),Ie(Ut,"PDF_TO_CSS_UNITS",Ut.CSS/Ut.PDF);let bt=Ut;s.PixelsPerInch=bt;class Wt extends o.BaseFilterFactory{constructor({docId:Nt,ownerDocument:qt=globalThis.document}={}){super();Et(this,_);Et(this,gt);Et(this,Bt);Et(this,Ot);Et(this,Jt);Et(this,ue);Et(this,se);Et(this,$t,void 0);Et(this,Pt,void 0);Et(this,Vt,void 0);Et(this,Kt,void 0);Et(this,ne,void 0);Et(this,re,void 0);Et(this,ct,void 0);Et(this,a,void 0);Et(this,h,void 0);Et(this,c,void 0);Et(this,g,0);jt(this,Vt,Nt),jt(this,Kt,qt)}addFilter(Nt){if(!Nt)return"none";let qt=e(this,_,ze).get(Nt);if(qt)return qt;let ae,oe,Ae,Pe;if(Nt.length===1){const Ee=Nt[0],Ce=new Array(256);for(let Xt=0;Xt<256;Xt++)Ce[Xt]=Ee[Xt]/255;Pe=ae=oe=Ae=Ce.join(",")}else{const[Ee,Ce,Xt]=Nt,Dt=new Array(256),kt=new Array(256),Zt=new Array(256);for(let ee=0;ee<256;ee++)Dt[ee]=Ee[ee]/255,kt[ee]=Ce[ee]/255,Zt[ee]=Xt[ee]/255;ae=Dt.join(","),oe=kt.join(","),Ae=Zt.join(","),Pe=`${ae}${oe}${Ae}`}if(qt=e(this,_,ze).get(Pe),qt)return e(this,_,ze).set(Nt,qt),qt;const ve=`g_${e(this,Vt)}_transfer_map_${Ke(this,g)._++}`,we=`url(#${ve})`;e(this,_,ze).set(Nt,we),e(this,_,ze).set(Pe,we);const Te=xt(this,Ot,ln).call(this,ve);return xt(this,ue,Ze).call(this,ae,oe,Ae,Te),we}addHCMFilter(Nt,qt){var Ce;const ae=`${Nt}-${qt}`;if(e(this,re)===ae)return e(this,ct);if(jt(this,re,ae),jt(this,ct,"none"),(Ce=e(this,ne))==null||Ce.remove(),!Nt||!qt)return e(this,ct);const oe=xt(this,se,tn).call(this,Nt);Nt=k.Util.makeHexColor(...oe);const Ae=xt(this,se,tn).call(this,qt);if(qt=k.Util.makeHexColor(...Ae),e(this,gt,Xe).style.color="",Nt==="#000000"&&qt==="#ffffff"||Nt===qt)return e(this,ct);const Pe=new Array(256);for(let Xt=0;Xt<=255;Xt++){const Dt=Xt/255;Pe[Xt]=Dt<=.03928?Dt/12.92:((Dt+.055)/1.055)**2.4}const ve=Pe.join(","),we=`g_${e(this,Vt)}_hcm_filter`,Te=jt(this,a,xt(this,Ot,ln).call(this,we));xt(this,ue,Ze).call(this,ve,ve,ve,Te),xt(this,Bt,Dn).call(this,Te);const Ee=(Xt,Dt)=>{const kt=oe[Xt]/255,Zt=Ae[Xt]/255,ee=new Array(Dt+1);for(let Oe=0;Oe<=Dt;Oe++)ee[Oe]=kt+Oe/Dt*(Zt-kt);return ee.join(",")};return xt(this,ue,Ze).call(this,Ee(0,5),Ee(1,5),Ee(2,5),Te),jt(this,ct,`url(#${we})`),e(this,ct)}addHighlightHCMFilter(Nt,qt,ae,oe){var Zt;const Ae=`${Nt}-${qt}-${ae}-${oe}`;if(e(this,h)===Ae)return e(this,c);if(jt(this,h,Ae),jt(this,c,"none"),(Zt=e(this,a))==null||Zt.remove(),!Nt||!qt)return e(this,c);const[Pe,ve]=[Nt,qt].map(xt(this,se,tn).bind(this));let we=Math.round(.2126*Pe[0]+.7152*Pe[1]+.0722*Pe[2]),Te=Math.round(.2126*ve[0]+.7152*ve[1]+.0722*ve[2]),[Ee,Ce]=[ae,oe].map(xt(this,se,tn).bind(this));Te<we&&([we,Te,Ee,Ce]=[Te,we,Ce,Ee]),e(this,gt,Xe).style.color="";const Xt=(ee,Oe,Le)=>{const Mt=new Array(256),ie=(Te-we)/Le,me=ee/255,le=(Oe-ee)/(255*Le);let be=0;for(let _e=0;_e<=Le;_e++){const Me=Math.round(we+_e*ie),te=me+_e*le;for(let ke=be;ke<=Me;ke++)Mt[ke]=te;be=Me+1}for(let _e=be;_e<256;_e++)Mt[_e]=Mt[be-1];return Mt.join(",")},Dt=`g_${e(this,Vt)}_hcm_highlight_filter`,kt=jt(this,a,xt(this,Ot,ln).call(this,Dt));return xt(this,Bt,Dn).call(this,kt),xt(this,ue,Ze).call(this,Xt(Ee[0],Ce[0],5),Xt(Ee[1],Ce[1],5),Xt(Ee[2],Ce[2],5),kt),jt(this,c,`url(#${Dt})`),e(this,c)}destroy(Nt=!1){Nt&&(e(this,ct)||e(this,c))||(e(this,Pt)&&(e(this,Pt).parentNode.parentNode.remove(),jt(this,Pt,null)),e(this,$t)&&(e(this,$t).clear(),jt(this,$t,null)),jt(this,g,0))}}$t=new WeakMap,Pt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,ne=new WeakMap,re=new WeakMap,ct=new WeakMap,a=new WeakMap,h=new WeakMap,c=new WeakMap,g=new WeakMap,_=new WeakSet,ze=function(){return e(this,$t)||jt(this,$t,new Map)},gt=new WeakSet,Xe=function(){if(!e(this,Pt)){const Nt=e(this,Kt).createElement("div"),{style:qt}=Nt;qt.visibility="hidden",qt.contain="strict",qt.width=qt.height=0,qt.position="absolute",qt.top=qt.left=0,qt.zIndex=-1;const ae=e(this,Kt).createElementNS(St,"svg");ae.setAttribute("width",0),ae.setAttribute("height",0),jt(this,Pt,e(this,Kt).createElementNS(St,"defs")),Nt.append(ae),ae.append(e(this,Pt)),e(this,Kt).body.append(Nt)}return e(this,Pt)},Bt=new WeakSet,Dn=function(Nt){const qt=e(this,Kt).createElementNS(St,"feColorMatrix");qt.setAttribute("type","matrix"),qt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Nt.append(qt)},Ot=new WeakSet,ln=function(Nt){const qt=e(this,Kt).createElementNS(St,"filter");return qt.setAttribute("color-interpolation-filters","sRGB"),qt.setAttribute("id",Nt),e(this,gt,Xe).append(qt),qt},Jt=new WeakSet,cn=function(Nt,qt,ae){const oe=e(this,Kt).createElementNS(St,qt);oe.setAttribute("type","discrete"),oe.setAttribute("tableValues",ae),Nt.append(oe)},ue=new WeakSet,Ze=function(Nt,qt,ae,oe){const Ae=e(this,Kt).createElementNS(St,"feComponentTransfer");oe.append(Ae),xt(this,Jt,cn).call(this,Ae,"feFuncR",Nt),xt(this,Jt,cn).call(this,Ae,"feFuncG",qt),xt(this,Jt,cn).call(this,Ae,"feFuncB",ae)},se=new WeakSet,tn=function(Nt){return e(this,gt,Xe).style.color=Nt,$(getComputedStyle(e(this,gt,Xe)).getPropertyValue("color"))},s.DOMFilterFactory=Wt;class ut extends o.BaseCanvasFactory{constructor({ownerDocument:It=globalThis.document}={}){super(),this._document=It}_createCanvas(It,Nt){const qt=this._document.createElement("canvas");return qt.width=It,qt.height=Nt,qt}}s.DOMCanvasFactory=ut;async function rt(Yt,It=!1){if(nt(Yt,document.baseURI)){const Nt=await fetch(Yt);if(!Nt.ok)throw new Error(Nt.statusText);return It?new Uint8Array(await Nt.arrayBuffer()):(0,k.stringToBytes)(await Nt.text())}return new Promise((Nt,qt)=>{const ae=new XMLHttpRequest;ae.open("GET",Yt,!0),It&&(ae.responseType="arraybuffer"),ae.onreadystatechange=()=>{if(ae.readyState===XMLHttpRequest.DONE){if(ae.status===200||ae.status===0){let oe;if(It&&ae.response?oe=new Uint8Array(ae.response):!It&&ae.responseText&&(oe=(0,k.stringToBytes)(ae.responseText)),oe){Nt(oe);return}}qt(new Error(ae.statusText))}},ae.send(null)})}class X extends o.BaseCMapReaderFactory{_fetchData(It,Nt){return rt(It,this.isCompressed).then(qt=>({cMapData:qt,compressionType:Nt}))}}s.DOMCMapReaderFactory=X;class mt extends o.BaseStandardFontDataFactory{_fetchData(It){return rt(It,!0)}}s.DOMStandardFontDataFactory=mt;class _t extends o.BaseSVGFactory{_createSVG(It){return document.createElementNS(St,It)}}s.DOMSVGFactory=_t;class ht{constructor({viewBox:It,scale:Nt,rotation:qt,offsetX:ae=0,offsetY:oe=0,dontFlip:Ae=!1}){this.viewBox=It,this.scale=Nt,this.rotation=qt,this.offsetX=ae,this.offsetY=oe;const Pe=(It[2]+It[0])/2,ve=(It[3]+It[1])/2;let we,Te,Ee,Ce;switch(qt%=360,qt<0&&(qt+=360),qt){case 180:we=-1,Te=0,Ee=0,Ce=1;break;case 90:we=0,Te=1,Ee=1,Ce=0;break;case 270:we=0,Te=-1,Ee=-1,Ce=0;break;case 0:we=1,Te=0,Ee=0,Ce=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ae&&(Ee=-Ee,Ce=-Ce);let Xt,Dt,kt,Zt;we===0?(Xt=Math.abs(ve-It[1])*Nt+ae,Dt=Math.abs(Pe-It[0])*Nt+oe,kt=(It[3]-It[1])*Nt,Zt=(It[2]-It[0])*Nt):(Xt=Math.abs(Pe-It[0])*Nt+ae,Dt=Math.abs(ve-It[1])*Nt+oe,kt=(It[2]-It[0])*Nt,Zt=(It[3]-It[1])*Nt),this.transform=[we*Nt,Te*Nt,Ee*Nt,Ce*Nt,Xt-we*Nt*Pe-Ee*Nt*ve,Dt-Te*Nt*Pe-Ce*Nt*ve],this.width=kt,this.height=Zt}get rawDims(){const{viewBox:It}=this;return(0,k.shadow)(this,"rawDims",{pageWidth:It[2]-It[0],pageHeight:It[3]-It[1],pageX:It[0],pageY:It[1]})}clone({scale:It=this.scale,rotation:Nt=this.rotation,offsetX:qt=this.offsetX,offsetY:ae=this.offsetY,dontFlip:oe=!1}={}){return new ht({viewBox:this.viewBox.slice(),scale:It,rotation:Nt,offsetX:qt,offsetY:ae,dontFlip:oe})}convertToViewportPoint(It,Nt){return k.Util.applyTransform([It,Nt],this.transform)}convertToViewportRectangle(It){const Nt=k.Util.applyTransform([It[0],It[1]],this.transform),qt=k.Util.applyTransform([It[2],It[3]],this.transform);return[Nt[0],Nt[1],qt[0],qt[1]]}convertToPdfPoint(It,Nt){return k.Util.applyInverseTransform([It,Nt],this.transform)}}s.PageViewport=ht;class st extends k.BaseException{constructor(It,Nt=0){super(It,"RenderingCancelledException"),this.extraDelay=Nt}}s.RenderingCancelledException=st;function et(Yt){const It=Yt.length;let Nt=0;for(;Nt<It&&Yt[Nt].trim()==="";)Nt++;return Yt.substring(Nt,Nt+5).toLowerCase()==="data:"}function j(Yt){return typeof Yt=="string"&&/\.pdf$/i.test(Yt)}function tt(Yt,It=!1){return It||([Yt]=Yt.split(/[#?]/,1)),Yt.substring(Yt.lastIndexOf("/")+1)}function lt(Yt,It="document.pdf"){if(typeof Yt!="string")return It;if(et(Yt))return(0,k.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),It;const Nt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,qt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ae=Nt.exec(Yt);let oe=qt.exec(ae[1])||qt.exec(ae[2])||qt.exec(ae[3]);if(oe&&(oe=oe[0],oe.includes("%")))try{oe=qt.exec(decodeURIComponent(oe))[0]}catch{}return oe||It}class ot{constructor(){Ie(this,"started",Object.create(null));Ie(this,"times",[])}time(It){It in this.started&&(0,k.warn)(`Timer is already running for ${It}`),this.started[It]=Date.now()}timeEnd(It){It in this.started||(0,k.warn)(`Timer has not been started for ${It}`),this.times.push({name:It,start:this.started[It],end:Date.now()}),delete this.started[It]}toString(){const It=[];let Nt=0;for(const{name:qt}of this.times)Nt=Math.max(qt.length,Nt);for(const{name:qt,start:ae,end:oe}of this.times)It.push(`${qt.padEnd(Nt)} ${oe-ae}ms
`);return It.join("")}}s.StatTimer=ot;function nt(Yt,It){try{const{protocol:Nt}=It?new URL(Yt,It):new URL(Yt);return Nt==="http:"||Nt==="https:"}catch{return!1}}function d(Yt){Yt.preventDefault()}function m(Yt,It=!1){return new Promise((Nt,qt)=>{const ae=document.createElement("script");ae.src=Yt,ae.onload=function(oe){It&&ae.remove(),Nt(oe)},ae.onerror=function(){qt(new Error(`Cannot load script at: ${ae.src}`))},(document.head||document.documentElement).append(ae)})}function pt(Yt){console.log("Deprecated API usage: "+Yt)}let Y;class f{static toDateObject(It){if(!It||typeof It!="string")return null;Y||(Y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Nt=Y.exec(It);if(!Nt)return null;const qt=parseInt(Nt[1],10);let ae=parseInt(Nt[2],10);ae=ae>=1&&ae<=12?ae-1:0;let oe=parseInt(Nt[3],10);oe=oe>=1&&oe<=31?oe:1;let Ae=parseInt(Nt[4],10);Ae=Ae>=0&&Ae<=23?Ae:0;let Pe=parseInt(Nt[5],10);Pe=Pe>=0&&Pe<=59?Pe:0;let ve=parseInt(Nt[6],10);ve=ve>=0&&ve<=59?ve:0;const we=Nt[7]||"Z";let Te=parseInt(Nt[8],10);Te=Te>=0&&Te<=23?Te:0;let Ee=parseInt(Nt[9],10)||0;return Ee=Ee>=0&&Ee<=59?Ee:0,we==="-"?(Ae+=Te,Pe+=Ee):we==="+"&&(Ae-=Te,Pe-=Ee),new Date(Date.UTC(qt,ae,oe,Ae,Pe,ve))}}s.PDFDateString=f;function dt(Yt,{scale:It=1,rotation:Nt=0}){const{width:qt,height:ae}=Yt.attributes.style,oe=[0,0,parseInt(qt),parseInt(ae)];return new ht({viewBox:oe,scale:It,rotation:Nt})}function $(Yt){if(Yt.startsWith("#")){const It=parseInt(Yt.slice(1),16);return[(It&16711680)>>16,(It&65280)>>8,It&255]}return Yt.startsWith("rgb(")?Yt.slice(4,-1).split(",").map(It=>parseInt(It)):Yt.startsWith("rgba(")?Yt.slice(5,-1).split(",").map(It=>parseInt(It)).slice(0,3):((0,k.warn)(`Not a valid color format: "${Yt}"`),[0,0,0])}function Tt(Yt){const It=document.createElement("span");It.style.visibility="hidden",document.body.append(It);for(const Nt of Yt.keys()){It.style.color=Nt;const qt=window.getComputedStyle(It).color;Yt.set(Nt,$(qt))}It.remove()}function wt(Yt){const{a:It,b:Nt,c:qt,d:ae,e:oe,f:Ae}=Yt.getTransform();return[It,Nt,qt,ae,oe,Ae]}function at(Yt){const{a:It,b:Nt,c:qt,d:ae,e:oe,f:Ae}=Yt.getTransform().invertSelf();return[It,Nt,qt,ae,oe,Ae]}function Rt(Yt,It,Nt=!1,qt=!0){if(It instanceof ht){const{pageWidth:ae,pageHeight:oe}=It.rawDims,{style:Ae}=Yt,Pe=k.FeatureTest.isCSSRoundSupported,ve=`var(--scale-factor) * ${ae}px`,we=`var(--scale-factor) * ${oe}px`,Te=Pe?`round(${ve}, 1px)`:`calc(${ve})`,Ee=Pe?`round(${we}, 1px)`:`calc(${we})`;!Nt||It.rotation%180===0?(Ae.width=Te,Ae.height=Ee):(Ae.width=Ee,Ae.height=Te)}qt&&Yt.setAttribute("data-main-rotation",It.rotation)}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var o=ft(1);class k{constructor(){this.constructor===k&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(X){return"none"}addHCMFilter(X,mt){return"none"}addHighlightHCMFilter(X,mt,_t,ht){return"none"}destroy(X=!1){}}s.BaseFilterFactory=k;class St{constructor(){this.constructor===St&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(X,mt){if(X<=0||mt<=0)throw new Error("Invalid canvas size");const _t=this._createCanvas(X,mt);return{canvas:_t,context:_t.getContext("2d")}}reset(X,mt,_t){if(!X.canvas)throw new Error("Canvas is not specified");if(mt<=0||_t<=0)throw new Error("Invalid canvas size");X.canvas.width=mt,X.canvas.height=_t}destroy(X){if(!X.canvas)throw new Error("Canvas is not specified");X.canvas.width=0,X.canvas.height=0,X.canvas=null,X.context=null}_createCanvas(X,mt){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=St;class bt{constructor({baseUrl:X=null,isCompressed:mt=!0}){this.constructor===bt&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=X,this.isCompressed=mt}async fetch({name:X}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!X)throw new Error("CMap name must be specified.");const mt=this.baseUrl+X+(this.isCompressed?".bcmap":""),_t=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(mt,_t).catch(ht=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${mt}`)})}_fetchData(X,mt){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=bt;class Wt{constructor({baseUrl:X=null}){this.constructor===Wt&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=X}async fetch({filename:X}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!X)throw new Error("Font filename must be specified.");const mt=`${this.baseUrl}${X}`;return this._fetchData(mt).catch(_t=>{throw new Error(`Unable to load font data at: ${mt}`)})}_fetchData(X){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=Wt;class ut{constructor(){this.constructor===ut&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(X,mt,_t=!1){if(X<=0||mt<=0)throw new Error("Invalid SVG dimensions");const ht=this._createSVG("svg:svg");return ht.setAttribute("version","1.1"),_t||(ht.setAttribute("width",`${X}px`),ht.setAttribute("height",`${mt}px`)),ht.setAttribute("preserveAspectRatio","none"),ht.setAttribute("viewBox",`0 0 ${X} ${mt}`),ht}createElement(X){if(typeof X!="string")throw new Error("Invalid SVG element type");return this._createSVG(X)}_createSVG(X){(0,o.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=ut},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var o=ft(1);const k=3285377520,St=4294901760,bt=65535;class Wt{constructor(rt){this.h1=rt?rt&4294967295:k,this.h2=rt?rt&4294967295:k}update(rt){let X,mt;if(typeof rt=="string"){X=new Uint8Array(rt.length*2),mt=0;for(let pt=0,Y=rt.length;pt<Y;pt++){const f=rt.charCodeAt(pt);f<=255?X[mt++]=f:(X[mt++]=f>>>8,X[mt++]=f&255)}}else if((0,o.isArrayBuffer)(rt))X=rt.slice(),mt=X.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const _t=mt>>2,ht=mt-_t*4,st=new Uint32Array(X.buffer,0,_t);let et=0,j=0,tt=this.h1,lt=this.h2;const ot=3432918353,nt=461845907,d=ot&bt,m=nt&bt;for(let pt=0;pt<_t;pt++)pt&1?(et=st[pt],et=et*ot&St|et*d&bt,et=et<<15|et>>>17,et=et*nt&St|et*m&bt,tt^=et,tt=tt<<13|tt>>>19,tt=tt*5+3864292196):(j=st[pt],j=j*ot&St|j*d&bt,j=j<<15|j>>>17,j=j*nt&St|j*m&bt,lt^=j,lt=lt<<13|lt>>>19,lt=lt*5+3864292196);switch(et=0,ht){case 3:et^=X[_t*4+2]<<16;case 2:et^=X[_t*4+1]<<8;case 1:et^=X[_t*4],et=et*ot&St|et*d&bt,et=et<<15|et>>>17,et=et*nt&St|et*m&bt,_t&1?tt^=et:lt^=et}this.h1=tt,this.h2=lt}hexdigest(){let rt=this.h1,X=this.h2;return rt^=X>>>1,rt=rt*3981806797&St|rt*36045&bt,X=X*4283543511&St|((X<<16|rt>>>16)*2950163797&St)>>>16,rt^=X>>>1,rt=rt*444984403&St|rt*60499&bt,X=X*3301882366&St|((X<<16|rt>>>16)*3120437893&St)>>>16,rt^=X>>>1,(rt>>>0).toString(16).padStart(8,"0")+(X>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=Wt},(b,s,ft)=>{var bt;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var o=ft(1);class k{constructor({ownerDocument:ut=globalThis.document,styleElement:rt=null}){Et(this,bt,new Set);this._document=ut,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ut){this.nativeFontFaces.add(ut),this._document.fonts.add(ut)}removeNativeFontFace(ut){this.nativeFontFaces.delete(ut),this._document.fonts.delete(ut)}insertRule(ut){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const rt=this.styleElement.sheet;rt.insertRule(ut,rt.cssRules.length)}clear(){for(const ut of this.nativeFontFaces)this._document.fonts.delete(ut);this.nativeFontFaces.clear(),e(this,bt).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ut){if(!(!ut||e(this,bt).has(ut.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:rt,src:X,style:mt}=ut,_t=new FontFace(rt,X,mt);this.addNativeFontFace(_t);try{await _t.load(),e(this,bt).add(rt)}catch{(0,o.warn)(`Cannot load system font: ${ut.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(_t)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ut){if(ut.attached||ut.missingFile&&!ut.systemFontInfo)return;if(ut.attached=!0,ut.systemFontInfo){await this.loadSystemFont(ut.systemFontInfo);return}if(this.isFontLoadingAPISupported){const X=ut.createNativeFontFace();if(X){this.addNativeFontFace(X);try{await X.loaded}catch(mt){throw(0,o.warn)(`Failed to load font '${X.family}': '${mt}'.`),ut.disableFontFace=!0,mt}}return}const rt=ut.createFontFaceRule();if(rt){if(this.insertRule(rt),this.isSyncFontLoadingSupported)return;await new Promise(X=>{const mt=this._queueLoadingCallback(X);this._prepareFontLoadEvent(ut,mt)})}}get isFontLoadingAPISupported(){var rt;const ut=!!((rt=this._document)!=null&&rt.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",ut)}get isSyncFontLoadingSupported(){let ut=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ut=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",ut)}_queueLoadingCallback(ut){function rt(){for((0,o.assert)(!mt.done,"completeRequest() cannot be called twice."),mt.done=!0;X.length>0&&X[0].done;){const _t=X.shift();setTimeout(_t.callback,0)}}const{loadingRequests:X}=this,mt={done:!1,complete:rt,callback:ut};return X.push(mt),mt}get _loadTestFont(){const ut=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",ut)}_prepareFontLoadEvent(ut,rt){function X($,Tt){return $.charCodeAt(Tt)<<24|$.charCodeAt(Tt+1)<<16|$.charCodeAt(Tt+2)<<8|$.charCodeAt(Tt+3)&255}function mt($,Tt,wt,at){const Rt=$.substring(0,Tt),Ut=$.substring(Tt+wt);return Rt+at+Ut}let _t,ht;const st=this._document.createElement("canvas");st.width=1,st.height=1;const et=st.getContext("2d");let j=0;function tt($,Tt){if(++j>30){(0,o.warn)("Load test font never loaded."),Tt();return}if(et.font="30px "+$,et.fillText(".",0,20),et.getImageData(0,0,1,1).data[3]>0){Tt();return}setTimeout(tt.bind(null,$,Tt))}const lt=`lt${Date.now()}${this.loadTestFontId++}`;let ot=this._loadTestFont;ot=mt(ot,976,lt.length,lt);const d=16,m=1482184792;let pt=X(ot,d);for(_t=0,ht=lt.length-3;_t<ht;_t+=4)pt=pt-m+X(lt,_t)|0;_t<lt.length&&(pt=pt-m+X(lt+"XXX",_t)|0),ot=mt(ot,d,4,(0,o.string32)(pt));const Y=`url(data:font/opentype;base64,${btoa(ot)});`,f=`@font-face {font-family:"${lt}";src:${Y}}`;this.insertRule(f);const dt=this._document.createElement("div");dt.style.visibility="hidden",dt.style.width=dt.style.height="10px",dt.style.position="absolute",dt.style.top=dt.style.left="0px";for(const $ of[ut.loadedName,lt]){const Tt=this._document.createElement("span");Tt.textContent="Hi",Tt.style.fontFamily=$,dt.append(Tt)}this._document.body.append(dt),tt(lt,()=>{dt.remove(),rt.complete()})}}bt=new WeakMap,s.FontLoader=k;class St{constructor(ut,{isEvalSupported:rt=!0,disableFontFace:X=!1,ignoreErrors:mt=!1,inspectFont:_t=null}){this.compiledGlyphs=Object.create(null);for(const ht in ut)this[ht]=ut[ht];this.isEvalSupported=rt!==!1,this.disableFontFace=X===!0,this.ignoreErrors=mt===!0,this._inspectFont=_t}createNativeFontFace(){var rt;if(!this.data||this.disableFontFace)return null;let ut;if(!this.cssFontInfo)ut=new FontFace(this.loadedName,this.data,{});else{const X={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(X.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ut=new FontFace(this.cssFontInfo.fontFamily,this.data,X)}return(rt=this._inspectFont)==null||rt.call(this,this),ut}createFontFaceRule(){var mt;if(!this.data||this.disableFontFace)return null;const ut=(0,o.bytesToString)(this.data),rt=`url(data:${this.mimetype};base64,${btoa(ut)});`;let X;if(!this.cssFontInfo)X=`@font-face {font-family:"${this.loadedName}";src:${rt}}`;else{let _t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(_t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),X=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${_t}src:${rt}}`}return(mt=this._inspectFont)==null||mt.call(this,this,rt),X}getPathGenerator(ut,rt){if(this.compiledGlyphs[rt]!==void 0)return this.compiledGlyphs[rt];let X;try{X=ut.get(this.loadedName+"_path_"+rt)}catch(mt){if(!this.ignoreErrors)throw mt;return(0,o.warn)(`getPathGenerator - ignoring character: "${mt}".`),this.compiledGlyphs[rt]=function(_t,ht){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const mt=[];for(const _t of X){const ht=_t.args!==void 0?_t.args.join(","):"";mt.push("c.",_t.cmd,"(",ht,`);
`)}return this.compiledGlyphs[rt]=new Function("c","size",mt.join(""))}return this.compiledGlyphs[rt]=function(mt,_t){for(const ht of X)ht.cmd==="scale"&&(ht.args=[_t,-_t]),mt[ht.cmd].apply(mt,ht.args)}}}s.FontFaceObject=St},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var o=ft(7);ft(1);const k=function(rt){return new Promise((X,mt)=>{require$$5.readFile(rt,(ht,st)=>{if(ht||!st){mt(new Error(ht));return}X(new Uint8Array(st))})})};class St extends o.BaseFilterFactory{}s.NodeFilterFactory=St;class bt extends o.BaseCanvasFactory{_createCanvas(X,mt){return require$$5.createCanvas(X,mt)}}s.NodeCanvasFactory=bt;class Wt extends o.BaseCMapReaderFactory{_fetchData(X,mt){return k(X).then(_t=>({cMapData:_t,compressionType:mt}))}}s.NodeCMapReaderFactory=Wt;class ut extends o.BaseStandardFontDataFactory{_fetchData(X){return k(X)}}s.NodeStandardFontDataFactory=ut},(b,s,ft)=>{var Pt,Ln,Kt,On;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var o=ft(1),k=ft(6),St=ft(12),bt=ft(13);const Wt=16,ut=100,rt=4096,X=15,mt=10,_t=1e3,ht=16;function st(ct,a){if(ct._removeMirroring)throw new Error("Context is already forwarding operations.");ct.__originalSave=ct.save,ct.__originalRestore=ct.restore,ct.__originalRotate=ct.rotate,ct.__originalScale=ct.scale,ct.__originalTranslate=ct.translate,ct.__originalTransform=ct.transform,ct.__originalSetTransform=ct.setTransform,ct.__originalResetTransform=ct.resetTransform,ct.__originalClip=ct.clip,ct.__originalMoveTo=ct.moveTo,ct.__originalLineTo=ct.lineTo,ct.__originalBezierCurveTo=ct.bezierCurveTo,ct.__originalRect=ct.rect,ct.__originalClosePath=ct.closePath,ct.__originalBeginPath=ct.beginPath,ct._removeMirroring=()=>{ct.save=ct.__originalSave,ct.restore=ct.__originalRestore,ct.rotate=ct.__originalRotate,ct.scale=ct.__originalScale,ct.translate=ct.__originalTranslate,ct.transform=ct.__originalTransform,ct.setTransform=ct.__originalSetTransform,ct.resetTransform=ct.__originalResetTransform,ct.clip=ct.__originalClip,ct.moveTo=ct.__originalMoveTo,ct.lineTo=ct.__originalLineTo,ct.bezierCurveTo=ct.__originalBezierCurveTo,ct.rect=ct.__originalRect,ct.closePath=ct.__originalClosePath,ct.beginPath=ct.__originalBeginPath,delete ct._removeMirroring},ct.save=function(){a.save(),this.__originalSave()},ct.restore=function(){a.restore(),this.__originalRestore()},ct.translate=function(c,g){a.translate(c,g),this.__originalTranslate(c,g)},ct.scale=function(c,g){a.scale(c,g),this.__originalScale(c,g)},ct.transform=function(c,g,_,it,gt,vt){a.transform(c,g,_,it,gt,vt),this.__originalTransform(c,g,_,it,gt,vt)},ct.setTransform=function(c,g,_,it,gt,vt){a.setTransform(c,g,_,it,gt,vt),this.__originalSetTransform(c,g,_,it,gt,vt)},ct.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},ct.rotate=function(c){a.rotate(c),this.__originalRotate(c)},ct.clip=function(c){a.clip(c),this.__originalClip(c)},ct.moveTo=function(h,c){a.moveTo(h,c),this.__originalMoveTo(h,c)},ct.lineTo=function(h,c){a.lineTo(h,c),this.__originalLineTo(h,c)},ct.bezierCurveTo=function(h,c,g,_,it,gt){a.bezierCurveTo(h,c,g,_,it,gt),this.__originalBezierCurveTo(h,c,g,_,it,gt)},ct.rect=function(h,c,g,_){a.rect(h,c,g,_),this.__originalRect(h,c,g,_)},ct.closePath=function(){a.closePath(),this.__originalClosePath()},ct.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class et{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,h,c){let g;return this.cache[a]!==void 0?(g=this.cache[a],this.canvasFactory.reset(g,h,c)):(g=this.canvasFactory.create(h,c),this.cache[a]=g),g}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const h=this.cache[a];this.canvasFactory.destroy(h),delete this.cache[a]}}}function j(ct,a,h,c,g,_,it,gt,vt,Bt){const[Lt,Ot,Gt,Jt,zt,ue]=(0,k.getCurrentTransform)(ct);if(Ot===0&&Gt===0){const pe=it*Lt+zt,Yt=Math.round(pe),It=gt*Jt+ue,Nt=Math.round(It),qt=(it+vt)*Lt+zt,ae=Math.abs(Math.round(qt)-Yt)||1,oe=(gt+Bt)*Jt+ue,Ae=Math.abs(Math.round(oe)-Nt)||1;return ct.setTransform(Math.sign(Lt),0,0,Math.sign(Jt),Yt,Nt),ct.drawImage(a,h,c,g,_,0,0,ae,Ae),ct.setTransform(Lt,Ot,Gt,Jt,zt,ue),[ae,Ae]}if(Lt===0&&Jt===0){const pe=gt*Gt+zt,Yt=Math.round(pe),It=it*Ot+ue,Nt=Math.round(It),qt=(gt+Bt)*Gt+zt,ae=Math.abs(Math.round(qt)-Yt)||1,oe=(it+vt)*Ot+ue,Ae=Math.abs(Math.round(oe)-Nt)||1;return ct.setTransform(0,Math.sign(Ot),Math.sign(Gt),0,Yt,Nt),ct.drawImage(a,h,c,g,_,0,0,Ae,ae),ct.setTransform(Lt,Ot,Gt,Jt,zt,ue),[Ae,ae]}ct.drawImage(a,h,c,g,_,it,gt,vt,Bt);const ye=Math.hypot(Lt,Ot),se=Math.hypot(Gt,Jt);return[ye*vt,se*Bt]}function tt(ct){const{width:a,height:h}=ct;if(a>_t||h>_t)return null;const c=1e3,g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),_=a+1;let it=new Uint8Array(_*(h+1)),gt,vt,Bt;const Lt=a+7&-8;let Ot=new Uint8Array(Lt*h),Gt=0;for(const se of ct.data){let pe=128;for(;pe>0;)Ot[Gt++]=se&pe?0:255,pe>>=1}let Jt=0;for(Gt=0,Ot[Gt]!==0&&(it[0]=1,++Jt),vt=1;vt<a;vt++)Ot[Gt]!==Ot[Gt+1]&&(it[vt]=Ot[Gt]?2:1,++Jt),Gt++;for(Ot[Gt]!==0&&(it[vt]=2,++Jt),gt=1;gt<h;gt++){Gt=gt*Lt,Bt=gt*_,Ot[Gt-Lt]!==Ot[Gt]&&(it[Bt]=Ot[Gt]?1:8,++Jt);let se=(Ot[Gt]?4:0)+(Ot[Gt-Lt]?8:0);for(vt=1;vt<a;vt++)se=(se>>2)+(Ot[Gt+1]?4:0)+(Ot[Gt-Lt+1]?8:0),g[se]&&(it[Bt+vt]=g[se],++Jt),Gt++;if(Ot[Gt-Lt]!==Ot[Gt]&&(it[Bt+vt]=Ot[Gt]?2:4,++Jt),Jt>c)return null}for(Gt=Lt*(h-1),Bt=gt*_,Ot[Gt]!==0&&(it[Bt]=8,++Jt),vt=1;vt<a;vt++)Ot[Gt]!==Ot[Gt+1]&&(it[Bt+vt]=Ot[Gt]?4:8,++Jt),Gt++;if(Ot[Gt]!==0&&(it[Bt+vt]=4,++Jt),Jt>c)return null;const zt=new Int32Array([0,_,-1,0,-_,0,0,0,1]),ue=new Path2D;for(gt=0;Jt&&gt<=h;gt++){let se=gt*_;const pe=se+a;for(;se<pe&&!it[se];)se++;if(se===pe)continue;ue.moveTo(se%_,gt);const Yt=se;let It=it[se];do{const Nt=zt[It];do se+=Nt;while(!it[se]);const qt=it[se];qt!==5&&qt!==10?(It=qt,it[se]=0):(It=qt&51*It>>4,it[se]&=It>>2|It<<2),ue.lineTo(se%_,se/_|0),it[se]||--Jt}while(Yt!==se);--gt}return Ot=null,it=null,function(se){se.save(),se.scale(1/a,-1/h),se.translate(0,-h),se.fill(ue),se.beginPath(),se.restore()}}class lt{constructor(a,h){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,h])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,h){this.x=a,this.y=h}updatePathMinMax(a,h,c){[h,c]=o.Util.applyTransform([h,c],a),this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,c)}updateRectMinMax(a,h){const c=o.Util.applyTransform(h,a),g=o.Util.applyTransform(h.slice(2),a);this.minX=Math.min(this.minX,c[0],g[0]),this.minY=Math.min(this.minY,c[1],g[1]),this.maxX=Math.max(this.maxX,c[0],g[0]),this.maxY=Math.max(this.maxY,c[1],g[1])}updateScalingPathMinMax(a,h){o.Util.scaleMinMax(a,h),this.minX=Math.min(this.minX,h[0]),this.maxX=Math.max(this.maxX,h[1]),this.minY=Math.min(this.minY,h[2]),this.maxY=Math.max(this.maxY,h[3])}updateCurvePathMinMax(a,h,c,g,_,it,gt,vt,Bt,Lt){const Ot=o.Util.bezierBoundingBox(h,c,g,_,it,gt,vt,Bt);if(Lt){Lt[0]=Math.min(Lt[0],Ot[0],Ot[2]),Lt[1]=Math.max(Lt[1],Ot[0],Ot[2]),Lt[2]=Math.min(Lt[2],Ot[1],Ot[3]),Lt[3]=Math.max(Lt[3],Ot[1],Ot[3]);return}this.updateRectMinMax(a,Ot)}getPathBoundingBox(a=St.PathType.FILL,h=null){const c=[this.minX,this.minY,this.maxX,this.maxY];if(a===St.PathType.STROKE){h||(0,o.unreachable)("Stroke bounding box must include transform.");const g=o.Util.singularValueDecompose2dScale(h),_=g[0]*this.lineWidth/2,it=g[1]*this.lineWidth/2;c[0]-=_,c[1]-=it,c[2]+=_,c[3]+=it}return c}updateClipFromPath(){const a=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=St.PathType.FILL,h=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(a,h))}}function ot(ct,a){if(typeof ImageData<"u"&&a instanceof ImageData){ct.putImageData(a,0,0);return}const h=a.height,c=a.width,g=h%ht,_=(h-g)/ht,it=g===0?_:_+1,gt=ct.createImageData(c,ht);let vt=0,Bt;const Lt=a.data,Ot=gt.data;let Gt,Jt,zt,ue;if(a.kind===o.ImageKind.GRAYSCALE_1BPP){const ye=Lt.byteLength,se=new Uint32Array(Ot.buffer,0,Ot.byteLength>>2),pe=se.length,Yt=c+7>>3,It=4294967295,Nt=o.FeatureTest.isLittleEndian?4278190080:255;for(Gt=0;Gt<it;Gt++){for(zt=Gt<_?ht:g,Bt=0,Jt=0;Jt<zt;Jt++){const qt=ye-vt;let ae=0;const oe=qt>Yt?c:qt*8-7,Ae=oe&-8;let Pe=0,ve=0;for(;ae<Ae;ae+=8)ve=Lt[vt++],se[Bt++]=ve&128?It:Nt,se[Bt++]=ve&64?It:Nt,se[Bt++]=ve&32?It:Nt,se[Bt++]=ve&16?It:Nt,se[Bt++]=ve&8?It:Nt,se[Bt++]=ve&4?It:Nt,se[Bt++]=ve&2?It:Nt,se[Bt++]=ve&1?It:Nt;for(;ae<oe;ae++)Pe===0&&(ve=Lt[vt++],Pe=128),se[Bt++]=ve&Pe?It:Nt,Pe>>=1}for(;Bt<pe;)se[Bt++]=0;ct.putImageData(gt,0,Gt*ht)}}else if(a.kind===o.ImageKind.RGBA_32BPP){for(Jt=0,ue=c*ht*4,Gt=0;Gt<_;Gt++)Ot.set(Lt.subarray(vt,vt+ue)),vt+=ue,ct.putImageData(gt,0,Jt),Jt+=ht;Gt<it&&(ue=c*g*4,Ot.set(Lt.subarray(vt,vt+ue)),ct.putImageData(gt,0,Jt))}else if(a.kind===o.ImageKind.RGB_24BPP)for(zt=ht,ue=c*zt,Gt=0;Gt<it;Gt++){for(Gt>=_&&(zt=g,ue=c*zt),Bt=0,Jt=ue;Jt--;)Ot[Bt++]=Lt[vt++],Ot[Bt++]=Lt[vt++],Ot[Bt++]=Lt[vt++],Ot[Bt++]=255;ct.putImageData(gt,0,Gt*ht)}else throw new Error(`bad image kind: ${a.kind}`)}function nt(ct,a){if(a.bitmap){ct.drawImage(a.bitmap,0,0);return}const h=a.height,c=a.width,g=h%ht,_=(h-g)/ht,it=g===0?_:_+1,gt=ct.createImageData(c,ht);let vt=0;const Bt=a.data,Lt=gt.data;for(let Ot=0;Ot<it;Ot++){const Gt=Ot<_?ht:g;({srcPos:vt}=(0,bt.convertBlackAndWhiteToRGBA)({src:Bt,srcPos:vt,dest:Lt,width:c,height:Gt,nonBlackColor:0})),ct.putImageData(gt,0,Ot*ht)}}function d(ct,a){const h=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const c of h)ct[c]!==void 0&&(a[c]=ct[c]);ct.setLineDash!==void 0&&(a.setLineDash(ct.getLineDash()),a.lineDashOffset=ct.lineDashOffset)}function m(ct){if(ct.strokeStyle=ct.fillStyle="#000000",ct.fillRule="nonzero",ct.globalAlpha=1,ct.lineWidth=1,ct.lineCap="butt",ct.lineJoin="miter",ct.miterLimit=10,ct.globalCompositeOperation="source-over",ct.font="10px sans-serif",ct.setLineDash!==void 0&&(ct.setLineDash([]),ct.lineDashOffset=0),!o.isNodeJS){const{filter:a}=ct;a!=="none"&&a!==""&&(ct.filter="none")}}function pt(ct,a,h,c){const g=ct.length;for(let _=3;_<g;_+=4){const it=ct[_];if(it===0)ct[_-3]=a,ct[_-2]=h,ct[_-1]=c;else if(it<255){const gt=255-it;ct[_-3]=ct[_-3]*it+a*gt>>8,ct[_-2]=ct[_-2]*it+h*gt>>8,ct[_-1]=ct[_-1]*it+c*gt>>8}}}function Y(ct,a,h){const c=ct.length,g=1/255;for(let _=3;_<c;_+=4){const it=h?h[ct[_]]:ct[_];a[_]=a[_]*it*g|0}}function f(ct,a,h){const c=ct.length;for(let g=3;g<c;g+=4){const _=ct[g-3]*77+ct[g-2]*152+ct[g-1]*28;a[g]=h?a[g]*h[_>>8]>>8:a[g]*_>>16}}function dt(ct,a,h,c,g,_,it,gt,vt,Bt,Lt){const Ot=!!_,Gt=Ot?_[0]:0,Jt=Ot?_[1]:0,zt=Ot?_[2]:0,ue=g==="Luminosity"?f:Y,se=Math.min(c,Math.ceil(1048576/h));for(let pe=0;pe<c;pe+=se){const Yt=Math.min(se,c-pe),It=ct.getImageData(gt-Bt,pe+(vt-Lt),h,Yt),Nt=a.getImageData(gt,pe+vt,h,Yt);Ot&&pt(It.data,Gt,Jt,zt),ue(It.data,Nt.data,it),a.putImageData(Nt,gt,pe+vt)}}function $(ct,a,h,c){const g=c[0],_=c[1],it=c[2]-g,gt=c[3]-_;it===0||gt===0||(dt(a.context,h,it,gt,a.subtype,a.backdrop,a.transferMap,g,_,a.offsetX,a.offsetY),ct.save(),ct.globalAlpha=1,ct.globalCompositeOperation="source-over",ct.setTransform(1,0,0,1,0,0),ct.drawImage(h.canvas,0,0),ct.restore())}function Tt(ct,a){const h=o.Util.singularValueDecompose2dScale(ct);h[0]=Math.fround(h[0]),h[1]=Math.fround(h[1]);const c=Math.fround((globalThis.devicePixelRatio||1)*k.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:h[0]<=c||h[1]<=c}const wt=["butt","round","square"],at=["miter","round","bevel"],Rt={},Ut={},re=class re{constructor(a,h,c,g,_,{optionalContentConfig:it,markedContentStack:gt=null},vt,Bt){Et(this,Pt);Et(this,Kt);this.ctx=a,this.current=new lt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=c,this.canvasFactory=g,this.filterFactory=_,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=gt||[],this.optionalContentConfig=it,this.cachedCanvases=new et(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=vt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Bt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,h=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):h}beginDrawing({transform:a,viewport:h,transparency:c=!1,background:g=null}){const _=this.ctx.canvas.width,it=this.ctx.canvas.height,gt=this.ctx.fillStyle;if(this.ctx.fillStyle=g||"#ffffff",this.ctx.fillRect(0,0,_,it),this.ctx.fillStyle=gt,c){const vt=this.cachedCanvases.getCanvas("transparent",_,it);this.compositeCtx=this.ctx,this.transparentCanvas=vt.canvas,this.ctx=vt.context,this.ctx.save(),this.ctx.transform(...(0,k.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...h.transform),this.viewportScale=h.scale,this.baseTransform=(0,k.getCurrentTransform)(this.ctx)}executeOperatorList(a,h,c,g){const _=a.argsArray,it=a.fnArray;let gt=h||0;const vt=_.length;if(vt===gt)return gt;const Bt=vt-gt>mt&&typeof c=="function",Lt=Bt?Date.now()+X:0;let Ot=0;const Gt=this.commonObjs,Jt=this.objs;let zt;for(;;){if(g!==void 0&&gt===g.nextBreakPoint)return g.breakIt(gt,c),gt;if(zt=it[gt],zt!==o.OPS.dependency)this[zt].apply(this,_[gt]);else for(const ue of _[gt]){const ye=ue.startsWith("g_")?Gt:Jt;if(!ye.has(ue))return ye.get(ue,c),gt}if(gt++,gt===vt)return gt;if(Bt&&++Ot>mt){if(Date.now()>Lt)return c(),gt;Ot=0}}}endDrawing(){xt(this,Pt,Ln).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const h of a.values())typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement&&(h.width=h.height=0);a.clear()}this._cachedBitmapsMap.clear(),xt(this,Kt,On).call(this)}_scaleImage(a,h){const c=a.width,g=a.height;let _=Math.max(Math.hypot(h[0],h[1]),1),it=Math.max(Math.hypot(h[2],h[3]),1),gt=c,vt=g,Bt="prescale1",Lt,Ot;for(;_>2&&gt>1||it>2&&vt>1;){let Gt=gt,Jt=vt;_>2&&gt>1&&(Gt=gt>=16384?Math.floor(gt/2)-1||1:Math.ceil(gt/2),_/=gt/Gt),it>2&&vt>1&&(Jt=vt>=16384?Math.floor(vt/2)-1||1:Math.ceil(vt)/2,it/=vt/Jt),Lt=this.cachedCanvases.getCanvas(Bt,Gt,Jt),Ot=Lt.context,Ot.clearRect(0,0,Gt,Jt),Ot.drawImage(a,0,0,gt,vt,0,0,Gt,Jt),a=Lt.canvas,gt=Gt,vt=Jt,Bt=Bt==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:gt,paintHeight:vt}}_createMaskCanvas(a){const h=this.ctx,{width:c,height:g}=a,_=this.current.fillColor,it=this.current.patternFill,gt=(0,k.getCurrentTransform)(h);let vt,Bt,Lt,Ot;if((a.bitmap||a.data)&&a.count>1){const ae=a.bitmap||a.data.buffer;Bt=JSON.stringify(it?gt:[gt.slice(0,4),_]),vt=this._cachedBitmapsMap.get(ae),vt||(vt=new Map,this._cachedBitmapsMap.set(ae,vt));const oe=vt.get(Bt);if(oe&&!it){const Ae=Math.round(Math.min(gt[0],gt[2])+gt[4]),Pe=Math.round(Math.min(gt[1],gt[3])+gt[5]);return{canvas:oe,offsetX:Ae,offsetY:Pe}}Lt=oe}Lt||(Ot=this.cachedCanvases.getCanvas("maskCanvas",c,g),nt(Ot.context,a));let Gt=o.Util.transform(gt,[1/c,0,0,-1/g,0,0]);Gt=o.Util.transform(Gt,[1,0,0,1,0,-g]);const Jt=o.Util.applyTransform([0,0],Gt),zt=o.Util.applyTransform([c,g],Gt),ue=o.Util.normalizeRect([Jt[0],Jt[1],zt[0],zt[1]]),ye=Math.round(ue[2]-ue[0])||1,se=Math.round(ue[3]-ue[1])||1,pe=this.cachedCanvases.getCanvas("fillCanvas",ye,se),Yt=pe.context,It=Math.min(Jt[0],zt[0]),Nt=Math.min(Jt[1],zt[1]);Yt.translate(-It,-Nt),Yt.transform(...Gt),Lt||(Lt=this._scaleImage(Ot.canvas,(0,k.getCurrentTransformInverse)(Yt)),Lt=Lt.img,vt&&it&&vt.set(Bt,Lt)),Yt.imageSmoothingEnabled=Tt((0,k.getCurrentTransform)(Yt),a.interpolate),j(Yt,Lt,0,0,Lt.width,Lt.height,0,0,c,g),Yt.globalCompositeOperation="source-in";const qt=o.Util.transform((0,k.getCurrentTransformInverse)(Yt),[1,0,0,1,-It,-Nt]);return Yt.fillStyle=it?_.getPattern(h,this,qt,St.PathType.FILL):_,Yt.fillRect(0,0,c,g),vt&&!it&&(this.cachedCanvases.delete("fillCanvas"),vt.set(Bt,pe.canvas)),{canvas:pe.canvas,offsetX:Math.round(It),offsetY:Math.round(Nt)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=wt[a]}setLineJoin(a){this.ctx.lineJoin=at[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,h){const c=this.ctx;c.setLineDash!==void 0&&(c.setLineDash(a),c.lineDashOffset=h)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[h,c]of a)switch(h){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c[0],c[1]);break;case"CA":this.current.strokeAlpha=c;break;case"ca":this.current.fillAlpha=c,this.ctx.globalAlpha=c;break;case"BM":this.ctx.globalCompositeOperation=c;break;case"SMask":this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,h=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,g=this.cachedCanvases.getCanvas(c,a,h);this.suspendedCtx=this.ctx,this.ctx=g.context;const _=this.ctx;_.setTransform(...(0,k.getCurrentTransform)(this.suspendedCtx)),d(this.suspendedCtx,_),st(_,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),d(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const h=this.current.activeSMask,c=this.suspendedCtx;$(c,h,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(d(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),d(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,h,c,g,_,it){this.ctx.transform(a,h,c,g,_,it),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,h,c){const g=this.ctx,_=this.current;let it=_.x,gt=_.y,vt,Bt;const Lt=(0,k.getCurrentTransform)(g),Ot=Lt[0]===0&&Lt[3]===0||Lt[1]===0&&Lt[2]===0,Gt=Ot?c.slice(0):null;for(let Jt=0,zt=0,ue=a.length;Jt<ue;Jt++)switch(a[Jt]|0){case o.OPS.rectangle:it=h[zt++],gt=h[zt++];const ye=h[zt++],se=h[zt++],pe=it+ye,Yt=gt+se;g.moveTo(it,gt),ye===0||se===0?g.lineTo(pe,Yt):(g.lineTo(pe,gt),g.lineTo(pe,Yt),g.lineTo(it,Yt)),Ot||_.updateRectMinMax(Lt,[it,gt,pe,Yt]),g.closePath();break;case o.OPS.moveTo:it=h[zt++],gt=h[zt++],g.moveTo(it,gt),Ot||_.updatePathMinMax(Lt,it,gt);break;case o.OPS.lineTo:it=h[zt++],gt=h[zt++],g.lineTo(it,gt),Ot||_.updatePathMinMax(Lt,it,gt);break;case o.OPS.curveTo:vt=it,Bt=gt,it=h[zt+4],gt=h[zt+5],g.bezierCurveTo(h[zt],h[zt+1],h[zt+2],h[zt+3],it,gt),_.updateCurvePathMinMax(Lt,vt,Bt,h[zt],h[zt+1],h[zt+2],h[zt+3],it,gt,Gt),zt+=6;break;case o.OPS.curveTo2:vt=it,Bt=gt,g.bezierCurveTo(it,gt,h[zt],h[zt+1],h[zt+2],h[zt+3]),_.updateCurvePathMinMax(Lt,vt,Bt,it,gt,h[zt],h[zt+1],h[zt+2],h[zt+3],Gt),it=h[zt+2],gt=h[zt+3],zt+=4;break;case o.OPS.curveTo3:vt=it,Bt=gt,it=h[zt+2],gt=h[zt+3],g.bezierCurveTo(h[zt],h[zt+1],it,gt,it,gt),_.updateCurvePathMinMax(Lt,vt,Bt,h[zt],h[zt+1],it,gt,it,gt,Gt),zt+=4;break;case o.OPS.closePath:g.closePath();break}Ot&&_.updateScalingPathMinMax(Lt,Gt),_.setCurrentPoint(it,gt)}closePath(){this.ctx.closePath()}stroke(a=!0){const h=this.ctx,c=this.current.strokeColor;h.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof c=="object"&&(c!=null&&c.getPattern)?(h.save(),h.strokeStyle=c.getPattern(h,this,(0,k.getCurrentTransformInverse)(h),St.PathType.STROKE),this.rescaleAndStroke(!1),h.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const h=this.ctx,c=this.current.fillColor,g=this.current.patternFill;let _=!1;g&&(h.save(),h.fillStyle=c.getPattern(h,this,(0,k.getCurrentTransformInverse)(h),St.PathType.FILL),_=!0);const it=this.current.getClippedPathBoundingBox();this.contentVisible&&it!==null&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),_&&h.restore(),a&&this.consumePath(it)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Rt}eoClip(){this.pendingClip=Ut}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,h=this.ctx;if(a===void 0){h.beginPath();return}h.save(),h.beginPath();for(const c of a)h.setTransform(...c.transform),h.translate(c.x,c.y),c.addToPath(h,c.fontSize);h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,h){var Lt;const c=this.commonObjs.get(a),g=this.current;if(!c)throw new Error(`Can't find font for ${a}`);if(g.fontMatrix=c.fontMatrix||o.FONT_IDENTITY_MATRIX,(g.fontMatrix[0]===0||g.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+a),h<0?(h=-h,g.fontDirection=-1):g.fontDirection=1,this.current.font=c,this.current.fontSize=h,c.isType3Font)return;const _=c.loadedName||"sans-serif",it=((Lt=c.systemFontInfo)==null?void 0:Lt.css)||`"${_}", ${c.fallbackName}`;let gt="normal";c.black?gt="900":c.bold&&(gt="bold");const vt=c.italic?"italic":"normal";let Bt=h;h<Wt?Bt=Wt:h>ut&&(Bt=ut),this.current.fontSizeScale=h/Bt,this.ctx.font=`${vt} ${gt} ${Bt}px ${it}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,h){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=h}setLeadingMoveText(a,h){this.setLeading(-h),this.moveText(a,h)}setTextMatrix(a,h,c,g,_,it){this.current.textMatrix=[a,h,c,g,_,it],this.current.textMatrixScale=Math.hypot(a,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,h,c,g){const _=this.ctx,it=this.current,gt=it.font,vt=it.textRenderingMode,Bt=it.fontSize/it.fontSizeScale,Lt=vt&o.TextRenderingMode.FILL_STROKE_MASK,Ot=!!(vt&o.TextRenderingMode.ADD_TO_PATH_FLAG),Gt=it.patternFill&&!gt.missingFile;let Jt;(gt.disableFontFace||Ot||Gt)&&(Jt=gt.getPathGenerator(this.commonObjs,a)),gt.disableFontFace||Gt?(_.save(),_.translate(h,c),_.beginPath(),Jt(_,Bt),g&&_.setTransform(...g),(Lt===o.TextRenderingMode.FILL||Lt===o.TextRenderingMode.FILL_STROKE)&&_.fill(),(Lt===o.TextRenderingMode.STROKE||Lt===o.TextRenderingMode.FILL_STROKE)&&_.stroke(),_.restore()):((Lt===o.TextRenderingMode.FILL||Lt===o.TextRenderingMode.FILL_STROKE)&&_.fillText(a,h,c),(Lt===o.TextRenderingMode.STROKE||Lt===o.TextRenderingMode.FILL_STROKE)&&_.strokeText(a,h,c)),Ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,k.getCurrentTransform)(_),x:h,y:c,fontSize:Bt,addToPath:Jt})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const h=a.getImageData(0,0,10,10).data;let c=!1;for(let g=3;g<h.length;g+=4)if(h[g]>0&&h[g]<255){c=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",c)}showText(a){const h=this.current,c=h.font;if(c.isType3Font)return this.showType3Text(a);const g=h.fontSize;if(g===0)return;const _=this.ctx,it=h.fontSizeScale,gt=h.charSpacing,vt=h.wordSpacing,Bt=h.fontDirection,Lt=h.textHScale*Bt,Ot=a.length,Gt=c.vertical,Jt=Gt?1:-1,zt=c.defaultVMetrics,ue=g*h.fontMatrix[0],ye=h.textRenderingMode===o.TextRenderingMode.FILL&&!c.disableFontFace&&!h.patternFill;_.save(),_.transform(...h.textMatrix),_.translate(h.x,h.y+h.textRise),Bt>0?_.scale(Lt,-1):_.scale(Lt,1);let se;if(h.patternFill){_.save();const qt=h.fillColor.getPattern(_,this,(0,k.getCurrentTransformInverse)(_),St.PathType.FILL);se=(0,k.getCurrentTransform)(_),_.restore(),_.fillStyle=qt}let pe=h.lineWidth;const Yt=h.textMatrixScale;if(Yt===0||pe===0){const qt=h.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(qt===o.TextRenderingMode.STROKE||qt===o.TextRenderingMode.FILL_STROKE)&&(pe=this.getSinglePixelWidth())}else pe/=Yt;if(it!==1&&(_.scale(it,it),pe/=it),_.lineWidth=pe,c.isInvalidPDFjsFont){const qt=[];let ae=0;for(const oe of a)qt.push(oe.unicode),ae+=oe.width;_.fillText(qt.join(""),0,0),h.x+=ae*ue*Lt,_.restore(),this.compose();return}let It=0,Nt;for(Nt=0;Nt<Ot;++Nt){const qt=a[Nt];if(typeof qt=="number"){It+=Jt*qt*g/1e3;continue}let ae=!1;const oe=(qt.isSpace?vt:0)+gt,Ae=qt.fontChar,Pe=qt.accent;let ve,we,Te=qt.width;if(Gt){const Ce=qt.vmetric||zt,Xt=-(qt.vmetric?Ce[1]:Te*.5)*ue,Dt=Ce[2]*ue;Te=Ce?-Ce[0]:Te,ve=Xt/it,we=(It+Dt)/it}else ve=It/it,we=0;if(c.remeasure&&Te>0){const Ce=_.measureText(Ae).width*1e3/g*it;if(Te<Ce&&this.isFontSubpixelAAEnabled){const Xt=Te/Ce;ae=!0,_.save(),_.scale(Xt,1),ve/=Xt}else Te!==Ce&&(ve+=(Te-Ce)/2e3*g/it)}if(this.contentVisible&&(qt.isInFont||c.missingFile)){if(ye&&!Pe)_.fillText(Ae,ve,we);else if(this.paintChar(Ae,ve,we,se),Pe){const Ce=ve+g*Pe.offset.x/it,Xt=we-g*Pe.offset.y/it;this.paintChar(Pe.fontChar,Ce,Xt,se)}}const Ee=Gt?Te*ue-oe*Bt:Te*ue+oe*Bt;It+=Ee,ae&&_.restore()}Gt?h.y-=It:h.x+=It*Lt,_.restore(),this.compose()}showType3Text(a){const h=this.ctx,c=this.current,g=c.font,_=c.fontSize,it=c.fontDirection,gt=g.vertical?1:-1,vt=c.charSpacing,Bt=c.wordSpacing,Lt=c.textHScale*it,Ot=c.fontMatrix||o.FONT_IDENTITY_MATRIX,Gt=a.length,Jt=c.textRenderingMode===o.TextRenderingMode.INVISIBLE;let zt,ue,ye,se;if(!(Jt||_===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,h.save(),h.transform(...c.textMatrix),h.translate(c.x,c.y),h.scale(Lt,it),zt=0;zt<Gt;++zt){if(ue=a[zt],typeof ue=="number"){se=gt*ue*_/1e3,this.ctx.translate(se,0),c.x+=se*Lt;continue}const pe=(ue.isSpace?Bt:0)+vt,Yt=g.charProcOperatorList[ue.operatorListId];if(!Yt){(0,o.warn)(`Type3 character "${ue.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ue,this.save(),h.scale(_,_),h.transform(...Ot),this.executeOperatorList(Yt),this.restore()),ye=o.Util.applyTransform([ue.width,0],Ot)[0]*_+pe,h.translate(ye,0),c.x+=ye*Lt}h.restore(),this.processingType3=null}}setCharWidth(a,h){}setCharWidthAndBounds(a,h,c,g,_,it){this.ctx.rect(c,g,_-c,it-g),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let h;if(a[0]==="TilingPattern"){const c=a[1],g=this.baseTransform||(0,k.getCurrentTransform)(this.ctx),_={createCanvasGraphics:it=>new re(it,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};h=new St.TilingPattern(a,c,this.ctx,_,g)}else h=this._getPattern(a[1],a[2]);return h}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,h,c){const g=o.Util.makeHexColor(a,h,c);this.ctx.strokeStyle=g,this.current.strokeColor=g}setFillRGBColor(a,h,c){const g=o.Util.makeHexColor(a,h,c);this.ctx.fillStyle=g,this.current.fillColor=g,this.current.patternFill=!1}_getPattern(a,h=null){let c;return this.cachedPatterns.has(a)?c=this.cachedPatterns.get(a):(c=(0,St.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,c)),h&&(c.matrix=h),c}shadingFill(a){if(!this.contentVisible)return;const h=this.ctx;this.save();const c=this._getPattern(a);h.fillStyle=c.getPattern(h,this,(0,k.getCurrentTransformInverse)(h),St.PathType.SHADING);const g=(0,k.getCurrentTransformInverse)(h);if(g){const{width:_,height:it}=h.canvas,[gt,vt,Bt,Lt]=o.Util.getAxialAlignedBoundingBox([0,0,_,it],g);this.ctx.fillRect(gt,vt,Bt-gt,Lt-vt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,h){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,k.getCurrentTransform)(this.ctx),h)){const c=h[2]-h[0],g=h[3]-h[1];this.ctx.rect(h[0],h[1],c,g),this.current.updateRectMinMax((0,k.getCurrentTransform)(this.ctx),h),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const h=this.ctx;a.isolated||(0,o.info)("TODO: Support non-isolated groups."),a.knockout&&(0,o.warn)("Knockout groups not supported.");const c=(0,k.getCurrentTransform)(h);if(a.matrix&&h.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let g=o.Util.getAxialAlignedBoundingBox(a.bbox,(0,k.getCurrentTransform)(h));const _=[0,0,h.canvas.width,h.canvas.height];g=o.Util.intersect(g,_)||[0,0,0,0];const it=Math.floor(g[0]),gt=Math.floor(g[1]);let vt=Math.max(Math.ceil(g[2])-it,1),Bt=Math.max(Math.ceil(g[3])-gt,1),Lt=1,Ot=1;vt>rt&&(Lt=vt/rt,vt=rt),Bt>rt&&(Ot=Bt/rt,Bt=rt),this.current.startNewPathAndClipBox([0,0,vt,Bt]);let Gt="groupAt"+this.groupLevel;a.smask&&(Gt+="_smask_"+this.smaskCounter++%2);const Jt=this.cachedCanvases.getCanvas(Gt,vt,Bt),zt=Jt.context;zt.scale(1/Lt,1/Ot),zt.translate(-it,-gt),zt.transform(...c),a.smask?this.smaskStack.push({canvas:Jt.canvas,context:zt,offsetX:it,offsetY:gt,scaleX:Lt,scaleY:Ot,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(h.setTransform(1,0,0,1,0,0),h.translate(it,gt),h.scale(Lt,Ot),h.save()),d(h,zt),this.ctx=zt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(h),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const h=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const g=(0,k.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...g);const _=o.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],g);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(_)}}beginAnnotation(a,h,c,g,_){if(xt(this,Pt,Ln).call(this),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(h)&&h.length===4){const it=h[2]-h[0],gt=h[3]-h[1];if(_&&this.annotationCanvasMap){c=c.slice(),c[4]-=h[0],c[5]-=h[1],h=h.slice(),h[0]=h[1]=0,h[2]=it,h[3]=gt;const[vt,Bt]=o.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(this.ctx)),{viewportScale:Lt}=this,Ot=Math.ceil(it*this.outputScaleX*Lt),Gt=Math.ceil(gt*this.outputScaleY*Lt);this.annotationCanvas=this.canvasFactory.create(Ot,Gt);const{canvas:Jt,context:zt}=this.annotationCanvas;this.annotationCanvasMap.set(a,Jt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=zt,this.ctx.save(),this.ctx.setTransform(vt,0,0,-Bt,0,gt*Bt),m(this.ctx)}else m(this.ctx),this.ctx.rect(h[0],h[1],it,gt),this.ctx.clip(),this.endPath()}this.current=new lt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...c),this.transform(...g)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),xt(this,Kt,On).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const h=a.count;a=this.getObject(a.data,a),a.count=h;const c=this.ctx,g=this.processingType3;if(g&&(g.compiled===void 0&&(g.compiled=tt(a)),g.compiled)){g.compiled(c);return}const _=this._createMaskCanvas(a),it=_.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(it,_.offsetX,_.offsetY),c.restore(),this.compose()}paintImageMaskXObjectRepeat(a,h,c=0,g=0,_,it){if(!this.contentVisible)return;a=this.getObject(a.data,a);const gt=this.ctx;gt.save();const vt=(0,k.getCurrentTransform)(gt);gt.transform(h,c,g,_,0,0);const Bt=this._createMaskCanvas(a);gt.setTransform(1,0,0,1,Bt.offsetX-vt[4],Bt.offsetY-vt[5]);for(let Lt=0,Ot=it.length;Lt<Ot;Lt+=2){const Gt=o.Util.transform(vt,[h,c,g,_,it[Lt],it[Lt+1]]),[Jt,zt]=o.Util.applyTransform([0,0],Gt);gt.drawImage(Bt.canvas,Jt,zt)}gt.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const h=this.ctx,c=this.current.fillColor,g=this.current.patternFill;for(const _ of a){const{data:it,width:gt,height:vt,transform:Bt}=_,Lt=this.cachedCanvases.getCanvas("maskCanvas",gt,vt),Ot=Lt.context;Ot.save();const Gt=this.getObject(it,_);nt(Ot,Gt),Ot.globalCompositeOperation="source-in",Ot.fillStyle=g?c.getPattern(Ot,this,(0,k.getCurrentTransformInverse)(h),St.PathType.FILL):c,Ot.fillRect(0,0,gt,vt),Ot.restore(),h.save(),h.transform(...Bt),h.scale(1,-1),j(h,Lt.canvas,0,0,gt,vt,0,-1,1,1),h.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const h=this.getObject(a);if(!h){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(h)}paintImageXObjectRepeat(a,h,c,g){if(!this.contentVisible)return;const _=this.getObject(a);if(!_){(0,o.warn)("Dependent image isn't ready yet");return}const it=_.width,gt=_.height,vt=[];for(let Bt=0,Lt=g.length;Bt<Lt;Bt+=2)vt.push({transform:[h,0,0,c,g[Bt],g[Bt+1]],x:0,y:0,w:it,h:gt});this.paintInlineImageXObjectGroup(_,vt)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:h,width:c,height:g}=a,_=this.cachedCanvases.getCanvas("inlineImage",c,g),it=_.context;return it.filter=this.current.transferMaps,it.drawImage(h,0,0),it.filter="none",_.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const h=a.width,c=a.height,g=this.ctx;if(this.save(),!o.isNodeJS){const{filter:gt}=g;gt!=="none"&&gt!==""&&(g.filter="none")}g.scale(1/h,-1/c);let _;if(a.bitmap)_=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)_=a;else{const vt=this.cachedCanvases.getCanvas("inlineImage",h,c).context;ot(vt,a),_=this.applyTransferMapsToCanvas(vt)}const it=this._scaleImage(_,(0,k.getCurrentTransformInverse)(g));g.imageSmoothingEnabled=Tt((0,k.getCurrentTransform)(g),a.interpolate),j(g,it.img,0,0,it.paintWidth,it.paintHeight,0,-c,h,c),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,h){if(!this.contentVisible)return;const c=this.ctx;let g;if(a.bitmap)g=a.bitmap;else{const _=a.width,it=a.height,vt=this.cachedCanvases.getCanvas("inlineImage",_,it).context;ot(vt,a),g=this.applyTransferMapsToCanvas(vt)}for(const _ of h)c.save(),c.transform(..._.transform),c.scale(1,-1),j(c,g,_.x,_.y,_.w,_.h,0,-1,1,1),c.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,h){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,h){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(h)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const h=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const c=this.ctx;this.pendingClip&&(h||(this.pendingClip===Ut?c.clip("evenodd"):c.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,k.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const h=Math.abs(a[0]*a[3]-a[2]*a[1]),c=Math.hypot(a[0],a[2]),g=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(c,g)/h}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:h,b:c,c:g,d:_}=this.ctx.getTransform();let it,gt;if(c===0&&g===0){const vt=Math.abs(h),Bt=Math.abs(_);if(vt===Bt)if(a===0)it=gt=1/vt;else{const Lt=vt*a;it=gt=Lt<1?1/Lt:1}else if(a===0)it=1/vt,gt=1/Bt;else{const Lt=vt*a,Ot=Bt*a;it=Lt<1?1/Lt:1,gt=Ot<1?1/Ot:1}}else{const vt=Math.abs(h*_-c*g),Bt=Math.hypot(h,c),Lt=Math.hypot(g,_);if(a===0)it=Lt/vt,gt=Bt/vt;else{const Ot=a*vt;it=Lt>Ot?Lt/Ot:1,gt=Bt>Ot?Bt/Ot:1}}this._cachedScaleForStroking[0]=it,this._cachedScaleForStroking[1]=gt}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:h}=this,{lineWidth:c}=this.current,[g,_]=this.getScaleForStroking();if(h.lineWidth=c||1,g===1&&_===1){h.stroke();return}const it=h.getLineDash();if(a&&h.save(),h.scale(g,_),it.length>0){const gt=Math.max(g,_);h.setLineDash(it.map(vt=>vt/gt)),h.lineDashOffset/=gt}h.stroke(),a&&h.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};Pt=new WeakSet,Ln=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kt=new WeakSet,On=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const h=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=h}}};let $t=re;s.CanvasGraphics=$t;for(const ct in o.OPS)$t.prototype[ct]!==void 0&&($t.prototype[o.OPS[ct]]=$t.prototype[ct])},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=ht;var o=ft(1),k=ft(6);const St={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=St;function bt(tt,lt){if(!lt)return;const ot=lt[2]-lt[0],nt=lt[3]-lt[1],d=new Path2D;d.rect(lt[0],lt[1],ot,nt),tt.clip(d)}class Wt{constructor(){this.constructor===Wt&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class ut extends Wt{constructor(lt){super(),this._type=lt[1],this._bbox=lt[2],this._colorStops=lt[3],this._p0=lt[4],this._p1=lt[5],this._r0=lt[6],this._r1=lt[7],this.matrix=null}_createGradient(lt){let ot;this._type==="axial"?ot=lt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(ot=lt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const nt of this._colorStops)ot.addColorStop(nt[0],nt[1]);return ot}getPattern(lt,ot,nt,d){let m;if(d===St.STROKE||d===St.FILL){const pt=ot.current.getClippedPathBoundingBox(d,(0,k.getCurrentTransform)(lt))||[0,0,0,0],Y=Math.ceil(pt[2]-pt[0])||1,f=Math.ceil(pt[3]-pt[1])||1,dt=ot.cachedCanvases.getCanvas("pattern",Y,f,!0),$=dt.context;$.clearRect(0,0,$.canvas.width,$.canvas.height),$.beginPath(),$.rect(0,0,$.canvas.width,$.canvas.height),$.translate(-pt[0],-pt[1]),nt=o.Util.transform(nt,[1,0,0,1,pt[0],pt[1]]),$.transform(...ot.baseTransform),this.matrix&&$.transform(...this.matrix),bt($,this._bbox),$.fillStyle=this._createGradient($),$.fill(),m=lt.createPattern(dt.canvas,"no-repeat");const Tt=new DOMMatrix(nt);m.setTransform(Tt)}else bt(lt,this._bbox),m=this._createGradient(lt);return m}}function rt(tt,lt,ot,nt,d,m,pt,Y){const f=lt.coords,dt=lt.colors,$=tt.data,Tt=tt.width*4;let wt;f[ot+1]>f[nt+1]&&(wt=ot,ot=nt,nt=wt,wt=m,m=pt,pt=wt),f[nt+1]>f[d+1]&&(wt=nt,nt=d,d=wt,wt=pt,pt=Y,Y=wt),f[ot+1]>f[nt+1]&&(wt=ot,ot=nt,nt=wt,wt=m,m=pt,pt=wt);const at=(f[ot]+lt.offsetX)*lt.scaleX,Rt=(f[ot+1]+lt.offsetY)*lt.scaleY,Ut=(f[nt]+lt.offsetX)*lt.scaleX,$t=(f[nt+1]+lt.offsetY)*lt.scaleY,Pt=(f[d]+lt.offsetX)*lt.scaleX,Vt=(f[d+1]+lt.offsetY)*lt.scaleY;if(Rt>=Vt)return;const Kt=dt[m],ne=dt[m+1],re=dt[m+2],ct=dt[pt],a=dt[pt+1],h=dt[pt+2],c=dt[Y],g=dt[Y+1],_=dt[Y+2],it=Math.round(Rt),gt=Math.round(Vt);let vt,Bt,Lt,Ot,Gt,Jt,zt,ue;for(let ye=it;ye<=gt;ye++){if(ye<$t){const Nt=ye<Rt?0:(Rt-ye)/(Rt-$t);vt=at-(at-Ut)*Nt,Bt=Kt-(Kt-ct)*Nt,Lt=ne-(ne-a)*Nt,Ot=re-(re-h)*Nt}else{let Nt;ye>Vt?Nt=1:$t===Vt?Nt=0:Nt=($t-ye)/($t-Vt),vt=Ut-(Ut-Pt)*Nt,Bt=ct-(ct-c)*Nt,Lt=a-(a-g)*Nt,Ot=h-(h-_)*Nt}let se;ye<Rt?se=0:ye>Vt?se=1:se=(Rt-ye)/(Rt-Vt),Gt=at-(at-Pt)*se,Jt=Kt-(Kt-c)*se,zt=ne-(ne-g)*se,ue=re-(re-_)*se;const pe=Math.round(Math.min(vt,Gt)),Yt=Math.round(Math.max(vt,Gt));let It=Tt*ye+pe*4;for(let Nt=pe;Nt<=Yt;Nt++)se=(vt-Nt)/(vt-Gt),se<0?se=0:se>1&&(se=1),$[It++]=Bt-(Bt-Jt)*se|0,$[It++]=Lt-(Lt-zt)*se|0,$[It++]=Ot-(Ot-ue)*se|0,$[It++]=255}}function X(tt,lt,ot){const nt=lt.coords,d=lt.colors;let m,pt;switch(lt.type){case"lattice":const Y=lt.verticesPerRow,f=Math.floor(nt.length/Y)-1,dt=Y-1;for(m=0;m<f;m++){let $=m*Y;for(let Tt=0;Tt<dt;Tt++,$++)rt(tt,ot,nt[$],nt[$+1],nt[$+Y],d[$],d[$+1],d[$+Y]),rt(tt,ot,nt[$+Y+1],nt[$+1],nt[$+Y],d[$+Y+1],d[$+1],d[$+Y])}break;case"triangles":for(m=0,pt=nt.length;m<pt;m+=3)rt(tt,ot,nt[m],nt[m+1],nt[m+2],d[m],d[m+1],d[m+2]);break;default:throw new Error("illegal figure")}}class mt extends Wt{constructor(lt){super(),this._coords=lt[2],this._colors=lt[3],this._figures=lt[4],this._bounds=lt[5],this._bbox=lt[7],this._background=lt[8],this.matrix=null}_createMeshCanvas(lt,ot,nt){const Y=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),dt=Math.ceil(this._bounds[2])-Y,$=Math.ceil(this._bounds[3])-f,Tt=Math.min(Math.ceil(Math.abs(dt*lt[0]*1.1)),3e3),wt=Math.min(Math.ceil(Math.abs($*lt[1]*1.1)),3e3),at=dt/Tt,Rt=$/wt,Ut={coords:this._coords,colors:this._colors,offsetX:-Y,offsetY:-f,scaleX:1/at,scaleY:1/Rt},$t=Tt+2*2,Pt=wt+2*2,Vt=nt.getCanvas("mesh",$t,Pt,!1),Kt=Vt.context,ne=Kt.createImageData(Tt,wt);if(ot){const ct=ne.data;for(let a=0,h=ct.length;a<h;a+=4)ct[a]=ot[0],ct[a+1]=ot[1],ct[a+2]=ot[2],ct[a+3]=255}for(const ct of this._figures)X(ne,ct,Ut);return Kt.putImageData(ne,2,2),{canvas:Vt.canvas,offsetX:Y-2*at,offsetY:f-2*Rt,scaleX:at,scaleY:Rt}}getPattern(lt,ot,nt,d){bt(lt,this._bbox);let m;if(d===St.SHADING)m=o.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(lt));else if(m=o.Util.singularValueDecompose2dScale(ot.baseTransform),this.matrix){const Y=o.Util.singularValueDecompose2dScale(this.matrix);m=[m[0]*Y[0],m[1]*Y[1]]}const pt=this._createMeshCanvas(m,d===St.SHADING?null:this._background,ot.cachedCanvases);return d!==St.SHADING&&(lt.setTransform(...ot.baseTransform),this.matrix&&lt.transform(...this.matrix)),lt.translate(pt.offsetX,pt.offsetY),lt.scale(pt.scaleX,pt.scaleY),lt.createPattern(pt.canvas,"no-repeat")}}class _t extends Wt{getPattern(){return"hotpink"}}function ht(tt){switch(tt[0]){case"RadialAxial":return new ut(tt);case"Mesh":return new mt(tt);case"Dummy":return new _t}throw new Error(`Unknown IR type: ${tt[0]}`)}const st={COLORED:1,UNCOLORED:2},j=class j{constructor(lt,ot,nt,d,m){this.operatorList=lt[2],this.matrix=lt[3]||[1,0,0,1,0,0],this.bbox=lt[4],this.xstep=lt[5],this.ystep=lt[6],this.paintType=lt[7],this.tilingType=lt[8],this.color=ot,this.ctx=nt,this.canvasGraphicsFactory=d,this.baseTransform=m}createPatternCanvas(lt){const ot=this.operatorList,nt=this.bbox,d=this.xstep,m=this.ystep,pt=this.paintType,Y=this.tilingType,f=this.color,dt=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+Y);const $=nt[0],Tt=nt[1],wt=nt[2],at=nt[3],Rt=o.Util.singularValueDecompose2dScale(this.matrix),Ut=o.Util.singularValueDecompose2dScale(this.baseTransform),$t=[Rt[0]*Ut[0],Rt[1]*Ut[1]],Pt=this.getSizeAndScale(d,this.ctx.canvas.width,$t[0]),Vt=this.getSizeAndScale(m,this.ctx.canvas.height,$t[1]),Kt=lt.cachedCanvases.getCanvas("pattern",Pt.size,Vt.size,!0),ne=Kt.context,re=dt.createCanvasGraphics(ne);re.groupLevel=lt.groupLevel,this.setFillAndStrokeStyleToContext(re,pt,f);let ct=$,a=Tt,h=wt,c=at;return $<0&&(ct=0,h+=Math.abs($)),Tt<0&&(a=0,c+=Math.abs(Tt)),ne.translate(-(Pt.scale*ct),-(Vt.scale*a)),re.transform(Pt.scale,0,0,Vt.scale,0,0),ne.save(),this.clipBbox(re,ct,a,h,c),re.baseTransform=(0,k.getCurrentTransform)(re.ctx),re.executeOperatorList(ot),re.endDrawing(),{canvas:Kt.canvas,scaleX:Pt.scale,scaleY:Vt.scale,offsetX:ct,offsetY:a}}getSizeAndScale(lt,ot,nt){lt=Math.abs(lt);const d=Math.max(j.MAX_PATTERN_SIZE,ot);let m=Math.ceil(lt*nt);return m>=d?m=d:nt=m/lt,{scale:nt,size:m}}clipBbox(lt,ot,nt,d,m){const pt=d-ot,Y=m-nt;lt.ctx.rect(ot,nt,pt,Y),lt.current.updateRectMinMax((0,k.getCurrentTransform)(lt.ctx),[ot,nt,d,m]),lt.clip(),lt.endPath()}setFillAndStrokeStyleToContext(lt,ot,nt){const d=lt.ctx,m=lt.current;switch(ot){case st.COLORED:const pt=this.ctx;d.fillStyle=pt.fillStyle,d.strokeStyle=pt.strokeStyle,m.fillColor=pt.fillStyle,m.strokeColor=pt.strokeStyle;break;case st.UNCOLORED:const Y=o.Util.makeHexColor(nt[0],nt[1],nt[2]);d.fillStyle=Y,d.strokeStyle=Y,m.fillColor=Y,m.strokeColor=Y;break;default:throw new o.FormatError(`Unsupported paint type: ${ot}`)}}getPattern(lt,ot,nt,d){let m=nt;d!==St.SHADING&&(m=o.Util.transform(m,ot.baseTransform),this.matrix&&(m=o.Util.transform(m,this.matrix)));const pt=this.createPatternCanvas(ot);let Y=new DOMMatrix(m);Y=Y.translate(pt.offsetX,pt.offsetY),Y=Y.scale(1/pt.scaleX,1/pt.scaleY);const f=lt.createPattern(pt.canvas,"repeat");return f.setTransform(Y),f}};Ie(j,"MAX_PATTERN_SIZE",3e3);let et=j;s.TilingPattern=et},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=St,s.convertToRGBA=k,s.grayToRGBA=Wt;var o=ft(1);function k(ut){switch(ut.kind){case o.ImageKind.GRAYSCALE_1BPP:return St(ut);case o.ImageKind.RGB_24BPP:return bt(ut)}return null}function St({src:ut,srcPos:rt=0,dest:X,width:mt,height:_t,nonBlackColor:ht=4294967295,inverseDecode:st=!1}){const et=o.FeatureTest.isLittleEndian?4278190080:255,[j,tt]=st?[ht,et]:[et,ht],lt=mt>>3,ot=mt&7,nt=ut.length;X=new Uint32Array(X.buffer);let d=0;for(let m=0;m<_t;m++){for(const Y=rt+lt;rt<Y;rt++){const f=rt<nt?ut[rt]:255;X[d++]=f&128?tt:j,X[d++]=f&64?tt:j,X[d++]=f&32?tt:j,X[d++]=f&16?tt:j,X[d++]=f&8?tt:j,X[d++]=f&4?tt:j,X[d++]=f&2?tt:j,X[d++]=f&1?tt:j}if(ot===0)continue;const pt=rt<nt?ut[rt++]:255;for(let Y=0;Y<ot;Y++)X[d++]=pt&1<<7-Y?tt:j}return{srcPos:rt,destPos:d}}function bt({src:ut,srcPos:rt=0,dest:X,destPos:mt=0,width:_t,height:ht}){let st=0;const et=ut.length>>2,j=new Uint32Array(ut.buffer,rt,et);if(o.FeatureTest.isLittleEndian){for(;st<et-2;st+=3,mt+=4){const tt=j[st],lt=j[st+1],ot=j[st+2];X[mt]=tt|4278190080,X[mt+1]=tt>>>24|lt<<8|4278190080,X[mt+2]=lt>>>16|ot<<16|4278190080,X[mt+3]=ot>>>8|4278190080}for(let tt=st*4,lt=ut.length;tt<lt;tt+=3)X[mt++]=ut[tt]|ut[tt+1]<<8|ut[tt+2]<<16|4278190080}else{for(;st<et-2;st+=3,mt+=4){const tt=j[st],lt=j[st+1],ot=j[st+2];X[mt]=tt|255,X[mt+1]=tt<<24|lt>>>8|255,X[mt+2]=lt<<16|ot>>>16|255,X[mt+3]=ot<<8|255}for(let tt=st*4,lt=ut.length;tt<lt;tt+=3)X[mt++]=ut[tt]<<24|ut[tt+1]<<16|ut[tt+2]<<8|255}return{srcPos:rt,destPos:mt}}function Wt(ut,rt){if(o.FeatureTest.isLittleEndian)for(let X=0,mt=ut.length;X<mt;X++)rt[X]=ut[X]*65793|4278190080;else for(let X=0,mt=ut.length;X<mt;X++)rt[X]=ut[X]*16843008|255}},(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const ft=Object.create(null);s.GlobalWorkerOptions=ft,ft.workerPort=null,ft.workerSrc=""},(b,s,ft)=>{var ut,hs,X,us,_t,hn;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var o=ft(1);const k={UNKNOWN:0,DATA:1,ERROR:2},St={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function bt(st){switch(st instanceof Error||typeof st=="object"&&st!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),st.name){case"AbortException":return new o.AbortException(st.message);case"MissingPDFException":return new o.MissingPDFException(st.message);case"PasswordException":return new o.PasswordException(st.message,st.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(st.message,st.status);case"UnknownErrorException":return new o.UnknownErrorException(st.message,st.details);default:return new o.UnknownErrorException(st.message,st.toString())}}class Wt{constructor(et,j,tt){Et(this,ut);Et(this,X);Et(this,_t);this.sourceName=et,this.targetName=j,this.comObj=tt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=lt=>{const ot=lt.data;if(ot.targetName!==this.sourceName)return;if(ot.stream){xt(this,X,us).call(this,ot);return}if(ot.callback){const d=ot.callbackId,m=this.callbackCapabilities[d];if(!m)throw new Error(`Cannot resolve callback ${d}`);if(delete this.callbackCapabilities[d],ot.callback===k.DATA)m.resolve(ot.data);else if(ot.callback===k.ERROR)m.reject(bt(ot.reason));else throw new Error("Unexpected callback case");return}const nt=this.actionHandler[ot.action];if(!nt)throw new Error(`Unknown action from worker: ${ot.action}`);if(ot.callbackId){const d=this.sourceName,m=ot.sourceName;new Promise(function(pt){pt(nt(ot.data))}).then(function(pt){tt.postMessage({sourceName:d,targetName:m,callback:k.DATA,callbackId:ot.callbackId,data:pt})},function(pt){tt.postMessage({sourceName:d,targetName:m,callback:k.ERROR,callbackId:ot.callbackId,reason:bt(pt)})});return}if(ot.streamId){xt(this,ut,hs).call(this,ot);return}nt(ot.data)},tt.addEventListener("message",this._onComObjOnMessage)}on(et,j){const tt=this.actionHandler;if(tt[et])throw new Error(`There is already an actionName called "${et}"`);tt[et]=j}send(et,j,tt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:et,data:j},tt)}sendWithPromise(et,j,tt){const lt=this.callbackId++,ot=new o.PromiseCapability;this.callbackCapabilities[lt]=ot;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:et,callbackId:lt,data:j},tt)}catch(nt){ot.reject(nt)}return ot.promise}sendWithStream(et,j,tt,lt){const ot=this.streamId++,nt=this.sourceName,d=this.targetName,m=this.comObj;return new ReadableStream({start:pt=>{const Y=new o.PromiseCapability;return this.streamControllers[ot]={controller:pt,startCall:Y,pullCall:null,cancelCall:null,isClosed:!1},m.postMessage({sourceName:nt,targetName:d,action:et,streamId:ot,data:j,desiredSize:pt.desiredSize},lt),Y.promise},pull:pt=>{const Y=new o.PromiseCapability;return this.streamControllers[ot].pullCall=Y,m.postMessage({sourceName:nt,targetName:d,stream:St.PULL,streamId:ot,desiredSize:pt.desiredSize}),Y.promise},cancel:pt=>{(0,o.assert)(pt instanceof Error,"cancel must have a valid reason");const Y=new o.PromiseCapability;return this.streamControllers[ot].cancelCall=Y,this.streamControllers[ot].isClosed=!0,m.postMessage({sourceName:nt,targetName:d,stream:St.CANCEL,streamId:ot,reason:bt(pt)}),Y.promise}},tt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ut=new WeakSet,hs=function(et){const j=et.streamId,tt=this.sourceName,lt=et.sourceName,ot=this.comObj,nt=this,d=this.actionHandler[et.action],m={enqueue(pt,Y=1,f){if(this.isCancelled)return;const dt=this.desiredSize;this.desiredSize-=Y,dt>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),ot.postMessage({sourceName:tt,targetName:lt,stream:St.ENQUEUE,streamId:j,chunk:pt},f)},close(){this.isCancelled||(this.isCancelled=!0,ot.postMessage({sourceName:tt,targetName:lt,stream:St.CLOSE,streamId:j}),delete nt.streamSinks[j])},error(pt){(0,o.assert)(pt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ot.postMessage({sourceName:tt,targetName:lt,stream:St.ERROR,streamId:j,reason:bt(pt)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:et.desiredSize,ready:null};m.sinkCapability.resolve(),m.ready=m.sinkCapability.promise,this.streamSinks[j]=m,new Promise(function(pt){pt(d(et.data,m))}).then(function(){ot.postMessage({sourceName:tt,targetName:lt,stream:St.START_COMPLETE,streamId:j,success:!0})},function(pt){ot.postMessage({sourceName:tt,targetName:lt,stream:St.START_COMPLETE,streamId:j,reason:bt(pt)})})},X=new WeakSet,us=function(et){const j=et.streamId,tt=this.sourceName,lt=et.sourceName,ot=this.comObj,nt=this.streamControllers[j],d=this.streamSinks[j];switch(et.stream){case St.START_COMPLETE:et.success?nt.startCall.resolve():nt.startCall.reject(bt(et.reason));break;case St.PULL_COMPLETE:et.success?nt.pullCall.resolve():nt.pullCall.reject(bt(et.reason));break;case St.PULL:if(!d){ot.postMessage({sourceName:tt,targetName:lt,stream:St.PULL_COMPLETE,streamId:j,success:!0});break}d.desiredSize<=0&&et.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=et.desiredSize,new Promise(function(m){var pt;m((pt=d.onPull)==null?void 0:pt.call(d))}).then(function(){ot.postMessage({sourceName:tt,targetName:lt,stream:St.PULL_COMPLETE,streamId:j,success:!0})},function(m){ot.postMessage({sourceName:tt,targetName:lt,stream:St.PULL_COMPLETE,streamId:j,reason:bt(m)})});break;case St.ENQUEUE:if((0,o.assert)(nt,"enqueue should have stream controller"),nt.isClosed)break;nt.controller.enqueue(et.chunk);break;case St.CLOSE:if((0,o.assert)(nt,"close should have stream controller"),nt.isClosed)break;nt.isClosed=!0,nt.controller.close(),xt(this,_t,hn).call(this,nt,j);break;case St.ERROR:(0,o.assert)(nt,"error should have stream controller"),nt.controller.error(bt(et.reason)),xt(this,_t,hn).call(this,nt,j);break;case St.CANCEL_COMPLETE:et.success?nt.cancelCall.resolve():nt.cancelCall.reject(bt(et.reason)),xt(this,_t,hn).call(this,nt,j);break;case St.CANCEL:if(!d)break;new Promise(function(m){var pt;m((pt=d.onCancel)==null?void 0:pt.call(d,bt(et.reason)))}).then(function(){ot.postMessage({sourceName:tt,targetName:lt,stream:St.CANCEL_COMPLETE,streamId:j,success:!0})},function(m){ot.postMessage({sourceName:tt,targetName:lt,stream:St.CANCEL_COMPLETE,streamId:j,reason:bt(m)})}),d.sinkCapability.reject(bt(et.reason)),d.isCancelled=!0,delete this.streamSinks[j];break;default:throw new Error("Unexpected stream case")}},_t=new WeakSet,hn=async function(et,j){var tt,lt,ot;await Promise.allSettled([(tt=et.startCall)==null?void 0:tt.promise,(lt=et.pullCall)==null?void 0:lt.promise,(ot=et.cancelCall)==null?void 0:ot.promise]),delete this.streamControllers[j]},s.MessageHandler=Wt},(b,s,ft)=>{var St,bt;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var o=ft(1);class k{constructor({parsedData:ut,rawData:rt}){Et(this,St,void 0);Et(this,bt,void 0);jt(this,St,ut),jt(this,bt,rt)}getRaw(){return e(this,bt)}get(ut){return e(this,St).get(ut)??null}getAll(){return(0,o.objectFromMap)(e(this,St))}has(ut){return e(this,St).has(ut)}}St=new WeakMap,bt=new WeakMap,s.Metadata=k},(b,s,ft)=>{var ut,rt,X,mt,_t,ht,In;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var o=ft(1),k=ft(8);const St=Symbol("INTERNAL");class bt{constructor(j,tt){Et(this,ut,!0);this.name=j,this.intent=tt}get visible(){return e(this,ut)}_setVisible(j,tt){j!==St&&(0,o.unreachable)("Internal method `_setVisible` called."),jt(this,ut,tt)}}ut=new WeakMap;class Wt{constructor(j){Et(this,ht);Et(this,rt,null);Et(this,X,new Map);Et(this,mt,null);Et(this,_t,null);if(this.name=null,this.creator=null,j!==null){this.name=j.name,this.creator=j.creator,jt(this,_t,j.order);for(const tt of j.groups)e(this,X).set(tt.id,new bt(tt.name,tt.intent));if(j.baseState==="OFF")for(const tt of e(this,X).values())tt._setVisible(St,!1);for(const tt of j.on)e(this,X).get(tt)._setVisible(St,!0);for(const tt of j.off)e(this,X).get(tt)._setVisible(St,!1);jt(this,mt,this.getHash())}}isVisible(j){if(e(this,X).size===0)return!0;if(!j)return(0,o.warn)("Optional content group not defined."),!0;if(j.type==="OCG")return e(this,X).has(j.id)?e(this,X).get(j.id).visible:((0,o.warn)(`Optional content group not found: ${j.id}`),!0);if(j.type==="OCMD"){if(j.expression)return xt(this,ht,In).call(this,j.expression);if(!j.policy||j.policy==="AnyOn"){for(const tt of j.ids){if(!e(this,X).has(tt))return(0,o.warn)(`Optional content group not found: ${tt}`),!0;if(e(this,X).get(tt).visible)return!0}return!1}else if(j.policy==="AllOn"){for(const tt of j.ids){if(!e(this,X).has(tt))return(0,o.warn)(`Optional content group not found: ${tt}`),!0;if(!e(this,X).get(tt).visible)return!1}return!0}else if(j.policy==="AnyOff"){for(const tt of j.ids){if(!e(this,X).has(tt))return(0,o.warn)(`Optional content group not found: ${tt}`),!0;if(!e(this,X).get(tt).visible)return!0}return!1}else if(j.policy==="AllOff"){for(const tt of j.ids){if(!e(this,X).has(tt))return(0,o.warn)(`Optional content group not found: ${tt}`),!0;if(e(this,X).get(tt).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${j.policy}.`),!0}return(0,o.warn)(`Unknown group type ${j.type}.`),!0}setVisibility(j,tt=!0){if(!e(this,X).has(j)){(0,o.warn)(`Optional content group not found: ${j}`);return}e(this,X).get(j)._setVisible(St,!!tt),jt(this,rt,null)}get hasInitialVisibility(){return e(this,mt)===null||this.getHash()===e(this,mt)}getOrder(){return e(this,X).size?e(this,_t)?e(this,_t).slice():[...e(this,X).keys()]:null}getGroups(){return e(this,X).size>0?(0,o.objectFromMap)(e(this,X)):null}getGroup(j){return e(this,X).get(j)||null}getHash(){if(e(this,rt)!==null)return e(this,rt);const j=new k.MurmurHash3_64;for(const[tt,lt]of e(this,X))j.update(`${tt}:${lt.visible}`);return jt(this,rt,j.hexdigest())}}rt=new WeakMap,X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakSet,In=function(j){const tt=j.length;if(tt<2)return!0;const lt=j[0];for(let ot=1;ot<tt;ot++){const nt=j[ot];let d;if(Array.isArray(nt))d=xt(this,ht,In).call(this,nt);else if(e(this,X).has(nt))d=e(this,X).get(nt).visible;else return(0,o.warn)(`Optional content group not found: ${nt}`),!0;switch(lt){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return lt==="And"},s.OptionalContentConfig=Wt},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var o=ft(1),k=ft(6);class St{constructor({length:rt,initialData:X,progressiveDone:mt=!1,contentDispositionFilename:_t=null,disableRange:ht=!1,disableStream:st=!1},et){if((0,o.assert)(et,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=mt,this._contentDispositionFilename=_t,(X==null?void 0:X.length)>0){const j=X instanceof Uint8Array&&X.byteLength===X.buffer.byteLength?X.buffer:new Uint8Array(X).buffer;this._queuedChunks.push(j)}this._pdfDataRangeTransport=et,this._isStreamingSupported=!st,this._isRangeSupported=!ht,this._contentLength=rt,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((j,tt)=>{this._onReceiveData({begin:j,chunk:tt})}),this._pdfDataRangeTransport.addProgressListener((j,tt)=>{this._onProgress({loaded:j,total:tt})}),this._pdfDataRangeTransport.addProgressiveReadListener(j=>{this._onReceiveData({chunk:j})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:rt,chunk:X}){const mt=X instanceof Uint8Array&&X.byteLength===X.buffer.byteLength?X.buffer:new Uint8Array(X).buffer;if(rt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(mt):this._queuedChunks.push(mt);else{const _t=this._rangeReaders.some(function(ht){return ht._begin!==rt?!1:(ht._enqueue(mt),!0)});(0,o.assert)(_t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var rt;return((rt=this._fullRequestReader)==null?void 0:rt._loaded)??0}_onProgress(rt){var X,mt,_t,ht;rt.total===void 0?(mt=(X=this._rangeReaders[0])==null?void 0:X.onProgress)==null||mt.call(X,{loaded:rt.loaded}):(ht=(_t=this._fullRequestReader)==null?void 0:_t.onProgress)==null||ht.call(_t,{loaded:rt.loaded,total:rt.total})}_onProgressiveDone(){var rt;(rt=this._fullRequestReader)==null||rt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(rt){const X=this._rangeReaders.indexOf(rt);X>=0&&this._rangeReaders.splice(X,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const rt=this._queuedChunks;return this._queuedChunks=null,new bt(this,rt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(rt,X){if(X<=this._progressiveDataLength)return null;const mt=new Wt(this,rt,X);return this._pdfDataRangeTransport.requestDataRange(rt,X),this._rangeReaders.push(mt),mt}cancelAllRequests(rt){var X;(X=this._fullRequestReader)==null||X.cancel(rt);for(const mt of this._rangeReaders.slice(0))mt.cancel(rt);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=St;class bt{constructor(rt,X,mt=!1,_t=null){this._stream=rt,this._done=mt||!1,this._filename=(0,k.isPdfFile)(_t)?_t:null,this._queuedChunks=X||[],this._loaded=0;for(const ht of this._queuedChunks)this._loaded+=ht.byteLength;this._requests=[],this._headersReady=Promise.resolve(),rt._fullRequestReader=this,this.onProgress=null}_enqueue(rt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:rt,done:!1}):this._queuedChunks.push(rt),this._loaded+=rt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const rt=new o.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0;for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Wt{constructor(rt,X,mt){this._stream=rt,this._begin=X,this._end=mt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(rt){if(!this._done){if(this._requests.length===0)this._queuedChunk=rt;else{this._requests.shift().resolve({value:rt,done:!1});for(const mt of this._requests)mt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const X=this._queuedChunk;return this._queuedChunk=null,{value:X,done:!1}}if(this._done)return{value:void 0,done:!0};const rt=new o.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0;for(const X of this._requests)X.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var o=ft(1),k=ft(20);function St(mt,_t,ht){return{method:"GET",headers:mt,signal:ht.signal,mode:"cors",credentials:_t?"include":"same-origin",redirect:"follow"}}function bt(mt){const _t=new Headers;for(const ht in mt){const st=mt[ht];st!==void 0&&_t.append(ht,st)}return _t}function Wt(mt){return mt instanceof Uint8Array?mt.buffer:mt instanceof ArrayBuffer?mt:((0,o.warn)(`getArrayBuffer - unexpected data format: ${mt}`),new Uint8Array(mt).buffer)}class ut{constructor(_t){this.source=_t,this.isHttp=/^https?:/i.test(_t.url),this.httpHeaders=this.isHttp&&_t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _t;return((_t=this._fullRequestReader)==null?void 0:_t._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rt(this),this._fullRequestReader}getRangeReader(_t,ht){if(ht<=this._progressiveDataLength)return null;const st=new X(this,_t,ht);return this._rangeRequestReaders.push(st),st}cancelAllRequests(_t){var ht;(ht=this._fullRequestReader)==null||ht.cancel(_t);for(const st of this._rangeRequestReaders.slice(0))st.cancel(_t)}}s.PDFFetchStream=ut;class rt{constructor(_t){this._stream=_t,this._reader=null,this._loaded=0,this._filename=null;const ht=_t.source;this._withCredentials=ht.withCredentials||!1,this._contentLength=ht.length,this._headersCapability=new o.PromiseCapability,this._disableRange=ht.disableRange||!1,this._rangeChunkSize=ht.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ht.disableStream,this._isRangeSupported=!ht.disableRange,this._headers=bt(this._stream.httpHeaders);const st=ht.url;fetch(st,St(this._headers,this._withCredentials,this._abortController)).then(et=>{if(!(0,k.validateResponseStatus)(et.status))throw(0,k.createResponseStatusError)(et.status,st);this._reader=et.body.getReader(),this._headersCapability.resolve();const j=ot=>et.headers.get(ot),{allowRangeRequests:tt,suggestedLength:lt}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:j,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=tt,this._contentLength=lt||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(j),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;await this._headersCapability.promise;const{value:_t,done:ht}=await this._reader.read();return ht?{value:_t,done:ht}:(this._loaded+=_t.byteLength,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Wt(_t),done:!1})}cancel(_t){var ht;(ht=this._reader)==null||ht.cancel(_t),this._abortController.abort()}}class X{constructor(_t,ht,st){this._stream=_t,this._reader=null,this._loaded=0;const et=_t.source;this._withCredentials=et.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!et.disableStream,this._abortController=new AbortController,this._headers=bt(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ht}-${st-1}`);const j=et.url;fetch(j,St(this._headers,this._withCredentials,this._abortController)).then(tt=>{if(!(0,k.validateResponseStatus)(tt.status))throw(0,k.createResponseStatusError)(tt.status,j);this._readCapability.resolve(),this._reader=tt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;await this._readCapability.promise;const{value:_t,done:ht}=await this._reader.read();return ht?{value:_t,done:ht}:(this._loaded+=_t.byteLength,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded}),{value:Wt(_t),done:!1})}cancel(_t){var ht;(ht=this._reader)==null||ht.cancel(_t),this._abortController.abort()}}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=ut,s.extractFilenameFromHeader=Wt,s.validateRangeRequestCapabilities=bt,s.validateResponseStatus=rt;var o=ft(1),k=ft(21),St=ft(6);function bt({getResponseHeader:X,isHttp:mt,rangeChunkSize:_t,disableRange:ht}){const st={allowRangeRequests:!1,suggestedLength:void 0},et=parseInt(X("Content-Length"),10);return!Number.isInteger(et)||(st.suggestedLength=et,et<=2*_t)||ht||!mt||X("Accept-Ranges")!=="bytes"||(X("Content-Encoding")||"identity")!=="identity"||(st.allowRangeRequests=!0),st}function Wt(X){const mt=X("Content-Disposition");if(mt){let _t=(0,k.getFilenameFromContentDispositionHeader)(mt);if(_t.includes("%"))try{_t=decodeURIComponent(_t)}catch{}if((0,St.isPdfFile)(_t))return _t}return null}function ut(X,mt){return X===404||X===0&&mt.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+mt+'".'):new o.UnexpectedResponseException(`Unexpected server response (${X}) while retrieving PDF "${mt}".`,X)}function rt(X){return X===200||X===206}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=k;var o=ft(1);function k(St){let bt=!0,Wt=ut("filename\\*","i").exec(St);if(Wt){Wt=Wt[1];let et=_t(Wt);return et=unescape(et),et=ht(et),et=st(et),X(et)}if(Wt=mt(St),Wt){const et=st(Wt);return X(et)}if(Wt=ut("filename","i").exec(St),Wt){Wt=Wt[1];let et=_t(Wt);return et=st(et),X(et)}function ut(et,j){return new RegExp("(?:^|;)\\s*"+et+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',j)}function rt(et,j){if(et){if(!/^[\x00-\xFF]+$/.test(j))return j;try{const tt=new TextDecoder(et,{fatal:!0}),lt=(0,o.stringToBytes)(j);j=tt.decode(lt),bt=!1}catch{}}return j}function X(et){return bt&&/[\x80-\xff]/.test(et)&&(et=rt("utf-8",et),bt&&(et=rt("iso-8859-1",et))),et}function mt(et){const j=[];let tt;const lt=ut("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(tt=lt.exec(et))!==null;){let[,nt,d,m]=tt;if(nt=parseInt(nt,10),nt in j){if(nt===0)break;continue}j[nt]=[d,m]}const ot=[];for(let nt=0;nt<j.length&&nt in j;++nt){let[d,m]=j[nt];m=_t(m),d&&(m=unescape(m),nt===0&&(m=ht(m))),ot.push(m)}return ot.join("")}function _t(et){if(et.startsWith('"')){const j=et.slice(1).split('\\"');for(let tt=0;tt<j.length;++tt){const lt=j[tt].indexOf('"');lt!==-1&&(j[tt]=j[tt].slice(0,lt),j.length=tt+1),j[tt]=j[tt].replaceAll(/\\(.)/g,"$1")}et=j.join('"')}return et}function ht(et){const j=et.indexOf("'");if(j===-1)return et;const tt=et.slice(0,j),ot=et.slice(j+1).replace(/^[^']*'/,"");return rt(tt,ot)}function st(et){return!et.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(et)?et:et.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(j,tt,lt,ot){if(lt==="q"||lt==="Q")return ot=ot.replaceAll("_"," "),ot=ot.replaceAll(/=([0-9a-fA-F]{2})/g,function(nt,d){return String.fromCharCode(parseInt(d,16))}),rt(tt,ot);try{ot=atob(ot)}catch{}return rt(tt,ot)})}return""}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var o=ft(1),k=ft(20);const St=200,bt=206;function Wt(_t){const ht=_t.response;return typeof ht!="string"?ht:(0,o.stringToBytes)(ht).buffer}class ut{constructor(ht,st={}){this.url=ht,this.isHttp=/^https?:/i.test(ht),this.httpHeaders=this.isHttp&&st.httpHeaders||Object.create(null),this.withCredentials=st.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ht,st,et){const j={begin:ht,end:st};for(const tt in et)j[tt]=et[tt];return this.request(j)}requestFull(ht){return this.request(ht)}request(ht){const st=new XMLHttpRequest,et=this.currXhrId++,j=this.pendingRequests[et]={xhr:st};st.open("GET",this.url),st.withCredentials=this.withCredentials;for(const tt in this.httpHeaders){const lt=this.httpHeaders[tt];lt!==void 0&&st.setRequestHeader(tt,lt)}return this.isHttp&&"begin"in ht&&"end"in ht?(st.setRequestHeader("Range",`bytes=${ht.begin}-${ht.end-1}`),j.expectedStatus=bt):j.expectedStatus=St,st.responseType="arraybuffer",ht.onError&&(st.onerror=function(tt){ht.onError(st.status)}),st.onreadystatechange=this.onStateChange.bind(this,et),st.onprogress=this.onProgress.bind(this,et),j.onHeadersReceived=ht.onHeadersReceived,j.onDone=ht.onDone,j.onError=ht.onError,j.onProgress=ht.onProgress,st.send(null),et}onProgress(ht,st){var j;const et=this.pendingRequests[ht];et&&((j=et.onProgress)==null||j.call(et,st))}onStateChange(ht,st){var nt,d,m;const et=this.pendingRequests[ht];if(!et)return;const j=et.xhr;if(j.readyState>=2&&et.onHeadersReceived&&(et.onHeadersReceived(),delete et.onHeadersReceived),j.readyState!==4||!(ht in this.pendingRequests))return;if(delete this.pendingRequests[ht],j.status===0&&this.isHttp){(nt=et.onError)==null||nt.call(et,j.status);return}const tt=j.status||St;if(!(tt===St&&et.expectedStatus===bt)&&tt!==et.expectedStatus){(d=et.onError)==null||d.call(et,j.status);return}const ot=Wt(j);if(tt===bt){const pt=j.getResponseHeader("Content-Range"),Y=/bytes (\d+)-(\d+)\/(\d+)/.exec(pt);et.onDone({begin:parseInt(Y[1],10),chunk:ot})}else ot?et.onDone({begin:0,chunk:ot}):(m=et.onError)==null||m.call(et,j.status)}getRequestXhr(ht){return this.pendingRequests[ht].xhr}isPendingRequest(ht){return ht in this.pendingRequests}abortRequest(ht){const st=this.pendingRequests[ht].xhr;delete this.pendingRequests[ht],st.abort()}}class rt{constructor(ht){this._source=ht,this._manager=new ut(ht.url,{httpHeaders:ht.httpHeaders,withCredentials:ht.withCredentials}),this._rangeChunkSize=ht.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ht){const st=this._rangeRequestReaders.indexOf(ht);st>=0&&this._rangeRequestReaders.splice(st,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new X(this._manager,this._source),this._fullRequestReader}getRangeReader(ht,st){const et=new mt(this._manager,ht,st);return et.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(et),et}cancelAllRequests(ht){var st;(st=this._fullRequestReader)==null||st.cancel(ht);for(const et of this._rangeRequestReaders.slice(0))et.cancel(ht)}}s.PDFNetworkStream=rt;class X{constructor(ht,st){this._manager=ht;const et={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=st.url,this._fullRequestId=ht.requestFull(et),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=st.disableRange||!1,this._contentLength=st.length,this._rangeChunkSize=st.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ht=this._fullRequestId,st=this._manager.getRequestXhr(ht),et=lt=>st.getResponseHeader(lt),{allowRangeRequests:j,suggestedLength:tt}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:et,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});j&&(this._isRangeSupported=!0),this._contentLength=tt||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(et),this._isRangeSupported&&this._manager.abortRequest(ht),this._headersReceivedCapability.resolve()}_onDone(ht){if(ht&&(this._requests.length>0?this._requests.shift().resolve({value:ht.chunk,done:!1}):this._cachedChunks.push(ht.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const st of this._requests)st.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ht){this._storedError=(0,k.createResponseStatusError)(ht,this._url),this._headersReceivedCapability.reject(this._storedError);for(const st of this._requests)st.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ht){var st;(st=this.onProgress)==null||st.call(this,{loaded:ht.loaded,total:ht.lengthComputable?ht.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ht=new o.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0,this._headersReceivedCapability.reject(ht);for(const st of this._requests)st.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mt{constructor(ht,st,et){this._manager=ht;const j={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ht.url,this._requestId=ht.requestRange(st,et,j),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ht;(ht=this.onClosed)==null||ht.call(this,this)}_onDone(ht){const st=ht.chunk;this._requests.length>0?this._requests.shift().resolve({value:st,done:!1}):this._queuedChunk=st,this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ht){this._storedError=(0,k.createResponseStatusError)(ht,this._url);for(const st of this._requests)st.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ht){var st;this.isStreamingSupported||(st=this.onProgress)==null||st.call(this,{loaded:ht.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const st=this._queuedChunk;return this._queuedChunk=null,{value:st,done:!1}}if(this._done)return{value:void 0,done:!0};const ht=new o.PromiseCapability;return this._requests.push(ht),ht.promise}cancel(ht){this._done=!0;for(const st of this._requests)st.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var o=ft(1),k=ft(20);const St=/^file:\/\/\/[a-zA-Z]:\//;function bt(et){const j=require$$5,tt=j.parse(et);return tt.protocol==="file:"||tt.host?tt:/^[a-z]:[/\\]/i.test(et)?j.parse(`file:///${et}`):(tt.host||(tt.protocol="file:"),tt)}class Wt{constructor(j){this.source=j,this.url=bt(j.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ht(this):new mt(this),this._fullRequestReader}getRangeReader(j,tt){if(tt<=this._progressiveDataLength)return null;const lt=this.isFsUrl?new st(this,j,tt):new _t(this,j,tt);return this._rangeRequestReaders.push(lt),lt}cancelAllRequests(j){var tt;(tt=this._fullRequestReader)==null||tt.cancel(j);for(const lt of this._rangeRequestReaders.slice(0))lt.cancel(j)}}s.PDFNodeStream=Wt;class ut{constructor(j){this._url=j.url,this._done=!1,this._storedError=null,this.onProgress=null;const tt=j.source;this._contentLength=tt.length,this._loaded=0,this._filename=null,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var lt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const j=this._readableStream.read();return j===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=j.length,(lt=this.onProgress)==null||lt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(j).buffer,done:!1})}cancel(j){if(!this._readableStream){this._error(j);return}this._readableStream.destroy(j)}_error(j){this._storedError=j,this._readCapability.resolve()}_setReadableStream(j){this._readableStream=j,j.on("readable",()=>{this._readCapability.resolve()}),j.on("end",()=>{j.destroy(),this._done=!0,this._readCapability.resolve()}),j.on("error",tt=>{this._error(tt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rt{constructor(j){this._url=j.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const tt=j.source;this._isStreamingSupported=!tt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var lt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const j=this._readableStream.read();return j===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=j.length,(lt=this.onProgress)==null||lt.call(this,{loaded:this._loaded}),{value:new Uint8Array(j).buffer,done:!1})}cancel(j){if(!this._readableStream){this._error(j);return}this._readableStream.destroy(j)}_error(j){this._storedError=j,this._readCapability.resolve()}_setReadableStream(j){this._readableStream=j,j.on("readable",()=>{this._readCapability.resolve()}),j.on("end",()=>{j.destroy(),this._done=!0,this._readCapability.resolve()}),j.on("error",tt=>{this._error(tt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function X(et,j){return{protocol:et.protocol,auth:et.auth,host:et.hostname,port:et.port,path:et.path,method:"GET",headers:j}}class mt extends ut{constructor(j){super(j);const tt=lt=>{if(lt.statusCode===404){const m=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(lt);const ot=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:nt,suggestedLength:d}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:ot,isHttp:j.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=nt,this._contentLength=d||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(ot)};if(this._request=null,this._url.protocol==="http:"){const lt=require$$5;this._request=lt.request(X(this._url,j.httpHeaders),tt)}else{const lt=require$$5;this._request=lt.request(X(this._url,j.httpHeaders),tt)}this._request.on("error",lt=>{this._storedError=lt,this._headersCapability.reject(lt)}),this._request.end()}}class _t extends rt{constructor(j,tt,lt){super(j),this._httpHeaders={};for(const nt in j.httpHeaders){const d=j.httpHeaders[nt];d!==void 0&&(this._httpHeaders[nt]=d)}this._httpHeaders.Range=`bytes=${tt}-${lt-1}`;const ot=nt=>{if(nt.statusCode===404){const d=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(nt)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request(X(this._url,this._httpHeaders),ot)}else{const nt=require$$5;this._request=nt.request(X(this._url,this._httpHeaders),ot)}this._request.on("error",nt=>{this._storedError=nt}),this._request.end()}}class ht extends ut{constructor(j){super(j);let tt=decodeURIComponent(this._url.path);St.test(this._url.href)&&(tt=tt.replace(/^\//,""));const lt=require$$5;lt.lstat(tt,(ot,nt)=>{if(ot){ot.code==="ENOENT"&&(ot=new o.MissingPDFException(`Missing PDF "${tt}".`)),this._storedError=ot,this._headersCapability.reject(ot);return}this._contentLength=nt.size,this._setReadableStream(lt.createReadStream(tt)),this._headersCapability.resolve()})}}class st extends rt{constructor(j,tt,lt){super(j);let ot=decodeURIComponent(this._url.path);St.test(this._url.href)&&(ot=ot.replace(/^\//,""));const nt=require$$5;this._setReadableStream(nt.createReadStream(ot,{start:tt,end:lt-1}))}}},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var o=ft(6),k=ft(1);const St={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},bt="http://www.w3.org/XML/1998/namespace",Wt="http://www.w3.org/1999/xlink",ut=["butt","round","square"],rt=["miter","round","bevel"],X=function(nt,d="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([nt],{type:d}));const pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Y=`data:${d};base64,`;for(let f=0,dt=nt.length;f<dt;f+=3){const $=nt[f]&255,Tt=nt[f+1]&255,wt=nt[f+2]&255,at=$>>2,Rt=($&3)<<4|Tt>>4,Ut=f+1<dt?(Tt&15)<<2|wt>>6:64,$t=f+2<dt?wt&63:64;Y+=pt[at]+pt[Rt]+pt[Ut]+pt[$t]}return Y},mt=function(){const nt=new Uint8Array([137,80,78,71,13,10,26,10]),d=12,m=new Int32Array(256);for(let wt=0;wt<256;wt++){let at=wt;for(let Rt=0;Rt<8;Rt++)at=at&1?3988292384^at>>1&2147483647:at>>1&2147483647;m[wt]=at}function pt(wt,at,Rt){let Ut=-1;for(let $t=at;$t<Rt;$t++){const Pt=(Ut^wt[$t])&255,Vt=m[Pt];Ut=Ut>>>8^Vt}return Ut^-1}function Y(wt,at,Rt,Ut){let $t=Ut;const Pt=at.length;Rt[$t]=Pt>>24&255,Rt[$t+1]=Pt>>16&255,Rt[$t+2]=Pt>>8&255,Rt[$t+3]=Pt&255,$t+=4,Rt[$t]=wt.charCodeAt(0)&255,Rt[$t+1]=wt.charCodeAt(1)&255,Rt[$t+2]=wt.charCodeAt(2)&255,Rt[$t+3]=wt.charCodeAt(3)&255,$t+=4,Rt.set(at,$t),$t+=at.length;const Vt=pt(Rt,Ut+4,$t);Rt[$t]=Vt>>24&255,Rt[$t+1]=Vt>>16&255,Rt[$t+2]=Vt>>8&255,Rt[$t+3]=Vt&255}function f(wt,at,Rt){let Ut=1,$t=0;for(let Pt=at;Pt<Rt;++Pt)Ut=(Ut+(wt[Pt]&255))%65521,$t=($t+Ut)%65521;return $t<<16|Ut}function dt(wt){if(!k.isNodeJS)return $(wt);try{const at=parseInt(browser$1.versions.node)>=8?wt:Buffer.from(wt),Rt=require$$5.deflateSync(at,{level:9});return Rt instanceof Uint8Array?Rt:new Uint8Array(Rt)}catch(at){(0,k.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return $(wt)}function $(wt){let at=wt.length;const Rt=65535,Ut=Math.ceil(at/Rt),$t=new Uint8Array(2+at+Ut*5+4);let Pt=0;$t[Pt++]=120,$t[Pt++]=156;let Vt=0;for(;at>Rt;)$t[Pt++]=0,$t[Pt++]=255,$t[Pt++]=255,$t[Pt++]=0,$t[Pt++]=0,$t.set(wt.subarray(Vt,Vt+Rt),Pt),Pt+=Rt,Vt+=Rt,at-=Rt;$t[Pt++]=1,$t[Pt++]=at&255,$t[Pt++]=at>>8&255,$t[Pt++]=~at&65535&255,$t[Pt++]=(~at&65535)>>8&255,$t.set(wt.subarray(Vt),Pt),Pt+=wt.length-Vt;const Kt=f(wt,0,wt.length);return $t[Pt++]=Kt>>24&255,$t[Pt++]=Kt>>16&255,$t[Pt++]=Kt>>8&255,$t[Pt++]=Kt&255,$t}function Tt(wt,at,Rt,Ut){const $t=wt.width,Pt=wt.height;let Vt,Kt,ne;const re=wt.data;switch(at){case k.ImageKind.GRAYSCALE_1BPP:Kt=0,Vt=1,ne=$t+7>>3;break;case k.ImageKind.RGB_24BPP:Kt=2,Vt=8,ne=$t*3;break;case k.ImageKind.RGBA_32BPP:Kt=6,Vt=8,ne=$t*4;break;default:throw new Error("invalid format")}const ct=new Uint8Array((1+ne)*Pt);let a=0,h=0;for(let vt=0;vt<Pt;++vt)ct[a++]=0,ct.set(re.subarray(h,h+ne),a),h+=ne,a+=ne;if(at===k.ImageKind.GRAYSCALE_1BPP&&Ut){a=0;for(let vt=0;vt<Pt;vt++){a++;for(let Bt=0;Bt<ne;Bt++)ct[a++]^=255}}const c=new Uint8Array([$t>>24&255,$t>>16&255,$t>>8&255,$t&255,Pt>>24&255,Pt>>16&255,Pt>>8&255,Pt&255,Vt,Kt,0,0,0]),g=dt(ct),_=nt.length+d*3+c.length+g.length,it=new Uint8Array(_);let gt=0;return it.set(nt,gt),gt+=nt.length,Y("IHDR",c,it,gt),gt+=d+c.length,Y("IDATA",g,it,gt),gt+=d+g.length,Y("IEND",new Uint8Array(0),it,gt),X(it,"image/png",Rt)}return function(at,Rt,Ut){const $t=at.kind===void 0?k.ImageKind.GRAYSCALE_1BPP:at.kind;return Tt(at,$t,Rt,Ut)}}();class _t{constructor(){this.fontSizeScale=1,this.fontWeight=St.fontWeight,this.fontSize=0,this.textMatrix=k.IDENTITY_MATRIX,this.fontMatrix=k.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=k.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=St.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(d,m){this.x=d,this.y=m}}function ht(nt){let d=[];const m=[];for(const pt of nt){if(pt.fn==="save"){d.push({fnId:92,fn:"group",items:[]}),m.push(d),d=d.at(-1).items;continue}pt.fn==="restore"?d=m.pop():d.push(pt)}return d}function st(nt){if(Number.isInteger(nt))return nt.toString();const d=nt.toFixed(10);let m=d.length-1;if(d[m]!=="0")return d;do m--;while(d[m]==="0");return d.substring(0,d[m]==="."?m:m+1)}function et(nt){if(nt[4]===0&&nt[5]===0){if(nt[1]===0&&nt[2]===0)return nt[0]===1&&nt[3]===1?"":`scale(${st(nt[0])} ${st(nt[3])})`;if(nt[0]===nt[3]&&nt[1]===-nt[2]){const d=Math.acos(nt[0])*180/Math.PI;return`rotate(${st(d)})`}}else if(nt[0]===1&&nt[1]===0&&nt[2]===0&&nt[3]===1)return`translate(${st(nt[4])} ${st(nt[5])})`;return`matrix(${st(nt[0])} ${st(nt[1])} ${st(nt[2])} ${st(nt[3])} ${st(nt[4])} ${st(nt[5])})`}let j=0,tt=0,lt=0;class ot{constructor(d,m,pt=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new _t,this.transformMatrix=k.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=d,this.objs=m,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!pt,this._operatorIdMapping=[];for(const Y in k.OPS)this._operatorIdMapping[k.OPS[Y]]=Y}getObject(d,m=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):m}save(){this.transformStack.push(this.transformMatrix);const d=this.current;this.extraStack.push(d),this.current=d.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(d){this.save(),this.executeOpTree(d),this.restore()}loadDependencies(d){const m=d.fnArray,pt=d.argsArray;for(let Y=0,f=m.length;Y<f;Y++)if(m[Y]===k.OPS.dependency)for(const dt of pt[Y]){const $=dt.startsWith("g_")?this.commonObjs:this.objs,Tt=new Promise(wt=>{$.get(dt,wt)});this.current.dependencies.push(Tt)}return Promise.all(this.current.dependencies)}transform(d,m,pt,Y,f,dt){const $=[d,m,pt,Y,f,dt];this.transformMatrix=k.Util.transform(this.transformMatrix,$),this.tgrp=null}getSVG(d,m){this.viewport=m;const pt=this._initialize(m);return this.loadDependencies(d).then(()=>(this.transformMatrix=k.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(d)),pt))}convertOpList(d){const m=this._operatorIdMapping,pt=d.argsArray,Y=d.fnArray,f=[];for(let dt=0,$=Y.length;dt<$;dt++){const Tt=Y[dt];f.push({fnId:Tt,fn:m[Tt],args:pt[dt]})}return ht(f)}executeOpTree(d){for(const m of d){const pt=m.fn,Y=m.fnId,f=m.args;switch(Y|0){case k.OPS.beginText:this.beginText();break;case k.OPS.dependency:break;case k.OPS.setLeading:this.setLeading(f);break;case k.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case k.OPS.setFont:this.setFont(f);break;case k.OPS.showText:this.showText(f[0]);break;case k.OPS.showSpacedText:this.showText(f[0]);break;case k.OPS.endText:this.endText();break;case k.OPS.moveText:this.moveText(f[0],f[1]);break;case k.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case k.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case k.OPS.setHScale:this.setHScale(f[0]);break;case k.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case k.OPS.setTextRise:this.setTextRise(f[0]);break;case k.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case k.OPS.setLineWidth:this.setLineWidth(f[0]);break;case k.OPS.setLineJoin:this.setLineJoin(f[0]);break;case k.OPS.setLineCap:this.setLineCap(f[0]);break;case k.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case k.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case k.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case k.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case k.OPS.setFillColorN:this.setFillColorN(f);break;case k.OPS.shadingFill:this.shadingFill(f[0]);break;case k.OPS.setDash:this.setDash(f[0],f[1]);break;case k.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case k.OPS.setFlatness:this.setFlatness(f[0]);break;case k.OPS.setGState:this.setGState(f[0]);break;case k.OPS.fill:this.fill();break;case k.OPS.eoFill:this.eoFill();break;case k.OPS.stroke:this.stroke();break;case k.OPS.fillStroke:this.fillStroke();break;case k.OPS.eoFillStroke:this.eoFillStroke();break;case k.OPS.clip:this.clip("nonzero");break;case k.OPS.eoClip:this.clip("evenodd");break;case k.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case k.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case k.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case k.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case k.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case k.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case k.OPS.closePath:this.closePath();break;case k.OPS.closeStroke:this.closeStroke();break;case k.OPS.closeFillStroke:this.closeFillStroke();break;case k.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case k.OPS.nextLine:this.nextLine();break;case k.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case k.OPS.constructPath:this.constructPath(f[0],f[1]);break;case k.OPS.endPath:this.endPath();break;case 92:this.group(m.items);break;default:(0,k.warn)(`Unimplemented operator ${pt}`);break}}}setWordSpacing(d){this.current.wordSpacing=d}setCharSpacing(d){this.current.charSpacing=d}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(d,m,pt,Y,f,dt){const $=this.current;$.textMatrix=$.lineMatrix=[d,m,pt,Y,f,dt],$.textMatrixScale=Math.hypot(d,m),$.x=$.lineX=0,$.y=$.lineY=0,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${st($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",st(-$.y)),$.txtElement=this.svgFactory.createElement("svg:text"),$.txtElement.append($.tspan)}beginText(){const d=this.current;d.x=d.lineX=0,d.y=d.lineY=0,d.textMatrix=k.IDENTITY_MATRIX,d.lineMatrix=k.IDENTITY_MATRIX,d.textMatrixScale=1,d.tspan=this.svgFactory.createElement("svg:tspan"),d.txtElement=this.svgFactory.createElement("svg:text"),d.txtgrp=this.svgFactory.createElement("svg:g"),d.xcoords=[],d.ycoords=[]}moveText(d,m){const pt=this.current;pt.x=pt.lineX+=d,pt.y=pt.lineY+=m,pt.xcoords=[],pt.ycoords=[],pt.tspan=this.svgFactory.createElement("svg:tspan"),pt.tspan.setAttributeNS(null,"font-family",pt.fontFamily),pt.tspan.setAttributeNS(null,"font-size",`${st(pt.fontSize)}px`),pt.tspan.setAttributeNS(null,"y",st(-pt.y))}showText(d){const m=this.current,pt=m.font,Y=m.fontSize;if(Y===0)return;const f=m.fontSizeScale,dt=m.charSpacing,$=m.wordSpacing,Tt=m.fontDirection,wt=m.textHScale*Tt,at=pt.vertical,Rt=at?1:-1,Ut=pt.defaultVMetrics,$t=Y*m.fontMatrix[0];let Pt=0;for(const ne of d){if(ne===null){Pt+=Tt*$;continue}else if(typeof ne=="number"){Pt+=Rt*ne*Y/1e3;continue}const re=(ne.isSpace?$:0)+dt,ct=ne.fontChar;let a,h,c=ne.width;if(at){let _;const it=ne.vmetric||Ut;_=ne.vmetric?it[1]:c*.5,_=-_*$t;const gt=it[2]*$t;c=it?-it[0]:c,a=_/f,h=(Pt+gt)/f}else a=Pt/f,h=0;(ne.isInFont||pt.missingFile)&&(m.xcoords.push(m.x+a),at&&m.ycoords.push(-m.y+h),m.tspan.textContent+=ct);const g=at?c*$t-re*Tt:c*$t+re*Tt;Pt+=g}m.tspan.setAttributeNS(null,"x",m.xcoords.map(st).join(" ")),at?m.tspan.setAttributeNS(null,"y",m.ycoords.map(st).join(" ")):m.tspan.setAttributeNS(null,"y",st(-m.y)),at?m.y-=Pt:m.x+=Pt*wt,m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${st(m.fontSize)}px`),m.fontStyle!==St.fontStyle&&m.tspan.setAttributeNS(null,"font-style",m.fontStyle),m.fontWeight!==St.fontWeight&&m.tspan.setAttributeNS(null,"font-weight",m.fontWeight);const Vt=m.textRenderingMode&k.TextRenderingMode.FILL_STROKE_MASK;if(Vt===k.TextRenderingMode.FILL||Vt===k.TextRenderingMode.FILL_STROKE?(m.fillColor!==St.fillColor&&m.tspan.setAttributeNS(null,"fill",m.fillColor),m.fillAlpha<1&&m.tspan.setAttributeNS(null,"fill-opacity",m.fillAlpha)):m.textRenderingMode===k.TextRenderingMode.ADD_TO_PATH?m.tspan.setAttributeNS(null,"fill","transparent"):m.tspan.setAttributeNS(null,"fill","none"),Vt===k.TextRenderingMode.STROKE||Vt===k.TextRenderingMode.FILL_STROKE){const ne=1/(m.textMatrixScale||1);this._setStrokeAttributes(m.tspan,ne)}let Kt=m.textMatrix;m.textRise!==0&&(Kt=Kt.slice(),Kt[5]+=m.textRise),m.txtElement.setAttributeNS(null,"transform",`${et(Kt)} scale(${st(wt)}, -1)`),m.txtElement.setAttributeNS(bt,"xml:space","preserve"),m.txtElement.append(m.tspan),m.txtgrp.append(m.txtElement),this._ensureTransformGroup().append(m.txtElement)}setLeadingMoveText(d,m){this.setLeading(-m),this.moveText(d,m)}addFontStyle(d){if(!d.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const m=X(d.data,d.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${d.loadedName}"; src: url(${m}); }
`}setFont(d){const m=this.current,pt=this.commonObjs.get(d[0]);let Y=d[1];m.font=pt,this.embedFonts&&!pt.missingFile&&!this.embeddedFonts[pt.loadedName]&&(this.addFontStyle(pt),this.embeddedFonts[pt.loadedName]=pt),m.fontMatrix=pt.fontMatrix||k.FONT_IDENTITY_MATRIX;let f="normal";pt.black?f="900":pt.bold&&(f="bold");const dt=pt.italic?"italic":"normal";Y<0?(Y=-Y,m.fontDirection=-1):m.fontDirection=1,m.fontSize=Y,m.fontFamily=pt.loadedName,m.fontWeight=f,m.fontStyle=dt,m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"y",st(-m.y)),m.xcoords=[],m.ycoords=[]}endText(){var m;const d=this.current;d.textRenderingMode&k.TextRenderingMode.ADD_TO_PATH_FLAG&&((m=d.txtElement)!=null&&m.hasChildNodes())&&(d.element=d.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(d){d>0&&(this.current.lineWidth=d)}setLineCap(d){this.current.lineCap=ut[d]}setLineJoin(d){this.current.lineJoin=rt[d]}setMiterLimit(d){this.current.miterLimit=d}setStrokeAlpha(d){this.current.strokeAlpha=d}setStrokeRGBColor(d,m,pt){this.current.strokeColor=k.Util.makeHexColor(d,m,pt)}setFillAlpha(d){this.current.fillAlpha=d}setFillRGBColor(d,m,pt){this.current.fillColor=k.Util.makeHexColor(d,m,pt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(d){this.current.strokeColor=this._makeColorN_Pattern(d)}setFillColorN(d){this.current.fillColor=this._makeColorN_Pattern(d)}shadingFill(d){const{width:m,height:pt}=this.viewport,Y=k.Util.inverseTransform(this.transformMatrix),[f,dt,$,Tt]=k.Util.getAxialAlignedBoundingBox([0,0,m,pt],Y),wt=this.svgFactory.createElement("svg:rect");wt.setAttributeNS(null,"x",f),wt.setAttributeNS(null,"y",dt),wt.setAttributeNS(null,"width",$-f),wt.setAttributeNS(null,"height",Tt-dt),wt.setAttributeNS(null,"fill",this._makeShadingPattern(d)),this.current.fillAlpha<1&&wt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(wt)}_makeColorN_Pattern(d){return d[0]==="TilingPattern"?this._makeTilingPattern(d):this._makeShadingPattern(d)}_makeTilingPattern(d){const m=d[1],pt=d[2],Y=d[3]||k.IDENTITY_MATRIX,[f,dt,$,Tt]=d[4],wt=d[5],at=d[6],Rt=d[7],Ut=`shading${lt++}`,[$t,Pt,Vt,Kt]=k.Util.normalizeRect([...k.Util.applyTransform([f,dt],Y),...k.Util.applyTransform([$,Tt],Y)]),[ne,re]=k.Util.singularValueDecompose2dScale(Y),ct=wt*ne,a=at*re,h=this.svgFactory.createElement("svg:pattern");h.setAttributeNS(null,"id",Ut),h.setAttributeNS(null,"patternUnits","userSpaceOnUse"),h.setAttributeNS(null,"width",ct),h.setAttributeNS(null,"height",a),h.setAttributeNS(null,"x",`${$t}`),h.setAttributeNS(null,"y",`${Pt}`);const c=this.svg,g=this.transformMatrix,_=this.current.fillColor,it=this.current.strokeColor,gt=this.svgFactory.create(Vt-$t,Kt-Pt);if(this.svg=gt,this.transformMatrix=Y,Rt===2){const vt=k.Util.makeHexColor(...m);this.current.fillColor=vt,this.current.strokeColor=vt}return this.executeOpTree(this.convertOpList(pt)),this.svg=c,this.transformMatrix=g,this.current.fillColor=_,this.current.strokeColor=it,h.append(gt.childNodes[0]),this.defs.append(h),`url(#${Ut})`}_makeShadingPattern(d){switch(typeof d=="string"&&(d=this.objs.get(d)),d[0]){case"RadialAxial":const m=`shading${lt++}`,pt=d[3];let Y;switch(d[1]){case"axial":const f=d[4],dt=d[5];Y=this.svgFactory.createElement("svg:linearGradient"),Y.setAttributeNS(null,"id",m),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"x1",f[0]),Y.setAttributeNS(null,"y1",f[1]),Y.setAttributeNS(null,"x2",dt[0]),Y.setAttributeNS(null,"y2",dt[1]);break;case"radial":const $=d[4],Tt=d[5],wt=d[6],at=d[7];Y=this.svgFactory.createElement("svg:radialGradient"),Y.setAttributeNS(null,"id",m),Y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Y.setAttributeNS(null,"cx",Tt[0]),Y.setAttributeNS(null,"cy",Tt[1]),Y.setAttributeNS(null,"r",at),Y.setAttributeNS(null,"fx",$[0]),Y.setAttributeNS(null,"fy",$[1]),Y.setAttributeNS(null,"fr",wt);break;default:throw new Error(`Unknown RadialAxial type: ${d[1]}`)}for(const f of pt){const dt=this.svgFactory.createElement("svg:stop");dt.setAttributeNS(null,"offset",f[0]),dt.setAttributeNS(null,"stop-color",f[1]),Y.append(dt)}return this.defs.append(Y),`url(#${m})`;case"Mesh":return(0,k.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${d[0]}`)}}setDash(d,m){this.current.dashArray=d,this.current.dashPhase=m}constructPath(d,m){const pt=this.current;let Y=pt.x,f=pt.y,dt=[],$=0;for(const Tt of d)switch(Tt|0){case k.OPS.rectangle:Y=m[$++],f=m[$++];const wt=m[$++],at=m[$++],Rt=Y+wt,Ut=f+at;dt.push("M",st(Y),st(f),"L",st(Rt),st(f),"L",st(Rt),st(Ut),"L",st(Y),st(Ut),"Z");break;case k.OPS.moveTo:Y=m[$++],f=m[$++],dt.push("M",st(Y),st(f));break;case k.OPS.lineTo:Y=m[$++],f=m[$++],dt.push("L",st(Y),st(f));break;case k.OPS.curveTo:Y=m[$+4],f=m[$+5],dt.push("C",st(m[$]),st(m[$+1]),st(m[$+2]),st(m[$+3]),st(Y),st(f)),$+=6;break;case k.OPS.curveTo2:dt.push("C",st(Y),st(f),st(m[$]),st(m[$+1]),st(m[$+2]),st(m[$+3])),Y=m[$+2],f=m[$+3],$+=4;break;case k.OPS.curveTo3:Y=m[$+2],f=m[$+3],dt.push("C",st(m[$]),st(m[$+1]),st(Y),st(f),st(Y),st(f)),$+=4;break;case k.OPS.closePath:dt.push("Z");break}dt=dt.join(" "),pt.path&&d.length>0&&d[0]!==k.OPS.rectangle&&d[0]!==k.OPS.moveTo?dt=pt.path.getAttributeNS(null,"d")+dt:(pt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(pt.path)),pt.path.setAttributeNS(null,"d",dt),pt.path.setAttributeNS(null,"fill","none"),pt.element=pt.path,pt.setCurrentPoint(Y,f)}endPath(){const d=this.current;if(d.path=null,!this.pendingClip)return;if(!d.element){this.pendingClip=null;return}const m=`clippath${j++}`,pt=this.svgFactory.createElement("svg:clipPath");pt.setAttributeNS(null,"id",m),pt.setAttributeNS(null,"transform",et(this.transformMatrix));const Y=d.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Y.setAttributeNS(null,"clip-rule","evenodd"):Y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,pt.append(Y),this.defs.append(pt),d.activeClipUrl){d.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;pt.setAttributeNS(null,"clip-path",d.activeClipUrl)}d.activeClipUrl=`url(#${m})`,this.tgrp=null}clip(d){this.pendingClip=d}closePath(){const d=this.current;if(d.path){const m=`${d.path.getAttributeNS(null,"d")}Z`;d.path.setAttributeNS(null,"d",m)}}setLeading(d){this.current.leading=-d}setTextRise(d){this.current.textRise=d}setTextRenderingMode(d){this.current.textRenderingMode=d}setHScale(d){this.current.textHScale=d/100}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[m,pt]of d)switch(m){case"LW":this.setLineWidth(pt);break;case"LC":this.setLineCap(pt);break;case"LJ":this.setLineJoin(pt);break;case"ML":this.setMiterLimit(pt);break;case"D":this.setDash(pt[0],pt[1]);break;case"RI":this.setRenderingIntent(pt);break;case"FL":this.setFlatness(pt);break;case"Font":this.setFont(pt);break;case"CA":this.setStrokeAlpha(pt);break;case"ca":this.setFillAlpha(pt);break;default:(0,k.warn)(`Unimplemented graphic state operator ${m}`);break}}fill(){const d=this.current;d.element&&(d.element.setAttributeNS(null,"fill",d.fillColor),d.element.setAttributeNS(null,"fill-opacity",d.fillAlpha),this.endPath())}stroke(){const d=this.current;d.element&&(this._setStrokeAttributes(d.element),d.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(d,m=1){const pt=this.current;let Y=pt.dashArray;m!==1&&Y.length>0&&(Y=Y.map(function(f){return m*f})),d.setAttributeNS(null,"stroke",pt.strokeColor),d.setAttributeNS(null,"stroke-opacity",pt.strokeAlpha),d.setAttributeNS(null,"stroke-miterlimit",st(pt.miterLimit)),d.setAttributeNS(null,"stroke-linecap",pt.lineCap),d.setAttributeNS(null,"stroke-linejoin",pt.lineJoin),d.setAttributeNS(null,"stroke-width",st(m*pt.lineWidth)+"px"),d.setAttributeNS(null,"stroke-dasharray",Y.map(st).join(" ")),d.setAttributeNS(null,"stroke-dashoffset",st(m*pt.dashPhase)+"px")}eoFill(){var d;(d=this.current.element)==null||d.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var d;(d=this.current.element)==null||d.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y","0"),d.setAttributeNS(null,"width","1px"),d.setAttributeNS(null,"height","1px"),d.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(d)}paintImageXObject(d){const m=this.getObject(d);if(!m){(0,k.warn)(`Dependent image with object ID ${d} is not ready yet`);return}this.paintInlineImageXObject(m)}paintInlineImageXObject(d,m){const pt=d.width,Y=d.height,f=mt(d,this.forceDataSchema,!!m),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x","0"),dt.setAttributeNS(null,"y","0"),dt.setAttributeNS(null,"width",st(pt)),dt.setAttributeNS(null,"height",st(Y)),this.current.element=dt,this.clip("nonzero");const $=this.svgFactory.createElement("svg:image");$.setAttributeNS(Wt,"xlink:href",f),$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y",st(-Y)),$.setAttributeNS(null,"width",st(pt)+"px"),$.setAttributeNS(null,"height",st(Y)+"px"),$.setAttributeNS(null,"transform",`scale(${st(1/pt)} ${st(-1/Y)})`),m?m.append($):this._ensureTransformGroup().append($)}paintImageMaskXObject(d){const m=this.getObject(d.data,d);if(m.bitmap){(0,k.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const pt=this.current,Y=m.width,f=m.height,dt=pt.fillColor;pt.maskId=`mask${tt++}`;const $=this.svgFactory.createElement("svg:mask");$.setAttributeNS(null,"id",pt.maskId);const Tt=this.svgFactory.createElement("svg:rect");Tt.setAttributeNS(null,"x","0"),Tt.setAttributeNS(null,"y","0"),Tt.setAttributeNS(null,"width",st(Y)),Tt.setAttributeNS(null,"height",st(f)),Tt.setAttributeNS(null,"fill",dt),Tt.setAttributeNS(null,"mask",`url(#${pt.maskId})`),this.defs.append($),this._ensureTransformGroup().append(Tt),this.paintInlineImageXObject(m,$)}paintFormXObjectBegin(d,m){if(Array.isArray(d)&&d.length===6&&this.transform(d[0],d[1],d[2],d[3],d[4],d[5]),m){const pt=m[2]-m[0],Y=m[3]-m[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",m[0]),f.setAttributeNS(null,"y",m[1]),f.setAttributeNS(null,"width",st(pt)),f.setAttributeNS(null,"height",st(Y)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(d){const m=this.svgFactory.create(d.width,d.height),pt=this.svgFactory.createElement("svg:defs");m.append(pt),this.defs=pt;const Y=this.svgFactory.createElement("svg:g");return Y.setAttributeNS(null,"transform",et(d.transform)),m.append(Y),this.svg=Y,m}_ensureClipGroup(){if(!this.current.clipGroup){const d=this.svgFactory.createElement("svg:g");d.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(d),this.current.clipGroup=d}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",et(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=ot},(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class ft{static textContent(k){const St=[],bt={items:St,styles:Object.create(null)};function Wt(ut){var mt;if(!ut)return;let rt=null;const X=ut.name;if(X==="#text")rt=ut.value;else if(ft.shouldBuildText(X))(mt=ut==null?void 0:ut.attributes)!=null&&mt.textContent?rt=ut.attributes.textContent:ut.value&&(rt=ut.value);else return;if(rt!==null&&St.push({str:rt}),!!ut.children)for(const _t of ut.children)Wt(_t)}return Wt(k),bt}static shouldBuildText(k){return!(k==="textarea"||k==="input"||k==="option"||k==="select")}}s.XfaText=ft},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=et,s.updateTextLayer=j;var o=ft(1),k=ft(6);const St=1e5,bt=30,Wt=.8,ut=new Map;function rt(tt,lt){let ot;if(lt&&o.FeatureTest.isOffscreenCanvasSupported)ot=new OffscreenCanvas(tt,tt).getContext("2d",{alpha:!1});else{const nt=document.createElement("canvas");nt.width=nt.height=tt,ot=nt.getContext("2d",{alpha:!1})}return ot}function X(tt,lt){const ot=ut.get(tt);if(ot)return ot;const nt=rt(bt,lt);nt.font=`${bt}px ${tt}`;const d=nt.measureText("");let m=d.fontBoundingBoxAscent,pt=Math.abs(d.fontBoundingBoxDescent);if(m){const f=m/(m+pt);return ut.set(tt,f),nt.canvas.width=nt.canvas.height=0,f}nt.strokeStyle="red",nt.clearRect(0,0,bt,bt),nt.strokeText("g",0,0);let Y=nt.getImageData(0,0,bt,bt).data;pt=0;for(let f=Y.length-1-3;f>=0;f-=4)if(Y[f]>0){pt=Math.ceil(f/4/bt);break}nt.clearRect(0,0,bt,bt),nt.strokeText("A",0,bt),Y=nt.getImageData(0,0,bt,bt).data,m=0;for(let f=0,dt=Y.length;f<dt;f+=4)if(Y[f]>0){m=bt-Math.floor(f/4/bt);break}if(nt.canvas.width=nt.canvas.height=0,m){const f=m/(m+pt);return ut.set(tt,f),f}return ut.set(tt,Wt),Wt}function mt(tt,lt,ot){const nt=document.createElement("span"),d={angle:0,canvasWidth:0,hasText:lt.str!=="",hasEOL:lt.hasEOL,fontSize:0};tt._textDivs.push(nt);const m=o.Util.transform(tt._transform,lt.transform);let pt=Math.atan2(m[1],m[0]);const Y=ot[lt.fontName];Y.vertical&&(pt+=Math.PI/2);const f=Math.hypot(m[2],m[3]),dt=f*X(Y.fontFamily,tt._isOffscreenCanvasSupported);let $,Tt;pt===0?($=m[4],Tt=m[5]-dt):($=m[4]+dt*Math.sin(pt),Tt=m[5]-dt*Math.cos(pt));const wt="calc(var(--scale-factor)*",at=nt.style;tt._container===tt._rootContainer?(at.left=`${(100*$/tt._pageWidth).toFixed(2)}%`,at.top=`${(100*Tt/tt._pageHeight).toFixed(2)}%`):(at.left=`${wt}${$.toFixed(2)}px)`,at.top=`${wt}${Tt.toFixed(2)}px)`),at.fontSize=`${wt}${f.toFixed(2)}px)`,at.fontFamily=Y.fontFamily,d.fontSize=f,nt.setAttribute("role","presentation"),nt.textContent=lt.str,nt.dir=lt.dir,tt._fontInspectorEnabled&&(nt.dataset.fontName=lt.fontName),pt!==0&&(d.angle=pt*(180/Math.PI));let Rt=!1;if(lt.str.length>1)Rt=!0;else if(lt.str!==" "&&lt.transform[0]!==lt.transform[3]){const Ut=Math.abs(lt.transform[0]),$t=Math.abs(lt.transform[3]);Ut!==$t&&Math.max(Ut,$t)/Math.min(Ut,$t)>1.5&&(Rt=!0)}Rt&&(d.canvasWidth=Y.vertical?lt.height:lt.width),tt._textDivProperties.set(nt,d),tt._isReadableStream&&tt._layoutText(nt)}function _t(tt){const{div:lt,scale:ot,properties:nt,ctx:d,prevFontSize:m,prevFontFamily:pt}=tt,{style:Y}=lt;let f="";if(nt.canvasWidth!==0&&nt.hasText){const{fontFamily:dt}=Y,{canvasWidth:$,fontSize:Tt}=nt;(m!==Tt||pt!==dt)&&(d.font=`${Tt*ot}px ${dt}`,tt.prevFontSize=Tt,tt.prevFontFamily=dt);const{width:wt}=d.measureText(lt.textContent);wt>0&&(f=`scaleX(${$*ot/wt})`)}nt.angle!==0&&(f=`rotate(${nt.angle}deg) ${f}`),f.length>0&&(Y.transform=f)}function ht(tt){if(tt._canceled)return;const lt=tt._textDivs,ot=tt._capability;if(lt.length>St){ot.resolve();return}if(!tt._isReadableStream)for(const d of lt)tt._layoutText(d);ot.resolve()}class st{constructor({textContentSource:lt,container:ot,viewport:nt,textDivs:d,textDivProperties:m,textContentItemsStr:pt,isOffscreenCanvasSupported:Y}){var wt;this._textContentSource=lt,this._isReadableStream=lt instanceof ReadableStream,this._container=this._rootContainer=ot,this._textDivs=d||[],this._textContentItemsStr=pt||[],this._isOffscreenCanvasSupported=Y,this._fontInspectorEnabled=!!((wt=globalThis.FontInspector)!=null&&wt.enabled),this._reader=null,this._textDivProperties=m||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:rt(0,Y)};const{pageWidth:f,pageHeight:dt,pageX:$,pageY:Tt}=nt.rawDims;this._transform=[1,0,0,-1,-$,Tt+dt],this._pageWidth=f,this._pageHeight=dt,(0,k.setLayerDimensions)(ot,nt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(lt,ot){for(const nt of lt){if(nt.str===void 0){if(nt.type==="beginMarkedContentProps"||nt.type==="beginMarkedContent"){const d=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),nt.id!==null&&this._container.setAttribute("id",`${nt.id}`),d.append(this._container)}else nt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(nt.str),mt(this,nt,ot)}}_layoutText(lt){const ot=this._layoutTextParams.properties=this._textDivProperties.get(lt);if(this._layoutTextParams.div=lt,_t(this._layoutTextParams),ot.hasText&&this._container.append(lt),ot.hasEOL){const nt=document.createElement("br");nt.setAttribute("role","presentation"),this._container.append(nt)}}_render(){const lt=new o.PromiseCapability;let ot=Object.create(null);if(this._isReadableStream){const nt=()=>{this._reader.read().then(({value:d,done:m})=>{if(m){lt.resolve();return}Object.assign(ot,d.styles),this._processItems(d.items,ot),nt()},lt.reject)};this._reader=this._textContentSource.getReader(),nt()}else if(this._textContentSource){const{items:nt,styles:d}=this._textContentSource;this._processItems(nt,d),lt.resolve()}else throw new Error('No "textContentSource" parameter specified.');lt.promise.then(()=>{ot=null,ht(this)},this._capability.reject)}}s.TextLayerRenderTask=st;function et(tt){!tt.textContentSource&&(tt.textContent||tt.textContentStream)&&((0,k.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),tt.textContentSource=tt.textContent||tt.textContentStream);const{container:lt,viewport:ot}=tt,nt=getComputedStyle(lt),d=nt.getPropertyValue("visibility"),m=parseFloat(nt.getPropertyValue("--scale-factor"));d==="visible"&&(!m||Math.abs(m-ot.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const pt=new st(tt);return pt._render(),pt}function j({container:tt,viewport:lt,textDivs:ot,textDivProperties:nt,isOffscreenCanvasSupported:d,mustRotate:m=!0,mustRescale:pt=!0}){if(m&&(0,k.setLayerDimensions)(tt,{rotation:lt.rotation}),pt){const Y=rt(0,d),dt={prevFontSize:null,prevFontFamily:null,div:null,scale:lt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Y};for(const $ of ot)dt.properties=nt.get($),dt.div=$,_t(dt)}}},(b,s,ft)=>{var X,mt,_t,ht,st,et,j,tt,lt,ot,nt,Nn,m,un,Y,Bn,dt,Un;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var o=ft(1),k=ft(4),St=ft(28),bt=ft(33),Wt=ft(6),ut=ft(34);const Tt=class Tt{constructor({uiManager:at,pageIndex:Rt,div:Ut,accessibilityManager:$t,annotationLayer:Pt,viewport:Vt,l10n:Kt}){Et(this,nt);Et(this,m);Et(this,Y);Et(this,dt);Et(this,X,void 0);Et(this,mt,!1);Et(this,_t,null);Et(this,ht,this.pointerup.bind(this));Et(this,st,this.pointerdown.bind(this));Et(this,et,new Map);Et(this,j,!1);Et(this,tt,!1);Et(this,lt,!1);Et(this,ot,void 0);const ne=[St.FreeTextEditor,bt.InkEditor,ut.StampEditor];if(!Tt._initialized){Tt._initialized=!0;for(const re of ne)re.initialize(Kt)}at.registerEditorTypes(ne),jt(this,ot,at),this.pageIndex=Rt,this.div=Ut,jt(this,X,$t),jt(this,_t,Pt),this.viewport=Vt,e(this,ot).addLayer(this)}get isEmpty(){return e(this,et).size===0}updateToolbar(at){e(this,ot).updateToolbar(at)}updateMode(at=e(this,ot).getMode()){xt(this,dt,Un).call(this),at===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),at!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",at===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",at===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",at===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(at){if(!at&&e(this,ot).getMode()!==o.AnnotationEditorType.INK)return;if(!at){for(const Ut of e(this,et).values())if(Ut.isEmpty()){Ut.setInBackground();return}}xt(this,m,un).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(at){e(this,ot).setEditingState(at)}addCommands(at){e(this,ot).addCommands(at)}enable(){this.div.style.pointerEvents="auto";const at=new Set;for(const Ut of e(this,et).values())Ut.enableEditing(),Ut.annotationElementId&&at.add(Ut.annotationElementId);if(!e(this,_t))return;const Rt=e(this,_t).getEditableAnnotations();for(const Ut of Rt){if(Ut.hide(),e(this,ot).isDeletedAnnotationElement(Ut.data.id)||at.has(Ut.data.id))continue;const $t=this.deserialize(Ut);$t&&(this.addOrRebuild($t),$t.enableEditing())}}disable(){var Rt;jt(this,lt,!0),this.div.style.pointerEvents="none";const at=new Set;for(const Ut of e(this,et).values()){if(Ut.disableEditing(),!Ut.annotationElementId||Ut.serialize()!==null){at.add(Ut.annotationElementId);continue}(Rt=this.getEditableAnnotation(Ut.annotationElementId))==null||Rt.show(),Ut.remove()}if(e(this,_t)){const Ut=e(this,_t).getEditableAnnotations();for(const $t of Ut){const{id:Pt}=$t.data;at.has(Pt)||e(this,ot).isDeletedAnnotationElement(Pt)||$t.show()}}xt(this,dt,Un).call(this),this.isEmpty&&(this.div.hidden=!0),jt(this,lt,!1)}getEditableAnnotation(at){var Rt;return((Rt=e(this,_t))==null?void 0:Rt.getEditableAnnotation(at))||null}setActiveEditor(at){e(this,ot).getActive()!==at&&e(this,ot).setActiveEditor(at)}enableClick(){this.div.addEventListener("pointerdown",e(this,st)),this.div.addEventListener("pointerup",e(this,ht))}disableClick(){this.div.removeEventListener("pointerdown",e(this,st)),this.div.removeEventListener("pointerup",e(this,ht))}attach(at){e(this,et).set(at.id,at);const{annotationElementId:Rt}=at;Rt&&e(this,ot).isDeletedAnnotationElement(Rt)&&e(this,ot).removeDeletedAnnotationElement(at)}detach(at){var Rt;e(this,et).delete(at.id),(Rt=e(this,X))==null||Rt.removePointerInTextLayer(at.contentDiv),!e(this,lt)&&at.annotationElementId&&e(this,ot).addDeletedAnnotationElement(at)}remove(at){this.detach(at),e(this,ot).removeEditor(at),at.div.contains(document.activeElement)&&setTimeout(()=>{e(this,ot).focusMainContainer()},0),at.div.remove(),at.isAttachedToDOM=!1,e(this,tt)||this.addInkEditorIfNeeded(!1)}changeParent(at){var Rt;at.parent!==this&&(at.annotationElementId&&(e(this,ot).addDeletedAnnotationElement(at.annotationElementId),k.AnnotationEditor.deleteAnnotationElement(at),at.annotationElementId=null),this.attach(at),(Rt=at.parent)==null||Rt.detach(at),at.setParent(this),at.div&&at.isAttachedToDOM&&(at.div.remove(),this.div.append(at.div)))}add(at){if(this.changeParent(at),e(this,ot).addEditor(at),this.attach(at),!at.isAttachedToDOM){const Rt=at.render();this.div.append(Rt),at.isAttachedToDOM=!0}at.fixAndSetPosition(),at.onceAdded(),e(this,ot).addToAnnotationStorage(at)}moveEditorInDOM(at){var Ut;if(!at.isAttachedToDOM)return;const{activeElement:Rt}=document;at.div.contains(Rt)&&(at._focusEventsAllowed=!1,setTimeout(()=>{at.div.contains(document.activeElement)?at._focusEventsAllowed=!0:(at.div.addEventListener("focusin",()=>{at._focusEventsAllowed=!0},{once:!0}),Rt.focus())},0)),at._structTreeParentId=(Ut=e(this,X))==null?void 0:Ut.moveElementInDOM(this.div,at.div,at.contentDiv,!0)}addOrRebuild(at){at.needsToBeRebuilt()?at.rebuild():this.add(at)}addUndoableEditor(at){const Rt=()=>at._uiManager.rebuild(at),Ut=()=>{at.remove()};this.addCommands({cmd:Rt,undo:Ut,mustExec:!1})}getNextId(){return e(this,ot).getId()}pasteEditor(at,Rt){e(this,ot).updateToolbar(at),e(this,ot).updateMode(at);const{offsetX:Ut,offsetY:$t}=xt(this,Y,Bn).call(this),Pt=this.getNextId(),Vt=xt(this,nt,Nn).call(this,{parent:this,id:Pt,x:Ut,y:$t,uiManager:e(this,ot),isCentered:!0,...Rt});Vt&&this.add(Vt)}deserialize(at){switch(at.annotationType??at.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return St.FreeTextEditor.deserialize(at,this,e(this,ot));case o.AnnotationEditorType.INK:return bt.InkEditor.deserialize(at,this,e(this,ot));case o.AnnotationEditorType.STAMP:return ut.StampEditor.deserialize(at,this,e(this,ot))}return null}addNewEditor(){xt(this,m,un).call(this,xt(this,Y,Bn).call(this),!0)}setSelected(at){e(this,ot).setSelected(at)}toggleSelected(at){e(this,ot).toggleSelected(at)}isSelected(at){return e(this,ot).isSelected(at)}unselect(at){e(this,ot).unselect(at)}pointerup(at){const{isMac:Rt}=o.FeatureTest.platform;if(!(at.button!==0||at.ctrlKey&&Rt)&&at.target===this.div&&e(this,j)){if(jt(this,j,!1),!e(this,mt)){jt(this,mt,!0);return}if(e(this,ot).getMode()===o.AnnotationEditorType.STAMP){e(this,ot).unselectAll();return}xt(this,m,un).call(this,at,!1)}}pointerdown(at){if(e(this,j)){jt(this,j,!1);return}const{isMac:Rt}=o.FeatureTest.platform;if(at.button!==0||at.ctrlKey&&Rt||at.target!==this.div)return;jt(this,j,!0);const Ut=e(this,ot).getActive();jt(this,mt,!Ut||Ut.isEmpty())}findNewParent(at,Rt,Ut){const $t=e(this,ot).findParent(Rt,Ut);return $t===null||$t===this?!1:($t.changeParent(at),!0)}destroy(){var at,Rt;((at=e(this,ot).getActive())==null?void 0:at.parent)===this&&(e(this,ot).commitOrRemove(),e(this,ot).setActiveEditor(null));for(const Ut of e(this,et).values())(Rt=e(this,X))==null||Rt.removePointerInTextLayer(Ut.contentDiv),Ut.setParent(null),Ut.isAttachedToDOM=!1,Ut.div.remove();this.div=null,e(this,et).clear(),e(this,ot).removeLayer(this)}render({viewport:at}){this.viewport=at,(0,Wt.setLayerDimensions)(this.div,at);for(const Rt of e(this,ot).getEditors(this.pageIndex))this.add(Rt);this.updateMode()}update({viewport:at}){e(this,ot).commitOrRemove(),this.viewport=at,(0,Wt.setLayerDimensions)(this.div,{rotation:at.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:at,pageHeight:Rt}=this.viewport.rawDims;return[at,Rt]}};X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakMap,lt=new WeakMap,ot=new WeakMap,nt=new WeakSet,Nn=function(at){switch(e(this,ot).getMode()){case o.AnnotationEditorType.FREETEXT:return new St.FreeTextEditor(at);case o.AnnotationEditorType.INK:return new bt.InkEditor(at);case o.AnnotationEditorType.STAMP:return new ut.StampEditor(at)}return null},m=new WeakSet,un=function(at,Rt){const Ut=this.getNextId(),$t=xt(this,nt,Nn).call(this,{parent:this,id:Ut,x:at.offsetX,y:at.offsetY,uiManager:e(this,ot),isCentered:Rt});return $t&&this.add($t),$t},Y=new WeakSet,Bn=function(){const{x:at,y:Rt,width:Ut,height:$t}=this.div.getBoundingClientRect(),Pt=Math.max(0,at),Vt=Math.max(0,Rt),Kt=Math.min(window.innerWidth,at+Ut),ne=Math.min(window.innerHeight,Rt+$t),re=(Pt+Kt)/2-at,ct=(Vt+ne)/2-Rt,[a,h]=this.viewport.rotation%180===0?[re,ct]:[ct,re];return{offsetX:a,offsetY:h}},dt=new WeakSet,Un=function(){jt(this,tt,!0);for(const at of e(this,et).values())at.isEmpty()&&at.remove();jt(this,tt,!1)},Ie(Tt,"_initialized",!1);let rt=Tt;s.AnnotationEditorLayer=rt},(b,s,ft)=>{var ut,rt,X,mt,_t,ht,st,et,j,tt,ds,ot,fs,d,ps,pt,en,f,jn,$,gs,wt,Wn;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var o=ft(1),k=ft(5),St=ft(4),bt=ft(29);const Rt=class Rt extends St.AnnotationEditor{constructor(Pt){super({...Pt,name:"freeTextEditor"});Et(this,tt);Et(this,ot);Et(this,d);Et(this,pt);Et(this,f);Et(this,$);Et(this,wt);Et(this,ut,this.editorDivBlur.bind(this));Et(this,rt,this.editorDivFocus.bind(this));Et(this,X,this.editorDivInput.bind(this));Et(this,mt,this.editorDivKeydown.bind(this));Et(this,_t,void 0);Et(this,ht,"");Et(this,st,`${this.id}-editor`);Et(this,et,void 0);Et(this,j,null);jt(this,_t,Pt.color||Rt._defaultColor||St.AnnotationEditor._defaultLineColor),jt(this,et,Pt.fontSize||Rt._defaultFontSize)}static get _keyboardManager(){const Pt=Rt.prototype,Vt=re=>re.isEmpty(),Kt=k.AnnotationEditorUIManager.TRANSLATE_SMALL,ne=k.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new k.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Pt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Pt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Pt._translateEmpty,{args:[-Kt,0],checker:Vt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Pt._translateEmpty,{args:[-ne,0],checker:Vt}],[["ArrowRight","mac+ArrowRight"],Pt._translateEmpty,{args:[Kt,0],checker:Vt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Pt._translateEmpty,{args:[ne,0],checker:Vt}],[["ArrowUp","mac+ArrowUp"],Pt._translateEmpty,{args:[0,-Kt],checker:Vt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Pt._translateEmpty,{args:[0,-ne],checker:Vt}],[["ArrowDown","mac+ArrowDown"],Pt._translateEmpty,{args:[0,Kt],checker:Vt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Pt._translateEmpty,{args:[0,ne],checker:Vt}]]))}static initialize(Pt){St.AnnotationEditor.initialize(Pt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Vt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Vt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Pt,Vt){switch(Pt){case o.AnnotationEditorParamsType.FREETEXT_SIZE:Rt._defaultFontSize=Vt;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:Rt._defaultColor=Vt;break}}updateParams(Pt,Vt){switch(Pt){case o.AnnotationEditorParamsType.FREETEXT_SIZE:xt(this,tt,ds).call(this,Vt);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:xt(this,ot,fs).call(this,Vt);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,Rt._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,Rt._defaultColor||St.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,et)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,_t)]]}_translateEmpty(Pt,Vt){this._uiManager.translateSelectedEditors(Pt,Vt,!0)}getInitialTranslation(){const Pt=this.parentScale;return[-Rt._internalPadding*Pt,-(Rt._internalPadding+e(this,et))*Pt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,mt)),this.editorDiv.addEventListener("focus",e(this,rt)),this.editorDiv.addEventListener("blur",e(this,ut)),this.editorDiv.addEventListener("input",e(this,X)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,st)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,mt)),this.editorDiv.removeEventListener("focus",e(this,rt)),this.editorDiv.removeEventListener("blur",e(this,ut)),this.editorDiv.removeEventListener("input",e(this,X)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Pt){this._focusEventsAllowed&&(super.focusin(Pt),Pt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Pt;if(this.width){xt(this,wt,Wn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Pt=this._initialOptions)!=null&&Pt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Pt=e(this,ht),Vt=jt(this,ht,xt(this,d,ps).call(this).trimEnd());if(Pt===Vt)return;const Kt=ne=>{if(jt(this,ht,ne),!ne){this.remove();return}xt(this,f,jn).call(this),this._uiManager.rebuild(this),xt(this,pt,en).call(this)};this.addCommands({cmd:()=>{Kt(Vt)},undo:()=>{Kt(Pt)},mustExec:!1}),xt(this,pt,en).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Pt){this.enterInEditMode()}keydown(Pt){Pt.target===this.div&&Pt.key==="Enter"&&(this.enterInEditMode(),Pt.preventDefault())}editorDivKeydown(Pt){Rt._keyboardManager.exec(this,Pt)}editorDivFocus(Pt){this.isEditing=!0}editorDivBlur(Pt){this.isEditing=!1}editorDivInput(Pt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Pt,Vt;this.width&&(Pt=this.x,Vt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,st)),this.enableEditing(),St.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ne=>{var re;return(re=this.editorDiv)==null?void 0:re.setAttribute("aria-label",ne)}),St.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ne=>{var re;return(re=this.editorDiv)==null?void 0:re.setAttribute("default-content",ne)}),this.editorDiv.contentEditable=!0;const{style:Kt}=this.editorDiv;if(Kt.fontSize=`calc(${e(this,et)}px * var(--scale-factor))`,Kt.color=e(this,_t),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,k.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ne,re]=this.parentDimensions;if(this.annotationElementId){const{position:ct}=e(this,j);let[a,h]=this.getInitialTranslation();[a,h]=this.pageTranslationToScreen(a,h);const[c,g]=this.pageDimensions,[_,it]=this.pageTranslation;let gt,vt;switch(this.rotation){case 0:gt=Pt+(ct[0]-_)/c,vt=Vt+this.height-(ct[1]-it)/g;break;case 90:gt=Pt+(ct[0]-_)/c,vt=Vt-(ct[1]-it)/g,[a,h]=[h,-a];break;case 180:gt=Pt-this.width+(ct[0]-_)/c,vt=Vt-(ct[1]-it)/g,[a,h]=[-a,-h];break;case 270:gt=Pt+(ct[0]-_-this.height*g)/c,vt=Vt+(ct[1]-it-this.width*c)/g,[a,h]=[-h,a];break}this.setAt(gt*ne,vt*re,a,h)}else this.setAt(Pt*ne,Vt*re,this.width*ne,this.height*re);xt(this,f,jn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Pt,Vt,Kt){let ne=null;if(Pt instanceof bt.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:ct,fontColor:a},rect:h,rotation:c,id:g},textContent:_,textPosition:it,parent:{page:{pageNumber:gt}}}=Pt;if(!_||_.length===0)return null;ne=Pt={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:ct,value:_.join(`
`),position:it,pageIndex:gt-1,rect:h,rotation:c,id:g,deleted:!1}}const re=super.deserialize(Pt,Vt,Kt);return jt(re,et,Pt.fontSize),jt(re,_t,o.Util.makeHexColor(...Pt.color)),jt(re,ht,Pt.value),re.annotationElementId=Pt.id||null,jt(re,j,ne),re}serialize(Pt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Vt=Rt._internalPadding*this.parentScale,Kt=this.getRect(Vt,Vt),ne=St.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,_t)),re={annotationType:o.AnnotationEditorType.FREETEXT,color:ne,fontSize:e(this,et),value:e(this,ht),pageIndex:this.pageIndex,rect:Kt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Pt?re:this.annotationElementId&&!xt(this,$,gs).call(this,re)?null:(re.id=this.annotationElementId,re)}};ut=new WeakMap,rt=new WeakMap,X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakSet,ds=function(Pt){const Vt=ne=>{this.editorDiv.style.fontSize=`calc(${ne}px * var(--scale-factor))`,this.translate(0,-(ne-e(this,et))*this.parentScale),jt(this,et,ne),xt(this,pt,en).call(this)},Kt=e(this,et);this.addCommands({cmd:()=>{Vt(Pt)},undo:()=>{Vt(Kt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,fs=function(Pt){const Vt=e(this,_t);this.addCommands({cmd:()=>{jt(this,_t,this.editorDiv.style.color=Pt)},undo:()=>{jt(this,_t,this.editorDiv.style.color=Vt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},d=new WeakSet,ps=function(){const Pt=this.editorDiv.getElementsByTagName("div");if(Pt.length===0)return this.editorDiv.innerText;const Vt=[];for(const Kt of Pt)Vt.push(Kt.innerText.replace(/\r\n?|\n/,""));return Vt.join(`
`)},pt=new WeakSet,en=function(){const[Pt,Vt]=this.parentDimensions;let Kt;if(this.isAttachedToDOM)Kt=this.div.getBoundingClientRect();else{const{currentLayer:ne,div:re}=this,ct=re.style.display;re.style.display="hidden",ne.div.append(this.div),Kt=re.getBoundingClientRect(),re.remove(),re.style.display=ct}this.rotation%180===this.parentRotation%180?(this.width=Kt.width/Pt,this.height=Kt.height/Vt):(this.width=Kt.height/Pt,this.height=Kt.width/Vt),this.fixAndSetPosition()},f=new WeakSet,jn=function(){if(this.editorDiv.replaceChildren(),!!e(this,ht))for(const Pt of e(this,ht).split(`
`)){const Vt=document.createElement("div");Vt.append(Pt?document.createTextNode(Pt):document.createElement("br")),this.editorDiv.append(Vt)}},$=new WeakSet,gs=function(Pt){const{value:Vt,fontSize:Kt,color:ne,rect:re,pageIndex:ct}=e(this,j);return Pt.value!==Vt||Pt.fontSize!==Kt||Pt.rect.some((a,h)=>Math.abs(a-re[h])>=1)||Pt.color.some((a,h)=>a!==ne[h])||Pt.pageIndex!==ct},wt=new WeakSet,Wn=function(Pt=!1){if(!this.annotationElementId)return;if(xt(this,pt,en).call(this),!Pt&&(this.width===0||this.height===0)){setTimeout(()=>xt(this,wt,Wn).call(this,!0),0);return}const Vt=Rt._internalPadding*this.parentScale;e(this,j).rect=this.getRect(Vt,Vt)},Ie(Rt,"_freeTextDefaultContent",""),Ie(Rt,"_internalPadding",0),Ie(Rt,"_defaultColor",null),Ie(Rt,"_defaultFontSize",10),Ie(Rt,"_type","freetext");let Wt=Rt;s.FreeTextEditor=Wt},(b,s,ft)=>{var h,g,Ge,it,ms,vt,Bt,Lt,Ot,Gt,Jt,zt,ue,ye,se,pe,Yt,It,Nt,qt,ae,oe,Ae,bs,ve,dn,Te,Hn,Ce,$n,Dt,kt,Zt,ee,Oe,Le,Mt,Gn,me,le,be,_e,_s,te,Vn;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var o=ft(1),k=ft(6),St=ft(3),bt=ft(30),Wt=ft(31),ut=ft(32);const rt=1e3,X=9,mt=new WeakSet;function _t(ge){return{width:ge[2]-ge[0],height:ge[3]-ge[1]}}class ht{static create(yt){switch(yt.data.annotationType){case o.AnnotationType.LINK:return new et(yt);case o.AnnotationType.TEXT:return new j(yt);case o.AnnotationType.WIDGET:switch(yt.data.fieldType){case"Tx":return new lt(yt);case"Btn":return yt.data.radioButton?new d(yt):yt.data.checkBox?new nt(yt):new m(yt);case"Ch":return new pt(yt);case"Sig":return new ot(yt)}return new tt(yt);case o.AnnotationType.POPUP:return new Y(yt);case o.AnnotationType.FREETEXT:return new dt(yt);case o.AnnotationType.LINE:return new $(yt);case o.AnnotationType.SQUARE:return new Tt(yt);case o.AnnotationType.CIRCLE:return new wt(yt);case o.AnnotationType.POLYLINE:return new at(yt);case o.AnnotationType.CARET:return new Ut(yt);case o.AnnotationType.INK:return new $t(yt);case o.AnnotationType.POLYGON:return new Rt(yt);case o.AnnotationType.HIGHLIGHT:return new Pt(yt);case o.AnnotationType.UNDERLINE:return new Vt(yt);case o.AnnotationType.SQUIGGLY:return new Kt(yt);case o.AnnotationType.STRIKEOUT:return new ne(yt);case o.AnnotationType.STAMP:return new re(yt);case o.AnnotationType.FILEATTACHMENT:return new ct(yt);default:return new st(yt)}}}const c=class c{constructor(yt,{isRenderable:i=!1,ignoreBorder:Z=!1,createQuadrilaterals:At=!1}={}){Et(this,h,!1);this.isRenderable=i,this.data=yt.data,this.layer=yt.layer,this.linkService=yt.linkService,this.downloadManager=yt.downloadManager,this.imageResourcesPath=yt.imageResourcesPath,this.renderForms=yt.renderForms,this.svgFactory=yt.svgFactory,this.annotationStorage=yt.annotationStorage,this.enableScripting=yt.enableScripting,this.hasJSActions=yt.hasJSActions,this._fieldObjects=yt.fieldObjects,this.parent=yt.parent,i&&(this.container=this._createContainer(Z)),At&&this._createQuadrilaterals()}static _hasPopupData({titleObj:yt,contentsObj:i,richText:Z}){return!!(yt!=null&&yt.str||i!=null&&i.str||Z!=null&&Z.str)}get hasPopupData(){return c._hasPopupData(this.data)}_createContainer(yt){const{data:i,parent:{page:Z,viewport:At}}=this,Ct=document.createElement("section");Ct.setAttribute("data-annotation-id",i.id),this instanceof tt||(Ct.tabIndex=rt),Ct.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ct.setAttribute("aria-haspopup","dialog"),i.noRotate&&Ct.classList.add("norotate");const{pageWidth:Ft,pageHeight:Ht,pageX:Qt,pageY:he}=At.rawDims;if(!i.rect||this instanceof Y){const{rotation:Se}=i;return!i.hasOwnCanvas&&Se!==0&&this.setRotation(Se,Ct),Ct}const{width:ce,height:xe}=_t(i.rect),de=o.Util.normalizeRect([i.rect[0],Z.view[3]-i.rect[1]+Z.view[1],i.rect[2],Z.view[3]-i.rect[3]+Z.view[1]]);if(!yt&&i.borderStyle.width>0){Ct.style.borderWidth=`${i.borderStyle.width}px`;const Se=i.borderStyle.horizontalCornerRadius,Re=i.borderStyle.verticalCornerRadius;if(Se>0||Re>0){const De=`calc(${Se}px * var(--scale-factor)) / calc(${Re}px * var(--scale-factor))`;Ct.style.borderRadius=De}else if(this instanceof d){const De=`calc(${ce}px * var(--scale-factor)) / calc(${xe}px * var(--scale-factor))`;Ct.style.borderRadius=De}switch(i.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:Ct.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:Ct.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:Ct.style.borderBottomStyle="solid";break}const Fe=i.borderColor||null;Fe?(jt(this,h,!0),Ct.style.borderColor=o.Util.makeHexColor(Fe[0]|0,Fe[1]|0,Fe[2]|0)):Ct.style.borderWidth=0}Ct.style.left=`${100*(de[0]-Qt)/Ft}%`,Ct.style.top=`${100*(de[1]-he)/Ht}%`;const{rotation:fe}=i;return i.hasOwnCanvas||fe===0?(Ct.style.width=`${100*ce/Ft}%`,Ct.style.height=`${100*xe/Ht}%`):this.setRotation(fe,Ct),Ct}setRotation(yt,i=this.container){if(!this.data.rect)return;const{pageWidth:Z,pageHeight:At}=this.parent.viewport.rawDims,{width:Ct,height:Ft}=_t(this.data.rect);let Ht,Qt;yt%180===0?(Ht=100*Ct/Z,Qt=100*Ft/At):(Ht=100*Ft/Z,Qt=100*Ct/At),i.style.width=`${Ht}%`,i.style.height=`${Qt}%`,i.setAttribute("data-main-rotation",(360-yt)%360)}get _commonActions(){const yt=(i,Z,At)=>{const Ct=At.detail[i],Ft=Ct[0],Ht=Ct.slice(1);At.target.style[Z]=bt.ColorConverters[`${Ft}_HTML`](Ht),this.annotationStorage.setValue(this.data.id,{[Z]:bt.ColorConverters[`${Ft}_rgb`](Ht)})};return(0,o.shadow)(this,"_commonActions",{display:i=>{const{display:Z}=i.detail,At=Z%2===1;this.container.style.visibility=At?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:At,noPrint:Z===1||Z===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:Z}=i.detail;this.container.style.visibility=Z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Z,noView:Z})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{yt("bgColor","backgroundColor",i)},fillColor:i=>{yt("fillColor","backgroundColor",i)},fgColor:i=>{yt("fgColor","color",i)},textColor:i=>{yt("textColor","color",i)},borderColor:i=>{yt("borderColor","borderColor",i)},strokeColor:i=>{yt("strokeColor","borderColor",i)},rotation:i=>{const Z=i.detail.rotation;this.setRotation(Z),this.annotationStorage.setValue(this.data.id,{rotation:Z})}})}_dispatchEventFromSandbox(yt,i){const Z=this._commonActions;for(const At of Object.keys(i.detail)){const Ct=yt[At]||Z[At];Ct==null||Ct(i)}}_setDefaultPropertiesFromJS(yt){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const Z=this._commonActions;for(const[At,Ct]of Object.entries(i)){const Ft=Z[At];if(Ft){const Ht={detail:{[At]:Ct},target:yt};Ft(Ht),delete i[At]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:yt}=this.data;if(!yt)return;const[i,Z,At,Ct]=this.data.rect;if(yt.length===1){const[,{x:Re,y:Fe},{x:De,y:Be}]=yt[0];if(At===Re&&Ct===Fe&&i===De&&Z===Be)return}const{style:Ft}=this.container;let Ht;if(e(this,h)){const{borderColor:Re,borderWidth:Fe}=Ft;Ft.borderWidth=0,Ht=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Re}" stroke-width="${Fe}">`],this.container.classList.add("hasBorder")}const Qt=At-i,he=Ct-Z,{svgFactory:ce}=this,xe=ce.createElement("svg");xe.classList.add("quadrilateralsContainer"),xe.setAttribute("width",0),xe.setAttribute("height",0);const de=ce.createElement("defs");xe.append(de);const fe=ce.createElement("clipPath"),Se=`clippath_${this.data.id}`;fe.setAttribute("id",Se),fe.setAttribute("clipPathUnits","objectBoundingBox"),de.append(fe);for(const[,{x:Re,y:Fe},{x:De,y:Be}]of yt){const Ne=ce.createElement("rect"),Ue=(De-i)/Qt,He=(Ct-Fe)/he,$e=(Re-De)/Qt,ts=(Fe-Be)/he;Ne.setAttribute("x",Ue),Ne.setAttribute("y",He),Ne.setAttribute("width",$e),Ne.setAttribute("height",ts),fe.append(Ne),Ht==null||Ht.push(`<rect vector-effect="non-scaling-stroke" x="${Ue}" y="${He}" width="${$e}" height="${ts}"/>`)}e(this,h)&&(Ht.push("</g></svg>')"),Ft.backgroundImage=Ht.join("")),this.container.append(xe),this.container.style.clipPath=`url(#${Se})`}_createPopup(){const{container:yt,data:i}=this;yt.setAttribute("aria-haspopup","dialog");const Z=new Y({data:{color:i.color,titleObj:i.titleObj,modificationDate:i.modificationDate,contentsObj:i.contentsObj,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Z.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(yt,i=null){const Z=[];if(this._fieldObjects){const At=this._fieldObjects[yt];if(At)for(const{page:Ct,id:Ft,exportValues:Ht}of At){if(Ct===-1||Ft===i)continue;const Qt=typeof Ht=="string"?Ht:null,he=document.querySelector(`[data-element-id="${Ft}"]`);if(he&&!mt.has(he)){(0,o.warn)(`_getElementsByName - element not allowed: ${Ft}`);continue}Z.push({id:Ft,exportValue:Qt,domElement:he})}return Z}for(const At of document.getElementsByName(yt)){const{exportValue:Ct}=At,Ft=At.getAttribute("data-element-id");Ft!==i&&mt.has(At)&&Z.push({id:Ft,exportValue:Ct,domElement:At})}return Z}show(){var yt;this.container&&(this.container.hidden=!1),(yt=this.popup)==null||yt.maybeShow()}hide(){var yt;this.container&&(this.container.hidden=!0),(yt=this.popup)==null||yt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const yt=this.getElementsToTriggerPopup();if(Array.isArray(yt))for(const i of yt)i.classList.add("highlightArea");else yt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:yt,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{var Z;(Z=this.linkService.eventBus)==null||Z.dispatch("switchannotationeditormode",{source:this,mode:yt,editId:i})})}};h=new WeakMap;let st=c;class et extends st{constructor(i,Z=null){super(i,{isRenderable:!0,ignoreBorder:!!(Z!=null&&Z.ignoreBorder),createQuadrilaterals:!0});Et(this,g);Et(this,it);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:Z}=this,At=document.createElement("a");At.setAttribute("data-element-id",i.id);let Ct=!1;return i.url?(Z.addLinkAttributes(At,i.url,i.newWindow),Ct=!0):i.action?(this._bindNamedAction(At,i.action),Ct=!0):i.attachment?(this._bindAttachment(At,i.attachment),Ct=!0):i.setOCGState?(xt(this,it,ms).call(this,At,i.setOCGState),Ct=!0):i.dest?(this._bindLink(At,i.dest),Ct=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(At,i),Ct=!0),i.resetForm?(this._bindResetFormAction(At,i.resetForm),Ct=!0):this.isTooltipOnly&&!Ct&&(this._bindLink(At,""),Ct=!0)),this.container.classList.add("linkAnnotation"),Ct&&this.container.append(At),this.container}_bindLink(i,Z){i.href=this.linkService.getDestinationHash(Z),i.onclick=()=>(Z&&this.linkService.goToDestination(Z),!1),(Z||Z==="")&&xt(this,g,Ge).call(this)}_bindNamedAction(i,Z){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(Z),!1),xt(this,g,Ge).call(this)}_bindAttachment(i,Z){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>{var At;return(At=this.downloadManager)==null||At.openOrDownloadData(this.container,Z.content,Z.filename),!1},xt(this,g,Ge).call(this)}_bindJSAction(i,Z){i.href=this.linkService.getAnchorUrl("");const At=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ct of Object.keys(Z.actions)){const Ft=At.get(Ct);Ft&&(i[Ft]=()=>{var Ht;return(Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Z.id,name:Ct}}),!1})}i.onclick||(i.onclick=()=>!1),xt(this,g,Ge).call(this)}_bindResetFormAction(i,Z){const At=i.onclick;if(At||(i.href=this.linkService.getAnchorUrl("")),xt(this,g,Ge).call(this),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),At||(i.onclick=()=>!1);return}i.onclick=()=>{var xe;At==null||At();const{fields:Ct,refs:Ft,include:Ht}=Z,Qt=[];if(Ct.length!==0||Ft.length!==0){const de=new Set(Ft);for(const fe of Ct){const Se=this._fieldObjects[fe]||[];for(const{id:Re}of Se)de.add(Re)}for(const fe of Object.values(this._fieldObjects))for(const Se of fe)de.has(Se.id)===Ht&&Qt.push(Se)}else for(const de of Object.values(this._fieldObjects))Qt.push(...de);const he=this.annotationStorage,ce=[];for(const de of Qt){const{id:fe}=de;switch(ce.push(fe),de.type){case"text":{const Re=de.defaultValue||"";he.setValue(fe,{value:Re});break}case"checkbox":case"radiobutton":{const Re=de.defaultValue===de.exportValues;he.setValue(fe,{value:Re});break}case"combobox":case"listbox":{const Re=de.defaultValue||"";he.setValue(fe,{value:Re});break}default:continue}const Se=document.querySelector(`[data-element-id="${fe}"]`);if(Se){if(!mt.has(Se)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${fe}`);continue}}else continue;Se.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ce,name:"ResetForm"}})),!1}}}g=new WeakSet,Ge=function(){this.container.setAttribute("data-internal-link","")},it=new WeakSet,ms=function(i,Z){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(Z),!1),xt(this,g,Ge).call(this)};class j extends st{constructor(yt){super(yt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const yt=document.createElement("img");return yt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",yt.alt="[{{type}} Annotation]",yt.dataset.l10nId="text_annotation_type",yt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(yt),this.container}}class tt extends st{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(yt){var i;this.data.hasOwnCanvas&&(((i=yt.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(yt.previousSibling.hidden=!0),yt.hidden=!1)}_getKeyModifier(yt){const{isWin:i,isMac:Z}=o.FeatureTest.platform;return i&&yt.ctrlKey||Z&&yt.metaKey}_setEventListener(yt,i,Z,At,Ct){Z.includes("mouse")?yt.addEventListener(Z,Ft=>{var Ht;(Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:At,value:Ct(Ft),shift:Ft.shiftKey,modifier:this._getKeyModifier(Ft)}})}):yt.addEventListener(Z,Ft=>{var Ht;if(Z==="blur"){if(!i.focused||!Ft.relatedTarget)return;i.focused=!1}else if(Z==="focus"){if(i.focused)return;i.focused=!0}Ct&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:At,value:Ct(Ft)}}))})}_setEventListeners(yt,i,Z,At){var Ct,Ft,Ht;for(const[Qt,he]of Z)(he==="Action"||(Ct=this.data.actions)!=null&&Ct[he])&&((he==="Focus"||he==="Blur")&&(i||(i={focused:!1})),this._setEventListener(yt,i,Qt,he,At),he==="Focus"&&!((Ft=this.data.actions)!=null&&Ft.Blur)?this._setEventListener(yt,i,"blur","Blur",null):he==="Blur"&&!((Ht=this.data.actions)!=null&&Ht.Focus)&&this._setEventListener(yt,i,"focus","Focus",null))}_setBackgroundColor(yt){const i=this.data.backgroundColor||null;yt.style.backgroundColor=i===null?"transparent":o.Util.makeHexColor(i[0],i[1],i[2])}_setTextStyle(yt){const i=["left","center","right"],{fontColor:Z}=this.data.defaultAppearanceData,At=this.data.defaultAppearanceData.fontSize||X,Ct=yt.style;let Ft;const Ht=2,Qt=he=>Math.round(10*he)/10;if(this.data.multiLine){const he=Math.abs(this.data.rect[3]-this.data.rect[1]-Ht),ce=Math.round(he/(o.LINE_FACTOR*At))||1,xe=he/ce;Ft=Math.min(At,Qt(xe/o.LINE_FACTOR))}else{const he=Math.abs(this.data.rect[3]-this.data.rect[1]-Ht);Ft=Math.min(At,Qt(he/o.LINE_FACTOR))}Ct.fontSize=`calc(${Ft}px * var(--scale-factor))`,Ct.color=o.Util.makeHexColor(Z[0],Z[1],Z[2]),this.data.textAlignment!==null&&(Ct.textAlign=i[this.data.textAlignment])}_setRequired(yt,i){i?yt.setAttribute("required",!0):yt.removeAttribute("required"),yt.setAttribute("aria-required",i)}}class lt extends tt{constructor(yt){const i=yt.renderForms||!yt.data.hasAppearance&&!!yt.data.fieldValue;super(yt,{isRenderable:i})}setPropertyOnSiblings(yt,i,Z,At){const Ct=this.annotationStorage;for(const Ft of this._getElementsByName(yt.name,yt.id))Ft.domElement&&(Ft.domElement[i]=Z),Ct.setValue(Ft.id,{[At]:Z})}render(){var At,Ct;const yt=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let Z=null;if(this.renderForms){const Ft=yt.getValue(i,{value:this.data.fieldValue});let Ht=Ft.value||"";const Qt=yt.getValue(i,{charLimit:this.data.maxLen}).charLimit;Qt&&Ht.length>Qt&&(Ht=Ht.slice(0,Qt));let he=Ft.formattedValue||((At=this.data.textContent)==null?void 0:At.join(`
`))||null;he&&this.data.comb&&(he=he.replaceAll(/\s+/g,""));const ce={userValue:Ht,formattedValue:he,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Z=document.createElement("textarea"),Z.textContent=he??Ht,this.data.doNotScroll&&(Z.style.overflowY="hidden")):(Z=document.createElement("input"),Z.type="text",Z.setAttribute("value",he??Ht),this.data.doNotScroll&&(Z.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Z.hidden=!0),mt.add(Z),Z.setAttribute("data-element-id",i),Z.disabled=this.data.readOnly,Z.name=this.data.fieldName,Z.tabIndex=rt,this._setRequired(Z,this.data.required),Qt&&(Z.maxLength=Qt),Z.addEventListener("input",de=>{yt.setValue(i,{value:de.target.value}),this.setPropertyOnSiblings(Z,"value",de.target.value,"value"),ce.formattedValue=null}),Z.addEventListener("resetform",de=>{const fe=this.data.defaultFieldValue??"";Z.value=ce.userValue=fe,ce.formattedValue=null});let xe=de=>{const{formattedValue:fe}=ce;fe!=null&&(de.target.value=fe),de.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Z.addEventListener("focus",fe=>{if(ce.focused)return;const{target:Se}=fe;ce.userValue&&(Se.value=ce.userValue),ce.lastCommittedValue=Se.value,ce.commitKey=1,ce.focused=!0}),Z.addEventListener("updatefromsandbox",fe=>{this.showElementAndHideCanvas(fe.target);const Se={value(Re){ce.userValue=Re.detail.value??"",yt.setValue(i,{value:ce.userValue.toString()}),Re.target.value=ce.userValue},formattedValue(Re){const{formattedValue:Fe}=Re.detail;ce.formattedValue=Fe,Fe!=null&&Re.target!==document.activeElement&&(Re.target.value=Fe),yt.setValue(i,{formattedValue:Fe})},selRange(Re){Re.target.setSelectionRange(...Re.detail.selRange)},charLimit:Re=>{var Ne;const{charLimit:Fe}=Re.detail,{target:De}=Re;if(Fe===0){De.removeAttribute("maxLength");return}De.setAttribute("maxLength",Fe);let Be=ce.userValue;!Be||Be.length<=Fe||(Be=Be.slice(0,Fe),De.value=ce.userValue=Be,yt.setValue(i,{value:Be}),(Ne=this.linkService.eventBus)==null||Ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Be,willCommit:!0,commitKey:1,selStart:De.selectionStart,selEnd:De.selectionEnd}}))}};this._dispatchEventFromSandbox(Se,fe)}),Z.addEventListener("keydown",fe=>{var Fe;ce.commitKey=1;let Se=-1;if(fe.key==="Escape"?Se=0:fe.key==="Enter"&&!this.data.multiLine?Se=2:fe.key==="Tab"&&(ce.commitKey=3),Se===-1)return;const{value:Re}=fe.target;ce.lastCommittedValue!==Re&&(ce.lastCommittedValue=Re,ce.userValue=Re,(Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Re,willCommit:!0,commitKey:Se,selStart:fe.target.selectionStart,selEnd:fe.target.selectionEnd}}))});const de=xe;xe=null,Z.addEventListener("blur",fe=>{var Re;if(!ce.focused||!fe.relatedTarget)return;ce.focused=!1;const{value:Se}=fe.target;ce.userValue=Se,ce.lastCommittedValue!==Se&&((Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Se,willCommit:!0,commitKey:ce.commitKey,selStart:fe.target.selectionStart,selEnd:fe.target.selectionEnd}})),de(fe)}),(Ct=this.data.actions)!=null&&Ct.Keystroke&&Z.addEventListener("beforeinput",fe=>{var He;ce.lastCommittedValue=null;const{data:Se,target:Re}=fe,{value:Fe,selectionStart:De,selectionEnd:Be}=Re;let Ne=De,Ue=Be;switch(fe.inputType){case"deleteWordBackward":{const $e=Fe.substring(0,De).match(/\w*[^\w]*$/);$e&&(Ne-=$e[0].length);break}case"deleteWordForward":{const $e=Fe.substring(De).match(/^[^\w]*\w*/);$e&&(Ue+=$e[0].length);break}case"deleteContentBackward":De===Be&&(Ne-=1);break;case"deleteContentForward":De===Be&&(Ue+=1);break}fe.preventDefault(),(He=this.linkService.eventBus)==null||He.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Fe,change:Se||"",willCommit:!1,selStart:Ne,selEnd:Ue}})}),this._setEventListeners(Z,ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.value)}if(xe&&Z.addEventListener("blur",xe),this.data.comb){const fe=(this.data.rect[2]-this.data.rect[0])/Qt;Z.classList.add("comb"),Z.style.letterSpacing=`calc(${fe}px * var(--scale-factor) - 1ch)`}}else Z=document.createElement("div"),Z.textContent=this.data.fieldValue,Z.style.verticalAlign="middle",Z.style.display="table-cell";return this._setTextStyle(Z),this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class ot extends tt{constructor(yt){super(yt,{isRenderable:!!yt.data.hasOwnCanvas})}}class nt extends tt{constructor(yt){super(yt,{isRenderable:yt.renderForms})}render(){const yt=this.annotationStorage,i=this.data,Z=i.id;let At=yt.getValue(Z,{value:i.exportValue===i.fieldValue}).value;typeof At=="string"&&(At=At!=="Off",yt.setValue(Z,{value:At})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ct=document.createElement("input");return mt.add(Ct),Ct.setAttribute("data-element-id",Z),Ct.disabled=i.readOnly,this._setRequired(Ct,this.data.required),Ct.type="checkbox",Ct.name=i.fieldName,At&&Ct.setAttribute("checked",!0),Ct.setAttribute("exportValue",i.exportValue),Ct.tabIndex=rt,Ct.addEventListener("change",Ft=>{const{name:Ht,checked:Qt}=Ft.target;for(const he of this._getElementsByName(Ht,Z)){const ce=Qt&&he.exportValue===i.exportValue;he.domElement&&(he.domElement.checked=ce),yt.setValue(he.id,{value:ce})}yt.setValue(Z,{value:Qt})}),Ct.addEventListener("resetform",Ft=>{const Ht=i.defaultFieldValue||"Off";Ft.target.checked=Ht===i.exportValue}),this.enableScripting&&this.hasJSActions&&(Ct.addEventListener("updatefromsandbox",Ft=>{const Ht={value(Qt){Qt.target.checked=Qt.detail.value!=="Off",yt.setValue(Z,{value:Qt.target.checked})}};this._dispatchEventFromSandbox(Ht,Ft)}),this._setEventListeners(Ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.checked)),this._setBackgroundColor(Ct),this._setDefaultPropertiesFromJS(Ct),this.container.append(Ct),this.container}}class d extends tt{constructor(yt){super(yt,{isRenderable:yt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const yt=this.annotationStorage,i=this.data,Z=i.id;let At=yt.getValue(Z,{value:i.fieldValue===i.buttonValue}).value;typeof At=="string"&&(At=At!==i.buttonValue,yt.setValue(Z,{value:At}));const Ct=document.createElement("input");if(mt.add(Ct),Ct.setAttribute("data-element-id",Z),Ct.disabled=i.readOnly,this._setRequired(Ct,this.data.required),Ct.type="radio",Ct.name=i.fieldName,At&&Ct.setAttribute("checked",!0),Ct.tabIndex=rt,Ct.addEventListener("change",Ft=>{const{name:Ht,checked:Qt}=Ft.target;for(const he of this._getElementsByName(Ht,Z))yt.setValue(he.id,{value:!1});yt.setValue(Z,{value:Qt})}),Ct.addEventListener("resetform",Ft=>{const Ht=i.defaultFieldValue;Ft.target.checked=Ht!=null&&Ht===i.buttonValue}),this.enableScripting&&this.hasJSActions){const Ft=i.buttonValue;Ct.addEventListener("updatefromsandbox",Ht=>{const Qt={value:he=>{const ce=Ft===he.detail.value;for(const xe of this._getElementsByName(he.target.name)){const de=ce&&xe.id===Z;xe.domElement&&(xe.domElement.checked=de),yt.setValue(xe.id,{value:de})}}};this._dispatchEventFromSandbox(Qt,Ht)}),this._setEventListeners(Ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ht=>Ht.target.checked)}return this._setBackgroundColor(Ct),this._setDefaultPropertiesFromJS(Ct),this.container.append(Ct),this.container}}class m extends et{constructor(yt){super(yt,{ignoreBorder:yt.data.hasAppearance})}render(){const yt=super.render();yt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(yt.title=this.data.alternativeText);const i=yt.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",Z=>{this._dispatchEventFromSandbox({},Z)})),yt}}class pt extends tt{constructor(yt){super(yt,{isRenderable:yt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const yt=this.annotationStorage,i=this.data.id,Z=yt.getValue(i,{value:this.data.fieldValue}),At=document.createElement("select");mt.add(At),At.setAttribute("data-element-id",i),At.disabled=this.data.readOnly,this._setRequired(At,this.data.required),At.name=this.data.fieldName,At.tabIndex=rt;let Ct=this.data.combo&&this.data.options.length>0;this.data.combo||(At.size=this.data.options.length,this.data.multiSelect&&(At.multiple=!0)),At.addEventListener("resetform",ce=>{const xe=this.data.defaultFieldValue;for(const de of At.options)de.selected=de.value===xe});for(const ce of this.data.options){const xe=document.createElement("option");xe.textContent=ce.displayValue,xe.value=ce.exportValue,Z.value.includes(ce.exportValue)&&(xe.setAttribute("selected",!0),Ct=!1),At.append(xe)}let Ft=null;if(Ct){const ce=document.createElement("option");ce.value=" ",ce.setAttribute("hidden",!0),ce.setAttribute("selected",!0),At.prepend(ce),Ft=()=>{ce.remove(),At.removeEventListener("input",Ft),Ft=null},At.addEventListener("input",Ft)}const Ht=ce=>{const xe=ce?"value":"textContent",{options:de,multiple:fe}=At;return fe?Array.prototype.filter.call(de,Se=>Se.selected).map(Se=>Se[xe]):de.selectedIndex===-1?null:de[de.selectedIndex][xe]};let Qt=Ht(!1);const he=ce=>{const xe=ce.target.options;return Array.prototype.map.call(xe,de=>({displayValue:de.textContent,exportValue:de.value}))};return this.enableScripting&&this.hasJSActions?(At.addEventListener("updatefromsandbox",ce=>{const xe={value(de){Ft==null||Ft();const fe=de.detail.value,Se=new Set(Array.isArray(fe)?fe:[fe]);for(const Re of At.options)Re.selected=Se.has(Re.value);yt.setValue(i,{value:Ht(!0)}),Qt=Ht(!1)},multipleSelection(de){At.multiple=!0},remove(de){const fe=At.options,Se=de.detail.remove;fe[Se].selected=!1,At.remove(Se),fe.length>0&&Array.prototype.findIndex.call(fe,Fe=>Fe.selected)===-1&&(fe[0].selected=!0),yt.setValue(i,{value:Ht(!0),items:he(de)}),Qt=Ht(!1)},clear(de){for(;At.length!==0;)At.remove(0);yt.setValue(i,{value:null,items:[]}),Qt=Ht(!1)},insert(de){const{index:fe,displayValue:Se,exportValue:Re}=de.detail.insert,Fe=At.children[fe],De=document.createElement("option");De.textContent=Se,De.value=Re,Fe?Fe.before(De):At.append(De),yt.setValue(i,{value:Ht(!0),items:he(de)}),Qt=Ht(!1)},items(de){const{items:fe}=de.detail;for(;At.length!==0;)At.remove(0);for(const Se of fe){const{displayValue:Re,exportValue:Fe}=Se,De=document.createElement("option");De.textContent=Re,De.value=Fe,At.append(De)}At.options.length>0&&(At.options[0].selected=!0),yt.setValue(i,{value:Ht(!0),items:he(de)}),Qt=Ht(!1)},indices(de){const fe=new Set(de.detail.indices);for(const Se of de.target.options)Se.selected=fe.has(Se.index);yt.setValue(i,{value:Ht(!0)}),Qt=Ht(!1)},editable(de){de.target.disabled=!de.detail.editable}};this._dispatchEventFromSandbox(xe,ce)}),At.addEventListener("input",ce=>{var de;const xe=Ht(!0);yt.setValue(i,{value:xe}),ce.preventDefault(),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:Qt,changeEx:xe,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(At,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ce=>ce.target.value)):At.addEventListener("input",function(ce){yt.setValue(i,{value:Ht(!0)})}),this.data.combo&&this._setTextStyle(At),this._setBackgroundColor(At),this._setDefaultPropertiesFromJS(At),this.container.append(At),this.container}}class Y extends st{constructor(yt){const{data:i,elements:Z}=yt;super(yt,{isRenderable:st._hasPopupData(i)}),this.elements=Z}render(){this.container.classList.add("popupAnnotation");const yt=new f({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const Z of this.elements)Z.popup=yt,i.push(Z.data.id),Z.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(Z=>`${o.AnnotationPrefix}${Z}`).join(",")),this.container}}class f{constructor({container:yt,color:i,elements:Z,titleObj:At,modificationDate:Ct,contentsObj:Ft,richText:Ht,parent:Qt,rect:he,parentRect:ce,open:xe}){Et(this,Ae);Et(this,ve);Et(this,Te);Et(this,Ce);Et(this,vt,null);Et(this,Bt,xt(this,Ae,bs).bind(this));Et(this,Lt,xt(this,Ce,$n).bind(this));Et(this,Ot,xt(this,Te,Hn).bind(this));Et(this,Gt,xt(this,ve,dn).bind(this));Et(this,Jt,null);Et(this,zt,null);Et(this,ue,null);Et(this,ye,null);Et(this,se,null);Et(this,pe,null);Et(this,Yt,!1);Et(this,It,null);Et(this,Nt,null);Et(this,qt,null);Et(this,ae,null);Et(this,oe,!1);var fe;jt(this,zt,yt),jt(this,ae,At),jt(this,ue,Ft),jt(this,qt,Ht),jt(this,se,Qt),jt(this,Jt,i),jt(this,Nt,he),jt(this,pe,ce),jt(this,ye,Z);const de=k.PDFDateString.toDateObject(Ct);de&&jt(this,vt,Qt.l10n.get("annotation_date_string",{date:de.toLocaleDateString(),time:de.toLocaleTimeString()})),this.trigger=Z.flatMap(Se=>Se.getElementsToTriggerPopup());for(const Se of this.trigger)Se.addEventListener("click",e(this,Gt)),Se.addEventListener("mouseenter",e(this,Ot)),Se.addEventListener("mouseleave",e(this,Lt)),Se.classList.add("popupTriggerArea");for(const Se of Z)(fe=Se.container)==null||fe.addEventListener("keydown",e(this,Bt));e(this,zt).hidden=!0,xe&&xt(this,ve,dn).call(this)}render(){if(e(this,It))return;const{page:{view:yt},viewport:{rawDims:{pageWidth:i,pageHeight:Z,pageX:At,pageY:Ct}}}=e(this,se),Ft=jt(this,It,document.createElement("div"));if(Ft.className="popup",e(this,Jt)){const Ne=Ft.style.outlineColor=o.Util.makeHexColor(...e(this,Jt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ft.style.backgroundColor=`color-mix(in srgb, ${Ne} 30%, white)`:Ft.style.backgroundColor=o.Util.makeHexColor(...e(this,Jt).map(He=>Math.floor(.7*(255-He)+He)))}const Ht=document.createElement("span");Ht.className="header";const Qt=document.createElement("h1");if(Ht.append(Qt),{dir:Qt.dir,str:Qt.textContent}=e(this,ae),Ft.append(Ht),e(this,vt)){const Ne=document.createElement("span");Ne.classList.add("popupDate"),e(this,vt).then(Ue=>{Ne.textContent=Ue}),Ht.append(Ne)}const he=e(this,ue),ce=e(this,qt);if(ce!=null&&ce.str&&(!(he!=null&&he.str)||he.str===ce.str))ut.XfaLayer.render({xfaHtml:ce.html,intent:"richText",div:Ft}),Ft.lastChild.classList.add("richText","popupContent");else{const Ne=this._formatContents(he);Ft.append(Ne)}let xe=!!e(this,pe),de=xe?e(this,pe):e(this,Nt);for(const Ne of e(this,ye))if(!de||o.Util.intersect(Ne.data.rect,de)!==null){de=Ne.data.rect,xe=!0;break}const fe=o.Util.normalizeRect([de[0],yt[3]-de[1]+yt[1],de[2],yt[3]-de[3]+yt[1]]),Se=5,Re=xe?de[2]-de[0]+Se:0,Fe=fe[0]+Re,De=fe[1],{style:Be}=e(this,zt);Be.left=`${100*(Fe-At)/i}%`,Be.top=`${100*(De-Ct)/Z}%`,e(this,zt).append(Ft)}_formatContents({str:yt,dir:i}){const Z=document.createElement("p");Z.classList.add("popupContent"),Z.dir=i;const At=yt.split(/(?:\r\n?|\n)/);for(let Ct=0,Ft=At.length;Ct<Ft;++Ct){const Ht=At[Ct];Z.append(document.createTextNode(Ht)),Ct<Ft-1&&Z.append(document.createElement("br"))}return Z}forceHide(){jt(this,oe,this.isVisible),e(this,oe)&&(e(this,zt).hidden=!0)}maybeShow(){e(this,oe)&&(jt(this,oe,!1),e(this,zt).hidden=!1)}get isVisible(){return e(this,zt).hidden===!1}}vt=new WeakMap,Bt=new WeakMap,Lt=new WeakMap,Ot=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,zt=new WeakMap,ue=new WeakMap,ye=new WeakMap,se=new WeakMap,pe=new WeakMap,Yt=new WeakMap,It=new WeakMap,Nt=new WeakMap,qt=new WeakMap,ae=new WeakMap,oe=new WeakMap,Ae=new WeakSet,bs=function(yt){yt.altKey||yt.shiftKey||yt.ctrlKey||yt.metaKey||(yt.key==="Enter"||yt.key==="Escape"&&e(this,Yt))&&xt(this,ve,dn).call(this)},ve=new WeakSet,dn=function(){jt(this,Yt,!e(this,Yt)),e(this,Yt)?(xt(this,Te,Hn).call(this),e(this,zt).addEventListener("click",e(this,Gt)),e(this,zt).addEventListener("keydown",e(this,Bt))):(xt(this,Ce,$n).call(this),e(this,zt).removeEventListener("click",e(this,Gt)),e(this,zt).removeEventListener("keydown",e(this,Bt)))},Te=new WeakSet,Hn=function(){e(this,It)||this.render(),this.isVisible?e(this,Yt)&&e(this,zt).classList.add("focused"):(e(this,zt).hidden=!1,e(this,zt).style.zIndex=parseInt(e(this,zt).style.zIndex)+1e3)},Ce=new WeakSet,$n=function(){e(this,zt).classList.remove("focused"),!(e(this,Yt)||!this.isVisible)&&(e(this,zt).hidden=!0,e(this,zt).style.zIndex=parseInt(e(this,zt).style.zIndex)-1e3)};class dt extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=yt.data.textContent,this.textPosition=yt.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const yt=document.createElement("div");yt.classList.add("annotationTextContent"),yt.setAttribute("role","comment");for(const i of this.textContent){const Z=document.createElement("span");Z.textContent=i,yt.append(Z)}this.container.append(yt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=dt;class $ extends st{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});Et(this,Dt,null)}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:Z,height:At}=_t(i.rect),Ct=this.svgFactory.create(Z,At,!0),Ft=jt(this,Dt,this.svgFactory.createElement("svg:line"));return Ft.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),Ft.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),Ft.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),Ft.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),Ft.setAttribute("stroke-width",i.borderStyle.width||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),Ct.append(Ft),this.container.append(Ct),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dt=new WeakMap;class Tt extends st{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});Et(this,kt,null)}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:Z,height:At}=_t(i.rect),Ct=this.svgFactory.create(Z,At,!0),Ft=i.borderStyle.width,Ht=jt(this,kt,this.svgFactory.createElement("svg:rect"));return Ht.setAttribute("x",Ft/2),Ht.setAttribute("y",Ft/2),Ht.setAttribute("width",Z-Ft),Ht.setAttribute("height",At-Ft),Ht.setAttribute("stroke-width",Ft||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Ct.append(Ht),this.container.append(Ct),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}kt=new WeakMap;class wt extends st{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});Et(this,Zt,null)}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:Z,height:At}=_t(i.rect),Ct=this.svgFactory.create(Z,At,!0),Ft=i.borderStyle.width,Ht=jt(this,Zt,this.svgFactory.createElement("svg:ellipse"));return Ht.setAttribute("cx",Z/2),Ht.setAttribute("cy",At/2),Ht.setAttribute("rx",Z/2-Ft/2),Ht.setAttribute("ry",At/2-Ft/2),Ht.setAttribute("stroke-width",Ft||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Ct.append(Ht),this.container.append(Ct),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap;class at extends st{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});Et(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:Z,height:At}=_t(i.rect),Ct=this.svgFactory.create(Z,At,!0);let Ft=[];for(const Qt of i.vertices){const he=Qt.x-i.rect[0],ce=i.rect[3]-Qt.y;Ft.push(he+","+ce)}Ft=Ft.join(" ");const Ht=jt(this,ee,this.svgFactory.createElement(this.svgElementName));return Ht.setAttribute("points",Ft),Ht.setAttribute("stroke-width",i.borderStyle.width||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Ct.append(Ht),this.container.append(Ct),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class Rt extends at{constructor(yt){super(yt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ut extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class $t extends st{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});Et(this,Oe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:Z,height:At}=_t(i.rect),Ct=this.svgFactory.create(Z,At,!0);for(const Ft of i.inkLists){let Ht=[];for(const he of Ft){const ce=he.x-i.rect[0],xe=i.rect[3]-he.y;Ht.push(`${ce},${xe}`)}Ht=Ht.join(" ");const Qt=this.svgFactory.createElement(this.svgElementName);e(this,Oe).push(Qt),Qt.setAttribute("points",Ht),Qt.setAttribute("stroke-width",i.borderStyle.width||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),!i.popupRef&&this.hasPopupData&&this._createPopup(),Ct.append(Qt)}return this.container.append(Ct),this.container}getElementsToTriggerPopup(){return e(this,Oe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oe=new WeakMap,s.InkAnnotationElement=$t;class Pt extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Vt extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Kt extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ne extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class re extends st{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=re;class ct extends st{constructor(i){var Ct;super(i,{isRenderable:!0});Et(this,Mt);Et(this,Le,null);const{filename:Z,content:At}=this.data.file;this.filename=(0,k.getFilenameFromUrl)(Z,!0),this.content=At,(Ct=this.linkService.eventBus)==null||Ct.dispatch("fileattachmentannotation",{source:this,filename:Z,content:At})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:i,data:Z}=this;let At;Z.hasAppearance||Z.fillAlpha===0?At=document.createElement("div"):(At=document.createElement("img"),At.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Z.name)?"paperclip":"pushpin"}.svg`,Z.fillAlpha&&Z.fillAlpha<1&&(At.style=`filter: opacity(${Math.round(Z.fillAlpha*100)}%);`)),At.addEventListener("dblclick",xt(this,Mt,Gn).bind(this)),jt(this,Le,At);const{isMac:Ct}=o.FeatureTest.platform;return i.addEventListener("keydown",Ft=>{Ft.key==="Enter"&&(Ct?Ft.metaKey:Ft.ctrlKey)&&xt(this,Mt,Gn).call(this)}),!Z.popupRef&&this.hasPopupData?this._createPopup():At.classList.add("popupTriggerArea"),i.append(At),i}getElementsToTriggerPopup(){return e(this,Le)}addHighlightArea(){this.container.classList.add("highlightArea")}}Le=new WeakMap,Mt=new WeakSet,Gn=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)};class a{constructor({div:yt,accessibilityManager:i,annotationCanvasMap:Z,l10n:At,page:Ct,viewport:Ft}){Et(this,_e);Et(this,te);Et(this,me,null);Et(this,le,null);Et(this,be,new Map);this.div=yt,jt(this,me,i),jt(this,le,Z),this.l10n=At,this.page=Ct,this.viewport=Ft,this.zIndex=0,this.l10n||(this.l10n=Wt.NullL10n)}async render(yt){const{annotations:i}=yt,Z=this.div;(0,k.setLayerDimensions)(Z,this.viewport);const At=new Map,Ct={data:null,layer:Z,linkService:yt.linkService,downloadManager:yt.downloadManager,imageResourcesPath:yt.imageResourcesPath||"",renderForms:yt.renderForms!==!1,svgFactory:new k.DOMSVGFactory,annotationStorage:yt.annotationStorage||new St.AnnotationStorage,enableScripting:yt.enableScripting===!0,hasJSActions:yt.hasJSActions,fieldObjects:yt.fieldObjects,parent:this,elements:null};for(const Ft of i){if(Ft.noHTML)continue;const Ht=Ft.annotationType===o.AnnotationType.POPUP;if(Ht){const ce=At.get(Ft.id);if(!ce)continue;Ct.elements=ce}else{const{width:ce,height:xe}=_t(Ft.rect);if(ce<=0||xe<=0)continue}Ct.data=Ft;const Qt=ht.create(Ct);if(!Qt.isRenderable)continue;if(!Ht&&Ft.popupRef){const ce=At.get(Ft.popupRef);ce?ce.push(Qt):At.set(Ft.popupRef,[Qt])}Qt.annotationEditorType>0&&e(this,be).set(Qt.data.id,Qt);const he=Qt.render();Ft.hidden&&(he.style.visibility="hidden"),xt(this,_e,_s).call(this,he,Ft.id)}xt(this,te,Vn).call(this),await this.l10n.translate(Z)}update({viewport:yt}){const i=this.div;this.viewport=yt,(0,k.setLayerDimensions)(i,{rotation:yt.rotation}),xt(this,te,Vn).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(e(this,be).values())}getEditableAnnotation(yt){return e(this,be).get(yt)}}me=new WeakMap,le=new WeakMap,be=new WeakMap,_e=new WeakSet,_s=function(yt,i){var At;const Z=yt.firstChild||yt;Z.id=`${o.AnnotationPrefix}${i}`,this.div.append(yt),(At=e(this,me))==null||At.moveElementInDOM(this.div,yt,Z,!1)},te=new WeakSet,Vn=function(){if(!e(this,le))return;const yt=this.div;for(const[i,Z]of e(this,le)){const At=yt.querySelector(`[data-annotation-id="${i}"]`);if(!At)continue;const{firstChild:Ct}=At;Ct?Ct.nodeName==="CANVAS"?Ct.replaceWith(Z):Ct.before(Z):At.append(Z)}e(this,le).clear()},s.AnnotationLayer=a},(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function ft(St){return Math.floor(Math.max(0,Math.min(1,St))*255).toString(16).padStart(2,"0")}function o(St){return Math.max(0,Math.min(255,255*St))}class k{static CMYK_G([bt,Wt,ut,rt]){return["G",1-Math.min(1,.3*bt+.59*ut+.11*Wt+rt)]}static G_CMYK([bt]){return["CMYK",0,0,0,1-bt]}static G_RGB([bt]){return["RGB",bt,bt,bt]}static G_rgb([bt]){return bt=o(bt),[bt,bt,bt]}static G_HTML([bt]){const Wt=ft(bt);return`#${Wt}${Wt}${Wt}`}static RGB_G([bt,Wt,ut]){return["G",.3*bt+.59*Wt+.11*ut]}static RGB_rgb(bt){return bt.map(o)}static RGB_HTML(bt){return`#${bt.map(ft).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([bt,Wt,ut,rt]){return["RGB",1-Math.min(1,bt+rt),1-Math.min(1,ut+rt),1-Math.min(1,Wt+rt)]}static CMYK_rgb([bt,Wt,ut,rt]){return[o(1-Math.min(1,bt+rt)),o(1-Math.min(1,ut+rt)),o(1-Math.min(1,Wt+rt))]}static CMYK_HTML(bt){const Wt=this.CMYK_RGB(bt).slice(1);return this.RGB_HTML(Wt)}static RGB_CMYK([bt,Wt,ut]){const rt=1-bt,X=1-Wt,mt=1-ut,_t=Math.min(rt,X,mt);return["CMYK",rt,X,mt,_t]}}s.ColorConverters=k},(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=o;const ft={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};ft.print_progress_percent="{{progress}}%";function o(bt,Wt){switch(bt){case"find_match_count":bt=`find_match_count[${Wt.total===1?"one":"other"}]`;break;case"find_match_count_limit":bt=`find_match_count_limit[${Wt.limit===1?"one":"other"}]`;break}return ft[bt]||""}function k(bt,Wt){return Wt?bt.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ut,rt)=>rt in Wt?Wt[rt]:"{{"+rt+"}}"):bt}const St={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(bt,Wt=null,ut=o(bt,Wt)){return k(ut,Wt)},async translate(bt){}};s.NullL10n=St},(b,s,ft)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var o=ft(25);class k{static setupStorage(bt,Wt,ut,rt,X){const mt=rt.getValue(Wt,{value:null});switch(ut.name){case"textarea":if(mt.value!==null&&(bt.textContent=mt.value),X==="print")break;bt.addEventListener("input",_t=>{rt.setValue(Wt,{value:_t.target.value})});break;case"input":if(ut.attributes.type==="radio"||ut.attributes.type==="checkbox"){if(mt.value===ut.attributes.xfaOn?bt.setAttribute("checked",!0):mt.value===ut.attributes.xfaOff&&bt.removeAttribute("checked"),X==="print")break;bt.addEventListener("change",_t=>{rt.setValue(Wt,{value:_t.target.checked?_t.target.getAttribute("xfaOn"):_t.target.getAttribute("xfaOff")})})}else{if(mt.value!==null&&bt.setAttribute("value",mt.value),X==="print")break;bt.addEventListener("input",_t=>{rt.setValue(Wt,{value:_t.target.value})})}break;case"select":if(mt.value!==null){bt.setAttribute("value",mt.value);for(const _t of ut.children)_t.attributes.value===mt.value?_t.attributes.selected=!0:_t.attributes.hasOwnProperty("selected")&&delete _t.attributes.selected}bt.addEventListener("input",_t=>{const ht=_t.target.options,st=ht.selectedIndex===-1?"":ht[ht.selectedIndex].value;rt.setValue(Wt,{value:st})});break}}static setAttributes({html:bt,element:Wt,storage:ut=null,intent:rt,linkService:X}){const{attributes:mt}=Wt,_t=bt instanceof HTMLAnchorElement;mt.type==="radio"&&(mt.name=`${mt.name}-${rt}`);for(const[ht,st]of Object.entries(mt))if(st!=null)switch(ht){case"class":st.length&&bt.setAttribute(ht,st.join(" "));break;case"dataId":break;case"id":bt.setAttribute("data-element-id",st);break;case"style":Object.assign(bt.style,st);break;case"textContent":bt.textContent=st;break;default:(!_t||ht!=="href"&&ht!=="newWindow")&&bt.setAttribute(ht,st)}_t&&X.addLinkAttributes(bt,mt.href,mt.newWindow),ut&&mt.dataId&&this.setupStorage(bt,mt.dataId,Wt,ut)}static render(bt){var et;const Wt=bt.annotationStorage,ut=bt.linkService,rt=bt.xfaHtml,X=bt.intent||"display",mt=document.createElement(rt.name);rt.attributes&&this.setAttributes({html:mt,element:rt,intent:X,linkService:ut});const _t=[[rt,-1,mt]],ht=bt.div;if(ht.append(mt),bt.viewport){const j=`matrix(${bt.viewport.transform.join(",")})`;ht.style.transform=j}X!=="richText"&&ht.setAttribute("class","xfaLayer xfaFont");const st=[];for(;_t.length>0;){const[j,tt,lt]=_t.at(-1);if(tt+1===j.children.length){_t.pop();continue}const ot=j.children[++_t.at(-1)[1]];if(ot===null)continue;const{name:nt}=ot;if(nt==="#text"){const m=document.createTextNode(ot.value);st.push(m),lt.append(m);continue}const d=(et=ot==null?void 0:ot.attributes)!=null&&et.xmlns?document.createElementNS(ot.attributes.xmlns,nt):document.createElement(nt);if(lt.append(d),ot.attributes&&this.setAttributes({html:d,element:ot,storage:Wt,intent:X,linkService:ut}),ot.children&&ot.children.length>0)_t.push([ot,-1,d]);else if(ot.value){const m=document.createTextNode(ot.value);o.XfaText.shouldBuildText(nt)&&st.push(m),d.append(m)}}for(const j of ht.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))j.setAttribute("readOnly",!0);return{textDivs:st}}static update(bt){const Wt=`matrix(${bt.viewport.transform.join(",")})`;bt.div.style.transform=Wt,bt.div.hidden=!1}}s.XfaLayer=k},(b,s,ft)=>{var rt,X,mt,_t,ht,st,et,j,tt,lt,ot,nt,d,m,pt,ys,f,As,$,vs,wt,Es,Rt,zn,$t,Ss,Vt,Xn,ne,Ts,ct,Ps,h,ws,g,Cs,it,xs,vt,We,Lt,qn,Gt,fn,zt,pn,ye,qe,pe,Yn,It,gn,qt,Rs,oe,Kn,Pe,ks,we,Fs,Ee,Jn,Xt,mn,kt,Ye;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var o=ft(1),k=ft(4),St=ft(29),bt=ft(6),Wt=ft(5);const ee=class ee extends k.AnnotationEditor{constructor(Mt){super({...Mt,name:"inkEditor"});Et(this,pt);Et(this,f);Et(this,$);Et(this,wt);Et(this,Rt);Et(this,$t);Et(this,Vt);Et(this,ne);Et(this,ct);Et(this,h);Et(this,g);Et(this,it);Et(this,vt);Et(this,Lt);Et(this,Gt);Et(this,zt);Et(this,ye);Et(this,pe);Et(this,It);Et(this,we);Et(this,Ee);Et(this,Xt);Et(this,kt);Et(this,rt,0);Et(this,X,0);Et(this,mt,this.canvasPointermove.bind(this));Et(this,_t,this.canvasPointerleave.bind(this));Et(this,ht,this.canvasPointerup.bind(this));Et(this,st,this.canvasPointerdown.bind(this));Et(this,et,new Path2D);Et(this,j,!1);Et(this,tt,!1);Et(this,lt,!1);Et(this,ot,null);Et(this,nt,0);Et(this,d,0);Et(this,m,null);this.color=Mt.color||null,this.thickness=Mt.thickness||null,this.opacity=Mt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Mt){k.AnnotationEditor.initialize(Mt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Mt,ie){switch(Mt){case o.AnnotationEditorParamsType.INK_THICKNESS:ee._defaultThickness=ie;break;case o.AnnotationEditorParamsType.INK_COLOR:ee._defaultColor=ie;break;case o.AnnotationEditorParamsType.INK_OPACITY:ee._defaultOpacity=ie/100;break}}updateParams(Mt,ie){switch(Mt){case o.AnnotationEditorParamsType.INK_THICKNESS:xt(this,pt,ys).call(this,ie);break;case o.AnnotationEditorParamsType.INK_COLOR:xt(this,f,As).call(this,ie);break;case o.AnnotationEditorParamsType.INK_OPACITY:xt(this,$,vs).call(this,ie);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,ee._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,ee._defaultColor||k.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ee._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||ee._defaultColor||k.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(xt(this,Gt,fn).call(this),xt(this,zt,pn).call(this)),this.isAttachedToDOM||(this.parent.add(this),xt(this,ye,qe).call(this)),xt(this,kt,Ye).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,ot).disconnect(),jt(this,ot,null),super.remove())}setParent(Mt){!this.parent&&Mt?this._uiManager.removeShouldRescale(this):this.parent&&Mt===null&&this._uiManager.addShouldRescale(this),super.setParent(Mt)}onScaleChanging(){const[Mt,ie]=this.parentDimensions,me=this.width*Mt,le=this.height*ie;this.setDimensions(me,le)}enableEditMode(){e(this,j)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,st)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,st)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,j)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),jt(this,j,!0),this.div.classList.add("disabled"),xt(this,kt,Ye).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Mt){this._focusEventsAllowed&&(super.focusin(Mt),this.enableEditMode())}canvasPointerdown(Mt){Mt.button!==0||!this.isInEditMode()||e(this,j)||(this.setInForeground(),Mt.preventDefault(),Mt.type!=="mouse"&&this.div.focus(),xt(this,$t,Ss).call(this,Mt.offsetX,Mt.offsetY))}canvasPointermove(Mt){Mt.preventDefault(),xt(this,Vt,Xn).call(this,Mt.offsetX,Mt.offsetY)}canvasPointerup(Mt){Mt.preventDefault(),xt(this,Lt,qn).call(this,Mt)}canvasPointerleave(Mt){xt(this,Lt,qn).call(this,Mt)}get isResizable(){return!this.isEmpty()&&e(this,j)}render(){if(this.div)return this.div;let Mt,ie;this.width&&(Mt=this.x,ie=this.y),super.render(),k.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Me=>{var te;return(te=this.div)==null?void 0:te.setAttribute("aria-label",Me)});const[me,le,be,_e]=xt(this,wt,Es).call(this);if(this.setAt(me,le,0,0),this.setDims(be,_e),xt(this,Gt,fn).call(this),this.width){const[Me,te]=this.parentDimensions;this.setAspectRatio(this.width*Me,this.height*te),this.setAt(Mt*Me,ie*te,this.width*Me,this.height*te),jt(this,lt,!0),xt(this,ye,qe).call(this),this.setDims(this.width*Me,this.height*te),xt(this,vt,We).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return xt(this,zt,pn).call(this),this.div}setDimensions(Mt,ie){const me=Math.round(Mt),le=Math.round(ie);if(e(this,nt)===me&&e(this,d)===le)return;jt(this,nt,me),jt(this,d,le),this.canvas.style.visibility="hidden";const[be,_e]=this.parentDimensions;this.width=Mt/be,this.height=ie/_e,this.fixAndSetPosition(),e(this,j)&&xt(this,pe,Yn).call(this,Mt,ie),xt(this,ye,qe).call(this),xt(this,vt,We).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Mt,ie,me){var Ct,Ft,Ht;if(Mt instanceof St.InkAnnotationElement)return null;const le=super.deserialize(Mt,ie,me);le.thickness=Mt.thickness,le.color=o.Util.makeHexColor(...Mt.color),le.opacity=Mt.opacity;const[be,_e]=le.pageDimensions,Me=le.width*be,te=le.height*_e,ke=le.parentScale,ge=Mt.thickness/2;jt(le,j,!0),jt(le,nt,Math.round(Me)),jt(le,d,Math.round(te));const{paths:yt,rect:i,rotation:Z}=Mt;for(let{bezier:Qt}of yt){Qt=xt(Ct=ee,Pe,ks).call(Ct,Qt,i,Z);const he=[];le.paths.push(he);let ce=ke*(Qt[0]-ge),xe=ke*(Qt[1]-ge);for(let fe=2,Se=Qt.length;fe<Se;fe+=6){const Re=ke*(Qt[fe]-ge),Fe=ke*(Qt[fe+1]-ge),De=ke*(Qt[fe+2]-ge),Be=ke*(Qt[fe+3]-ge),Ne=ke*(Qt[fe+4]-ge),Ue=ke*(Qt[fe+5]-ge);he.push([[ce,xe],[Re,Fe],[De,Be],[Ne,Ue]]),ce=Ne,xe=Ue}const de=xt(this,qt,Rs).call(this,he);le.bezierPath2D.push(de)}const At=xt(Ft=le,Ee,Jn).call(Ft);return jt(le,X,Math.max(k.AnnotationEditor.MIN_SIZE,At[2]-At[0])),jt(le,rt,Math.max(k.AnnotationEditor.MIN_SIZE,At[3]-At[1])),xt(Ht=le,pe,Yn).call(Ht,Me,te),le}serialize(){if(this.isEmpty())return null;const Mt=this.getRect(0,0),ie=k.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:ie,thickness:this.thickness,opacity:this.opacity,paths:xt(this,we,Fs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Mt),pageIndex:this.pageIndex,rect:Mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};rt=new WeakMap,X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakMap,lt=new WeakMap,ot=new WeakMap,nt=new WeakMap,d=new WeakMap,m=new WeakMap,pt=new WeakSet,ys=function(Mt){const ie=this.thickness;this.addCommands({cmd:()=>{this.thickness=Mt,xt(this,kt,Ye).call(this)},undo:()=>{this.thickness=ie,xt(this,kt,Ye).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,As=function(Mt){const ie=this.color;this.addCommands({cmd:()=>{this.color=Mt,xt(this,vt,We).call(this)},undo:()=>{this.color=ie,xt(this,vt,We).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,vs=function(Mt){Mt/=100;const ie=this.opacity;this.addCommands({cmd:()=>{this.opacity=Mt,xt(this,vt,We).call(this)},undo:()=>{this.opacity=ie,xt(this,vt,We).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},wt=new WeakSet,Es=function(){const{parentRotation:Mt,parentDimensions:[ie,me]}=this;switch(Mt){case 90:return[0,me,me,ie];case 180:return[ie,me,ie,me];case 270:return[ie,0,me,ie];default:return[0,0,ie,me]}},Rt=new WeakSet,zn=function(){const{ctx:Mt,color:ie,opacity:me,thickness:le,parentScale:be,scaleFactor:_e}=this;Mt.lineWidth=le*be/_e,Mt.lineCap="round",Mt.lineJoin="round",Mt.miterLimit=10,Mt.strokeStyle=`${ie}${(0,Wt.opacityToHex)(me)}`},$t=new WeakSet,Ss=function(Mt,ie){this.canvas.addEventListener("contextmenu",bt.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,_t)),this.canvas.addEventListener("pointermove",e(this,mt)),this.canvas.addEventListener("pointerup",e(this,ht)),this.canvas.removeEventListener("pointerdown",e(this,st)),this.isEditing=!0,e(this,lt)||(jt(this,lt,!0),xt(this,ye,qe).call(this),this.thickness||(this.thickness=ee._defaultThickness),this.color||(this.color=ee._defaultColor||k.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ee._defaultOpacity)),this.currentPath.push([Mt,ie]),jt(this,tt,!1),xt(this,Rt,zn).call(this),jt(this,m,()=>{xt(this,h,ws).call(this),e(this,m)&&window.requestAnimationFrame(e(this,m))}),window.requestAnimationFrame(e(this,m))},Vt=new WeakSet,Xn=function(Mt,ie){const[me,le]=this.currentPath.at(-1);if(this.currentPath.length>1&&Mt===me&&ie===le)return;const be=this.currentPath;let _e=e(this,et);if(be.push([Mt,ie]),jt(this,tt,!0),be.length<=2){_e.moveTo(...be[0]),_e.lineTo(Mt,ie);return}be.length===3&&(jt(this,et,_e=new Path2D),_e.moveTo(...be[0])),xt(this,g,Cs).call(this,_e,...be.at(-3),...be.at(-2),Mt,ie)},ne=new WeakSet,Ts=function(){if(this.currentPath.length===0)return;const Mt=this.currentPath.at(-1);e(this,et).lineTo(...Mt)},ct=new WeakSet,Ps=function(Mt,ie){jt(this,m,null),Mt=Math.min(Math.max(Mt,0),this.canvas.width),ie=Math.min(Math.max(ie,0),this.canvas.height),xt(this,Vt,Xn).call(this,Mt,ie),xt(this,ne,Ts).call(this);let me;if(this.currentPath.length!==1)me=xt(this,it,xs).call(this);else{const te=[Mt,ie];me=[[te,te.slice(),te.slice(),te]]}const le=e(this,et),be=this.currentPath;this.currentPath=[],jt(this,et,new Path2D);const _e=()=>{this.allRawPaths.push(be),this.paths.push(me),this.bezierPath2D.push(le),this.rebuild()},Me=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(xt(this,Gt,fn).call(this),xt(this,zt,pn).call(this)),xt(this,kt,Ye).call(this))};this.addCommands({cmd:_e,undo:Me,mustExec:!0})},h=new WeakSet,ws=function(){if(!e(this,tt))return;jt(this,tt,!1);const Mt=Math.ceil(this.thickness*this.parentScale),ie=this.currentPath.slice(-3),me=ie.map(_e=>_e[0]),le=ie.map(_e=>_e[1]);Math.min(...me)-Mt,Math.max(...me)+Mt,Math.min(...le)-Mt,Math.max(...le)+Mt;const{ctx:be}=this;be.save(),be.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _e of this.bezierPath2D)be.stroke(_e);be.stroke(e(this,et)),be.restore()},g=new WeakSet,Cs=function(Mt,ie,me,le,be,_e,Me){const te=(ie+le)/2,ke=(me+be)/2,ge=(le+_e)/2,yt=(be+Me)/2;Mt.bezierCurveTo(te+2*(le-te)/3,ke+2*(be-ke)/3,ge+2*(le-ge)/3,yt+2*(be-yt)/3,ge,yt)},it=new WeakSet,xs=function(){const Mt=this.currentPath;if(Mt.length<=2)return[[Mt[0],Mt[0],Mt.at(-1),Mt.at(-1)]];const ie=[];let me,[le,be]=Mt[0];for(me=1;me<Mt.length-2;me++){const[i,Z]=Mt[me],[At,Ct]=Mt[me+1],Ft=(i+At)/2,Ht=(Z+Ct)/2,Qt=[le+2*(i-le)/3,be+2*(Z-be)/3],he=[Ft+2*(i-Ft)/3,Ht+2*(Z-Ht)/3];ie.push([[le,be],Qt,he,[Ft,Ht]]),[le,be]=[Ft,Ht]}const[_e,Me]=Mt[me],[te,ke]=Mt[me+1],ge=[le+2*(_e-le)/3,be+2*(Me-be)/3],yt=[te+2*(_e-te)/3,ke+2*(Me-ke)/3];return ie.push([[le,be],ge,yt,[te,ke]]),ie},vt=new WeakSet,We=function(){if(this.isEmpty()){xt(this,It,gn).call(this);return}xt(this,Rt,zn).call(this);const{canvas:Mt,ctx:ie}=this;ie.setTransform(1,0,0,1,0,0),ie.clearRect(0,0,Mt.width,Mt.height),xt(this,It,gn).call(this);for(const me of this.bezierPath2D)ie.stroke(me)},Lt=new WeakSet,qn=function(Mt){this.canvas.removeEventListener("pointerleave",e(this,_t)),this.canvas.removeEventListener("pointermove",e(this,mt)),this.canvas.removeEventListener("pointerup",e(this,ht)),this.canvas.addEventListener("pointerdown",e(this,st)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",bt.noContextMenu)},10),xt(this,ct,Ps).call(this,Mt.offsetX,Mt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Gt=new WeakSet,fn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",k.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Mt=>{var ie;return(ie=this.canvas)==null?void 0:ie.setAttribute("aria-label",Mt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},zt=new WeakSet,pn=function(){jt(this,ot,new ResizeObserver(Mt=>{const ie=Mt[0].contentRect;ie.width&&ie.height&&this.setDimensions(ie.width,ie.height)})),e(this,ot).observe(this.div)},ye=new WeakSet,qe=function(){if(!e(this,lt))return;const[Mt,ie]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Mt),this.canvas.height=Math.ceil(this.height*ie),xt(this,It,gn).call(this)},pe=new WeakSet,Yn=function(Mt,ie){const me=xt(this,Xt,mn).call(this),le=(Mt-me)/e(this,X),be=(ie-me)/e(this,rt);this.scaleFactor=Math.min(le,be)},It=new WeakSet,gn=function(){const Mt=xt(this,Xt,mn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Mt,this.translationY*this.scaleFactor+Mt)},qt=new WeakSet,Rs=function(Mt){const ie=new Path2D;for(let me=0,le=Mt.length;me<le;me++){const[be,_e,Me,te]=Mt[me];me===0&&ie.moveTo(...be),ie.bezierCurveTo(_e[0],_e[1],Me[0],Me[1],te[0],te[1])}return ie},oe=new WeakSet,Kn=function(Mt,ie,me){const[le,be,_e,Me]=ie;switch(me){case 0:for(let te=0,ke=Mt.length;te<ke;te+=2)Mt[te]+=le,Mt[te+1]=Me-Mt[te+1];break;case 90:for(let te=0,ke=Mt.length;te<ke;te+=2){const ge=Mt[te];Mt[te]=Mt[te+1]+le,Mt[te+1]=ge+be}break;case 180:for(let te=0,ke=Mt.length;te<ke;te+=2)Mt[te]=_e-Mt[te],Mt[te+1]+=be;break;case 270:for(let te=0,ke=Mt.length;te<ke;te+=2){const ge=Mt[te];Mt[te]=_e-Mt[te+1],Mt[te+1]=Me-ge}break;default:throw new Error("Invalid rotation")}return Mt},Pe=new WeakSet,ks=function(Mt,ie,me){const[le,be,_e,Me]=ie;switch(me){case 0:for(let te=0,ke=Mt.length;te<ke;te+=2)Mt[te]-=le,Mt[te+1]=Me-Mt[te+1];break;case 90:for(let te=0,ke=Mt.length;te<ke;te+=2){const ge=Mt[te];Mt[te]=Mt[te+1]-be,Mt[te+1]=ge-le}break;case 180:for(let te=0,ke=Mt.length;te<ke;te+=2)Mt[te]=_e-Mt[te],Mt[te+1]-=be;break;case 270:for(let te=0,ke=Mt.length;te<ke;te+=2){const ge=Mt[te];Mt[te]=Me-Mt[te+1],Mt[te+1]=_e-ge}break;default:throw new Error("Invalid rotation")}return Mt},we=new WeakSet,Fs=function(Mt,ie,me,le){var ke,ge;const be=[],_e=this.thickness/2,Me=Mt*ie+_e,te=Mt*me+_e;for(const yt of this.paths){const i=[],Z=[];for(let At=0,Ct=yt.length;At<Ct;At++){const[Ft,Ht,Qt,he]=yt[At],ce=Mt*Ft[0]+Me,xe=Mt*Ft[1]+te,de=Mt*Ht[0]+Me,fe=Mt*Ht[1]+te,Se=Mt*Qt[0]+Me,Re=Mt*Qt[1]+te,Fe=Mt*he[0]+Me,De=Mt*he[1]+te;At===0&&(i.push(ce,xe),Z.push(ce,xe)),i.push(de,fe,Se,Re,Fe,De),Z.push(de,fe),At===Ct-1&&Z.push(Fe,De)}be.push({bezier:xt(ke=ee,oe,Kn).call(ke,i,le,this.rotation),points:xt(ge=ee,oe,Kn).call(ge,Z,le,this.rotation)})}return be},Ee=new WeakSet,Jn=function(){let Mt=1/0,ie=-1/0,me=1/0,le=-1/0;for(const be of this.paths)for(const[_e,Me,te,ke]of be){const ge=o.Util.bezierBoundingBox(..._e,...Me,...te,...ke);Mt=Math.min(Mt,ge[0]),me=Math.min(me,ge[1]),ie=Math.max(ie,ge[2]),le=Math.max(le,ge[3])}return[Mt,me,ie,le]},Xt=new WeakSet,mn=function(){return e(this,j)?Math.ceil(this.thickness*this.parentScale):0},kt=new WeakSet,Ye=function(Mt=!1){if(this.isEmpty())return;if(!e(this,j)){xt(this,vt,We).call(this);return}const ie=xt(this,Ee,Jn).call(this),me=xt(this,Xt,mn).call(this);jt(this,X,Math.max(k.AnnotationEditor.MIN_SIZE,ie[2]-ie[0])),jt(this,rt,Math.max(k.AnnotationEditor.MIN_SIZE,ie[3]-ie[1]));const le=Math.ceil(me+e(this,X)*this.scaleFactor),be=Math.ceil(me+e(this,rt)*this.scaleFactor),[_e,Me]=this.parentDimensions;this.width=le/_e,this.height=be/Me,this.setAspectRatio(le,be);const te=this.translationX,ke=this.translationY;this.translationX=-ie[0],this.translationY=-ie[1],xt(this,ye,qe).call(this),xt(this,vt,We).call(this),jt(this,nt,le),jt(this,d,be),this.setDims(le,be);const ge=Mt?me/this.scaleFactor/2:0;this.translate(te-this.translationX-ge,ke-this.translationY-ge)},Et(ee,qt),Et(ee,oe),Et(ee,Pe),Ie(ee,"_defaultColor",null),Ie(ee,"_defaultOpacity",1),Ie(ee,"_defaultThickness",1),Ie(ee,"_type","ink");let ut=ee;s.InkEditor=ut},(b,s,ft)=>{var ut,rt,X,mt,_t,ht,st,et,j,tt,lt,nn,nt,sn,m,bn,Y,Qn,dt,Ms,Tt,Ds,at,Zn,Ut,_n,Pt,Ls;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var o=ft(1),k=ft(4),St=ft(6),bt=ft(29);const Kt=class Kt extends k.AnnotationEditor{constructor(ct){super({...ct,name:"stampEditor"});Et(this,lt);Et(this,nt);Et(this,m);Et(this,Y);Et(this,dt);Et(this,Tt);Et(this,at);Et(this,Ut);Et(this,Pt);Et(this,ut,null);Et(this,rt,null);Et(this,X,null);Et(this,mt,null);Et(this,_t,null);Et(this,ht,null);Et(this,st,null);Et(this,et,null);Et(this,j,!1);Et(this,tt,!1);jt(this,mt,ct.bitmapUrl),jt(this,_t,ct.bitmapFile)}static initialize(ct){k.AnnotationEditor.initialize(ct)}static get supportedTypes(){const ct=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",ct.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ct){return this.supportedTypes.includes(ct)}static paste(ct,a){a.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:ct.getAsFile()})}remove(){var ct,a;e(this,rt)&&(jt(this,ut,null),this._uiManager.imageManager.deleteId(e(this,rt)),(ct=e(this,ht))==null||ct.remove(),jt(this,ht,null),(a=e(this,st))==null||a.disconnect(),jt(this,st,null)),super.remove()}rebuild(){if(!this.parent){e(this,rt)&&xt(this,m,bn).call(this);return}super.rebuild(),this.div!==null&&(e(this,rt)&&xt(this,m,bn).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,X)||e(this,ut)||e(this,mt)||e(this,_t))}get isResizable(){return!0}render(){if(this.div)return this.div;let ct,a;if(this.width&&(ct=this.x,a=this.y),super.render(),this.div.hidden=!0,e(this,ut)?xt(this,Y,Qn).call(this):xt(this,m,bn).call(this),this.width){const[h,c]=this.parentDimensions;this.setAt(ct*h,a*c,this.width*h,this.height*c)}return this.div}static deserialize(ct,a,h){if(ct instanceof bt.StampAnnotationElement)return null;const c=super.deserialize(ct,a,h),{rect:g,bitmapUrl:_,bitmapId:it,isSvg:gt,accessibilityData:vt}=ct;it&&h.imageManager.isValidId(it)?jt(c,rt,it):jt(c,mt,_),jt(c,j,gt);const[Bt,Lt]=c.pageDimensions;return c.width=(g[2]-g[0])/Bt,c.height=(g[3]-g[1])/Lt,vt&&(c.altTextData=vt),c}serialize(ct=!1,a=null){if(this.isEmpty())return null;const h={annotationType:o.AnnotationEditorType.STAMP,bitmapId:e(this,rt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,j),structTreeParentId:this._structTreeParentId};if(ct)return h.bitmapUrl=xt(this,Ut,_n).call(this,!0),h.accessibilityData=this.altTextData,h;const{decorative:c,altText:g}=this.altTextData;if(!c&&g&&(h.accessibilityData={type:"Figure",alt:g}),a===null)return h;a.stamps||(a.stamps=new Map);const _=e(this,j)?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!a.stamps.has(e(this,rt)))a.stamps.set(e(this,rt),{area:_,serialized:h}),h.bitmap=xt(this,Ut,_n).call(this,!1);else if(e(this,j)){const it=a.stamps.get(e(this,rt));_>it.area&&(it.area=_,it.serialized.bitmap.close(),it.serialized.bitmap=xt(this,Ut,_n).call(this,!1))}return h}};ut=new WeakMap,rt=new WeakMap,X=new WeakMap,mt=new WeakMap,_t=new WeakMap,ht=new WeakMap,st=new WeakMap,et=new WeakMap,j=new WeakMap,tt=new WeakMap,lt=new WeakSet,nn=function(ct,a=!1){if(!ct){this.remove();return}jt(this,ut,ct.bitmap),a||(jt(this,rt,ct.id),jt(this,j,ct.isSvg)),xt(this,Y,Qn).call(this)},nt=new WeakSet,sn=function(){jt(this,X,null),this._uiManager.enableWaiting(!1),e(this,ht)&&this.div.focus()},m=new WeakSet,bn=function(){if(e(this,rt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,rt)).then(a=>xt(this,lt,nn).call(this,a,!0)).finally(()=>xt(this,nt,sn).call(this));return}if(e(this,mt)){const a=e(this,mt);jt(this,mt,null),this._uiManager.enableWaiting(!0),jt(this,X,this._uiManager.imageManager.getFromUrl(a).then(h=>xt(this,lt,nn).call(this,h)).finally(()=>xt(this,nt,sn).call(this)));return}if(e(this,_t)){const a=e(this,_t);jt(this,_t,null),this._uiManager.enableWaiting(!0),jt(this,X,this._uiManager.imageManager.getFromFile(a).then(h=>xt(this,lt,nn).call(this,h)).finally(()=>xt(this,nt,sn).call(this)));return}const ct=document.createElement("input");ct.type="file",ct.accept=Kt.supportedTypesStr,jt(this,X,new Promise(a=>{ct.addEventListener("change",async()=>{if(!ct.files||ct.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const h=await this._uiManager.imageManager.getFromFile(ct.files[0]);xt(this,lt,nn).call(this,h)}a()}),ct.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>xt(this,nt,sn).call(this))),ct.click()},Y=new WeakSet,Qn=function(){const{div:ct}=this;let{width:a,height:h}=e(this,ut);const[c,g]=this.pageDimensions,_=.75;if(this.width)a=this.width*c,h=this.height*g;else if(a>_*c||h>_*g){const Bt=Math.min(_*c/a,_*g/h);a*=Bt,h*=Bt}const[it,gt]=this.parentDimensions;this.setDims(a*it/c,h*gt/g),this._uiManager.enableWaiting(!1);const vt=jt(this,ht,document.createElement("canvas"));ct.append(vt),ct.hidden=!1,xt(this,at,Zn).call(this,a,h),xt(this,Pt,Ls).call(this),e(this,tt)||(this.parent.addUndoableEditor(this),jt(this,tt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},dt=new WeakSet,Ms=function(ct,a){var _;const[h,c]=this.parentDimensions;this.width=ct/h,this.height=a/c,this.setDims(ct,a),(_=this._initialOptions)!=null&&_.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,et)!==null&&clearTimeout(e(this,et)),jt(this,et,setTimeout(()=>{jt(this,et,null),xt(this,at,Zn).call(this,ct,a)},200))},Tt=new WeakSet,Ds=function(ct,a){const{width:h,height:c}=e(this,ut);let g=h,_=c,it=e(this,ut);for(;g>2*ct||_>2*a;){const gt=g,vt=_;g>2*ct&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2)),_>2*a&&(_=_>=16384?Math.floor(_/2)-1:Math.ceil(_/2));const Bt=new OffscreenCanvas(g,_);Bt.getContext("2d").drawImage(it,0,0,gt,vt,0,0,g,_),it=Bt.transferToImageBitmap()}return it},at=new WeakSet,Zn=function(ct,a){ct=Math.ceil(ct),a=Math.ceil(a);const h=e(this,ht);if(!h||h.width===ct&&h.height===a)return;h.width=ct,h.height=a;const c=e(this,j)?e(this,ut):xt(this,Tt,Ds).call(this,ct,a),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(c,0,0,c.width,c.height,0,0,ct,a)},Ut=new WeakSet,_n=function(ct){if(ct){if(e(this,j)){const c=this._uiManager.imageManager.getSvgUrl(e(this,rt));if(c)return c}const a=document.createElement("canvas");return{width:a.width,height:a.height}=e(this,ut),a.getContext("2d").drawImage(e(this,ut),0,0),a.toDataURL()}if(e(this,j)){const[a,h]=this.pageDimensions,c=Math.round(this.width*a*St.PixelsPerInch.PDF_TO_CSS_UNITS),g=Math.round(this.height*h*St.PixelsPerInch.PDF_TO_CSS_UNITS),_=new OffscreenCanvas(c,g);return _.getContext("2d").drawImage(e(this,ut),0,0,e(this,ut).width,e(this,ut).height,0,0,c,g),_.transferToImageBitmap()}return structuredClone(e(this,ut))},Pt=new WeakSet,Ls=function(){jt(this,st,new ResizeObserver(ct=>{const a=ct[0].contentRect;a.width&&a.height&&xt(this,dt,Ms).call(this,a.width,a.height)})),e(this,st).observe(this.div)},Ie(Kt,"_type","stamp");let Wt=Kt;s.StampEditor=Wt}],__webpack_module_cache__={};function __w_pdfjs_require__(b){var s=__webpack_module_cache__[b];if(s!==void 0)return s.exports;var ft=__webpack_module_cache__[b]={exports:{}};return __webpack_modules__[b](ft,ft.exports,__w_pdfjs_require__),ft.exports}var __webpack_exports__={};return(()=>{var b=__webpack_exports__;Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(b,"AnnotationEditorLayer",{enumerable:!0,get:function(){return St.AnnotationEditorLayer}}),Object.defineProperty(b,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(b,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(b,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return bt.AnnotationEditorUIManager}}),Object.defineProperty(b,"AnnotationLayer",{enumerable:!0,get:function(){return Wt.AnnotationLayer}}),Object.defineProperty(b,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(b,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(b,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(b,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(b,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ut.GlobalWorkerOptions}}),Object.defineProperty(b,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(b,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(b,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(b,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(b,"PDFDataRangeTransport",{enumerable:!0,get:function(){return ft.PDFDataRangeTransport}}),Object.defineProperty(b,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(b,"PDFWorker",{enumerable:!0,get:function(){return ft.PDFWorker}}),Object.defineProperty(b,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(b,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(b,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(b,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(b,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(b,"SVGGraphics",{enumerable:!0,get:function(){return ft.SVGGraphics}}),Object.defineProperty(b,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(b,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(b,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(b,"XfaLayer",{enumerable:!0,get:function(){return rt.XfaLayer}}),Object.defineProperty(b,"build",{enumerable:!0,get:function(){return ft.build}}),Object.defineProperty(b,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(b,"getDocument",{enumerable:!0,get:function(){return ft.getDocument}}),Object.defineProperty(b,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(b,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(b,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(b,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(b,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(b,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(b,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(b,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(b,"renderTextLayer",{enumerable:!0,get:function(){return k.renderTextLayer}}),Object.defineProperty(b,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(b,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(b,"updateTextLayer",{enumerable:!0,get:function(){return k.updateTextLayer}}),Object.defineProperty(b,"version",{enumerable:!0,get:function(){return ft.version}});var s=__w_pdfjs_require__(1),ft=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),k=__w_pdfjs_require__(26),St=__w_pdfjs_require__(27),bt=__w_pdfjs_require__(5),Wt=__w_pdfjs_require__(29),ut=__w_pdfjs_require__(14),rt=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function b(o,k,St,bt,Wt,ut){if(ut!==ReactPropTypesSecret){var rt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw rt.name="Invariant Violation",rt}}b.isRequired=b;function s(){return b}var ft={array:b,bigint:b,bool:b,func:b,number:b,object:b,string:b,symbol:b,any:b,arrayOf:s,element:b,elementType:b,instanceOf:s,node:b,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ft.PropTypes=ft,ft};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=globalThis&&globalThis.__spreadArray||function(b,s,ft){if(ft||arguments.length===2)for(var o=0,k=s.length,St;o<k;o++)(St||!(o in s))&&(St||(St=Array.prototype.slice.call(s,0,o)),St[o]=s[o]);return b.concat(St||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(b,s){var ft={};return allEvents.forEach(function(o){var k=b[o];k&&(s?ft[o]=function(St){return k(St,s(o))}:ft[o]=k)}),ft}function makeCancellablePromise(b){var s=!1,ft=new Promise(function(o,k){b.then(function(St){return!s&&o(St)}).catch(function(St){return!s&&k(St)})});return{promise:ft,cancel:function(){s=!0}}}function r(b){var s,ft,o="";if(typeof b=="string"||typeof b=="number")o+=b;else if(typeof b=="object")if(Array.isArray(b))for(s=0;s<b.length;s++)b[s]&&(ft=r(b[s]))&&(o&&(o+=" "),o+=ft);else for(s in b)b[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var b,s,ft=0,o="";ft<arguments.length;)(b=arguments[ft++])&&(s=r(b))&&(o&&(o+=" "),o+=s);return o}var isProduction$1=!0,prefix="Invariant failed";function invariant(b,s){if(!b){if(isProduction$1)throw new Error(prefix);var ft=typeof s=="function"?s():s,o=ft?"".concat(prefix,": ").concat(ft):prefix;throw new Error(o)}}var isProduction=!0;function warning(b,s){if(!isProduction){if(b)return;var ft="Warning: "+s;typeof console<"u"&&console.warn(ft);try{throw Error(ft)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message({children:b,type:s}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${s}`},b)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(s){this.pdfDocument=s}setViewer(s){this.pdfViewer=s}setExternalLinkRel(s){this.externalLinkRel=s}setExternalLinkTarget(s){this.externalLinkTarget=s}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(s){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=s}get rotation(){return 0}set rotation(s){}goToDestination(s){return new Promise(ft=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(s,"Destination is not specified."),typeof s=="string"?this.pdfDocument.getDestination(s).then(ft):Array.isArray(s)?ft(s):s.then(ft)}).then(ft=>{invariant(Array.isArray(ft),`"${ft}" is not a valid destination array.`);const o=ft[0];new Promise(k=>{invariant(this.pdfDocument,"PDF document not loaded."),o instanceof Object?this.pdfDocument.getPageIndex(o).then(St=>{k(St)}).catch(()=>{invariant(!1,`"${o}" is not a valid page reference.`)}):typeof o=="number"?k(o):invariant(!1,`"${o}" is not a valid destination reference.`)}).then(k=>{const St=k+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(St>=1&&St<=this.pagesCount,`"${St}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:ft,pageIndex:k,pageNumber:St})})})}navigateTo(s){this.goToDestination(s)}goToPage(s){const ft=s-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(s>=1&&s<=this.pagesCount,`"${s}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:ft,pageNumber:s})}addLinkAttributes(s,ft,o){s.href=ft,s.rel=this.externalLinkRel||DEFAULT_LINK_REL,s.target=o?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(b){return typeof b<"u"}function isProvided(b){return isDefined(b)&&b!==null}function isString(b){return typeof b=="string"}function isArrayBuffer(b){return b instanceof ArrayBuffer}function isBlob(b){return invariant(isBrowser,"isBlob can only be used in a browser environment"),b instanceof Blob}function isDataURI(b){return isString(b)&&/^data:/.test(b)}function dataURItoByteString(b){invariant(isDataURI(b),"Invalid data URI.");const[s="",ft=""]=b.split(",");return s.split(";").indexOf("base64")!==-1?atob(ft):unescape(ft)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(b){b&&b.cancel&&b.cancel()}function makePageCallback(b,s){return Object.defineProperty(b,"width",{get(){return this.view[2]*s},configurable:!0}),Object.defineProperty(b,"height",{get(){return this.view[3]*s},configurable:!0}),Object.defineProperty(b,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(b,"originalHeight",{get(){return this.view[3]},configurable:!0}),b}function isCancelException(b){return b.name==="RenderingCancelledException"}function loadFromFile(b){return new Promise((s,ft)=>{const o=new FileReader;o.onload=()=>{if(!o.result)return ft(new Error("Error while reading a file."));s(o.result)},o.onerror=k=>{if(!k.target)return ft(new Error("Error while reading a file."));const{error:St}=k.target;if(!St)return ft(new Error("Error while reading a file."));switch(St.code){case St.NOT_FOUND_ERR:return ft(new Error("Error while reading a file: File not found."));case St.SECURITY_ERR:return ft(new Error("Error while reading a file: Security error."));case St.ABORT_ERR:return ft(new Error("Error while reading a file: Aborted."));default:return ft(new Error("Error while reading a file."))}},o.readAsArrayBuffer(b)})}function reducer(b,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return b}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const b={};return allEvents.forEach(s=>{b[s]=PropTypes.func}),b})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function b(s,ft,o){const{[ft]:k,pageNumber:St,pdf:bt}=s;if(!isDefined(bt))return null;if(isDefined(k)){if(typeof k!="number")return new Error(`\`${ft}\` of type \`${typeof k}\` supplied to \`${o}\`, expected \`number\`.`);if(k<0)return new Error(`Expected \`${ft}\` to be greater or equal to 0.`);const{numPages:Wt}=bt;if(k+1>Wt)return new Error(`Expected \`${ft}\` to be less or equal to ${Wt-1}.`)}else if(!isDefined(St))return new Error(`\`${ft}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPageNumber=function b(s,ft,o){const{[ft]:k,pageIndex:St,pdf:bt}=s;if(!isDefined(bt))return null;if(isDefined(k)){if(typeof k!="number")return new Error(`\`${ft}\` of type \`${typeof k}\` supplied to \`${o}\`, expected \`number\`.`);if(k<1)return new Error(`Expected \`${ft}\` to be greater or equal to 1.`);const{numPages:Wt}=bt;if(k>Wt)return new Error(`Expected \`${ft}\` to be less or equal to ${Wt}.`)}else if(!isDefined(St))return new Error(`\`${ft}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(b,s,ft,o){function k(St){return St instanceof ft?St:new ft(function(bt){bt(St)})}return new(ft||(ft=Promise))(function(St,bt){function Wt(X){try{rt(o.next(X))}catch(mt){bt(mt)}}function ut(X){try{rt(o.throw(X))}catch(mt){bt(mt)}}function rt(X){X.done?St(X.value):k(X.value).then(Wt,ut)}rt((o=o.apply(b,s||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(b,s){var ft={};for(var o in b)Object.prototype.hasOwnProperty.call(b,o)&&s.indexOf(o)<0&&(ft[o]=b[o]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,o=Object.getOwnPropertySymbols(b);k<o.length;k++)s.indexOf(o[k])<0&&Object.prototype.propertyIsEnumerable.call(b,o[k])&&(ft[o[k]]=b[o[k]]);return ft};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(b,s)=>{switch(s){case PasswordResponses$1.NEED_PASSWORD:{const ft=prompt("Enter the password to open this PDF file.");b(ft);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const ft=prompt("Invalid password. Please try again.");b(ft);break}}},Document=reactExports.forwardRef(function b(s,ft){var{children:o,className:k,error:St="Failed to load PDF file.",externalLinkRel:bt,externalLinkTarget:Wt,file:ut,inputRef:rt,imageResourcesPath:X,loading:mt="Loading PDF…",noData:_t="No PDF file specified.",onItemClick:ht,onLoadError:st,onLoadProgress:et,onLoadSuccess:j,onPassword:tt=defaultOnPassword,onSourceError:lt,onSourceSuccess:ot,options:nt,renderMode:d,rotate:m}=s,pt=__rest$1(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Y,f]=useResolver(),{value:dt,error:$}=Y,[Tt,wt]=useResolver(),{value:at,error:Rt}=Tt,Ut=reactExports.useRef(new LinkService),$t=reactExports.useRef([]),Pt=reactExports.useRef({scrollPageIntoView:Ot=>{const{dest:Gt,pageNumber:Jt,pageIndex:zt=Jt-1}=Ot;if(ht){ht({dest:Gt,pageIndex:zt,pageNumber:Jt});return}const ue=$t.current[zt];if(ue){ue.scrollIntoView();return}warning(!1,`An internal link leading to page ${Jt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(ft,()=>({linkService:Ut,pages:$t,viewer:Pt}),[]);function Vt(){ot&&ot()}function Kt(){$&&(warning(!1,$.toString()),lt&&lt($))}function ne(){f({type:"RESET"})}reactExports.useEffect(ne,[ut,f]);const re=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!ut)return null;if(typeof ut=="string")return isDataURI(ut)?{data:dataURItoByteString(ut)}:(displayCORSWarning(),{url:ut});if(ut instanceof PDFDataRangeTransport)return{range:ut};if(isArrayBuffer(ut))return{data:ut};if(isBrowser&&isBlob(ut))return{data:yield loadFromFile(ut)};if(invariant(typeof ut=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in ut||"range"in ut||"url"in ut,"Invalid parameter object: need either .data, .range or .url"),"url"in ut&&typeof ut.url=="string"){if(isDataURI(ut.url)){const{url:Ot}=ut,Gt=__rest$1(ut,["url"]),Jt=dataURItoByteString(Ot);return Object.assign({data:Jt},Gt)}displayCORSWarning()}return ut}),[ut]);reactExports.useEffect(()=>{const Ot=makeCancellablePromise(re());return Ot.promise.then(Gt=>{f({type:"RESOLVE",value:Gt})}).catch(Gt=>{f({type:"REJECT",error:Gt})}),()=>{cancelRunningTask(Ot)}},[re,f]),reactExports.useEffect(()=>{if(!(typeof dt>"u")){if(dt===!1){Kt();return}Vt()}},[dt]);function ct(){at&&(j&&j(at),$t.current=new Array(at.numPages),Ut.current.setDocument(at))}function a(){Rt&&(warning(!1,Rt.toString()),st&&st(Rt))}function h(){wt({type:"RESET"})}reactExports.useEffect(h,[wt,dt]);function c(){if(!dt)return;const Ot=nt?Object.assign(Object.assign({},dt),nt):dt,Gt=pdfjs$1.getDocument(Ot);et&&(Gt.onProgress=et),tt&&(Gt.onPassword=tt);const Jt=Gt;return Jt.promise.then(zt=>{wt({type:"RESOLVE",value:zt})}).catch(zt=>{Jt.destroyed||wt({type:"REJECT",error:zt})}),()=>{Jt.destroy()}}reactExports.useEffect(c,[nt,wt,dt]),reactExports.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){a();return}ct()}},[at]);function g(){Ut.current.setViewer(Pt.current),Ut.current.setExternalLinkRel(bt),Ut.current.setExternalLinkTarget(Wt)}reactExports.useEffect(g,[bt,Wt]);function _(Ot,Gt){$t.current[Ot]=Gt}function it(Ot){delete $t.current[Ot]}const gt=reactExports.useMemo(()=>({imageResourcesPath:X,linkService:Ut.current,onItemClick:ht,pdf:at,registerPage:_,renderMode:d,rotate:m,unregisterPage:it}),[X,ht,at,d,m]),vt=reactExports.useMemo(()=>makeEventProps(pt,()=>at),[pt,at]);function Bt(){return React.createElement(DocumentContext.Provider,{value:gt},o)}function Lt(){return ut?at==null?React.createElement(Message,{type:"loading"},typeof mt=="function"?mt():mt):at===!1?React.createElement(Message,{type:"error"},typeof St=="function"?St():St):Bt():React.createElement(Message,{type:"no-data"},typeof _t=="function"?_t():_t)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",k),ref:rt,style:{"--scale-factor":"1"}},vt),Lt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var b=[],s=0;s<arguments.length;s++)b[s]=arguments[s];var ft=b.filter(Boolean);if(ft.length<=1){var o=ft[0];return o||null}return function(St){ft.forEach(function(bt){typeof bt=="function"?bt(St):bt&&(bt.current=St)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(b){return b in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(b){return"children"in b}function isStructTreeNodeWithOnlyContentChild(b){return isStructTreeNode(b)?b.children.length===1&&0 in b.children&&"id"in b.children[0]:!1}function getRoleAttributes(b){const s={};if(isStructTreeNode(b)){const{role:ft}=b,o=ft.match(HEADING_PATTERN);if(o)s.role="heading",s["aria-level"]=Number(o[1]);else if(isPdfRole(ft)){const k=PDF_ROLE_TO_HTML_ROLE[ft];k&&(s.role=k)}}return s}function getBaseAttributes(b){const s={};if(isStructTreeNode(b)){if(b.alt!==void 0&&(s["aria-label"]=b.alt),b.lang!==void 0&&(s.lang=b.lang),isStructTreeNodeWithOnlyContentChild(b)){const[ft]=b.children;if(ft){const o=getBaseAttributes(ft);return Object.assign(Object.assign({},s),o)}}}else"id"in b&&(s["aria-owns"]=b.id);return s}function getAttributes(b){return b?Object.assign(Object.assign({},getRoleAttributes(b)),getBaseAttributes(b)):null}function StructTreeItem({className:b,node:s}){const ft=reactExports.useMemo(()=>getAttributes(s),[s]),o=reactExports.useMemo(()=>!isStructTreeNode(s)||isStructTreeNodeWithOnlyContentChild(s)?null:s.children.map((k,St)=>React.createElement(StructTreeItem,{key:St,node:k})),[s]);return React.createElement("span",Object.assign({className:b},ft),o)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const b=usePageContext();invariant(b,"Unable to find Page context.");const{onGetStructTreeError:s,onGetStructTreeSuccess:ft}=b,[o,k]=useResolver(),{value:St,error:bt}=o,{customTextRenderer:Wt,page:ut}=b;function rt(){St&&ft&&ft(St)}function X(){bt&&(warning(!1,bt.toString()),s&&s(bt))}function mt(){k({type:"RESET"})}reactExports.useEffect(mt,[k,ut]);function _t(){if(Wt||!ut)return;const ht=makeCancellablePromise(ut.getStructTree()),st=ht;return ht.promise.then(et=>{k({type:"RESOLVE",value:et})}).catch(et=>{k({type:"REJECT",error:et})}),()=>cancelRunningTask(st)}return reactExports.useEffect(_t,[Wt,ut,k]),reactExports.useEffect(()=>{if(St!==void 0){if(St===!1){X();return}rt()}},[St]),St?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:St}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(b){const s=usePageContext();invariant(s,"Unable to find Page context.");const ft=Object.assign(Object.assign({},s),b),{_className:o,canvasBackground:k,devicePixelRatio:St=getDevicePixelRatio(),onRenderError:bt,onRenderSuccess:Wt,page:ut,renderForms:rt,renderTextLayer:X,rotate:mt,scale:_t}=ft,{canvasRef:ht}=b;invariant(ut,"Attempted to render page canvas, but no page was specified.");const st=reactExports.useRef(null);function et(){ut&&Wt&&Wt(makePageCallback(ut,_t))}function j(d){isCancelException(d)||(warning(!1,d.toString()),bt&&bt(d))}const tt=reactExports.useMemo(()=>ut.getViewport({scale:_t*St,rotation:mt}),[St,ut,mt,_t]),lt=reactExports.useMemo(()=>ut.getViewport({scale:_t,rotation:mt}),[ut,mt,_t]);function ot(){if(!ut)return;ut.cleanup();const{current:d}=st;if(!d)return;d.width=tt.width,d.height=tt.height,d.style.width=`${Math.floor(lt.width)}px`,d.style.height=`${Math.floor(lt.height)}px`,d.style.visibility="hidden";const m={annotationMode:rt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:d.getContext("2d",{alpha:!1}),viewport:tt};k&&(m.background=k);const pt=ut.render(m),Y=pt;return pt.promise.then(()=>{d.style.visibility="",et()}).catch(j),()=>cancelRunningTask(Y)}reactExports.useEffect(ot,[k,st,St,ut,rt,tt,lt]);const nt=reactExports.useCallback(()=>{const{current:d}=st;d&&(d.width=0,d.height=0)},[st]);return reactExports.useEffect(()=>nt,[nt]),React.createElement("canvas",{className:`${o}__canvas`,dir:"ltr",ref:mergeRefs(ht,st),style:{display:"block",userSelect:"none"}},X?React.createElement(StructTree,null):null)}function PageSVG(){const b=usePageContext();invariant(b,"Unable to find Page context.");const{_className:s,onRenderSuccess:ft,onRenderError:o,page:k,rotate:St,scale:bt}=b;invariant(k,"Attempted to render page SVG, but no page was specified.");const[Wt,ut]=useResolver(),{value:rt,error:X}=Wt;function mt(){k&&ft&&ft(makePageCallback(k,bt))}function _t(){X&&(isCancelException(X)||(warning(!1,X.toString()),o&&o(X)))}const ht=reactExports.useMemo(()=>k.getViewport({scale:bt,rotation:St}),[k,St,bt]);function st(){ut({type:"RESET"})}reactExports.useEffect(st,[k,ut,ht]);function et(){if(!k)return;const ot=makeCancellablePromise(k.getOperatorList());return ot.promise.then(nt=>{new pdfjs$1.SVGGraphics(k.commonObjs,k.objs).getSVG(nt,ht).then(m=>{if(!(m instanceof SVGElement))throw new Error("getSVG returned unexpected result.");ut({type:"RESOLVE",value:m})}).catch(m=>{ut({type:"REJECT",error:m})})}).catch(nt=>{ut({type:"REJECT",error:nt})}),()=>cancelRunningTask(ot)}reactExports.useEffect(et,[k,ut,ht]),reactExports.useEffect(()=>{if(rt!==void 0){if(rt===!1){_t();return}mt()}},[rt]);function j(ot){if(!ot||!rt)return;ot.firstElementChild||ot.appendChild(rt);const{width:nt,height:d}=ht;rt.setAttribute("width",`${nt}`),rt.setAttribute("height",`${d}`)}const{width:tt,height:lt}=ht;return React.createElement("div",{className:`${s}__svg`,ref:ot=>j(ot),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:tt,height:lt,userSelect:"none"}})}function isTextItem(b){return"str"in b}function TextLayer(){const b=usePageContext();invariant(b,"Unable to find Page context.");const{customTextRenderer:s,onGetTextError:ft,onGetTextSuccess:o,onRenderTextLayerError:k,onRenderTextLayerSuccess:St,page:bt,pageIndex:Wt,pageNumber:ut,rotate:rt,scale:X}=b;invariant(bt,"Attempted to load page text content, but no page was specified.");const[mt,_t]=useResolver(),{value:ht,error:st}=mt,et=reactExports.useRef(null),j=reactExports.useRef();warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function tt(){ht&&o&&o(ht)}function lt(){st&&(warning(!1,st.toString()),ft&&ft(st))}function ot(){_t({type:"RESET"})}reactExports.useEffect(ot,[bt,_t]);function nt(){if(!bt)return;const $=makeCancellablePromise(bt.getTextContent()),Tt=$;return $.promise.then(wt=>{_t({type:"RESOLVE",value:wt})}).catch(wt=>{_t({type:"REJECT",error:wt})}),()=>cancelRunningTask(Tt)}reactExports.useEffect(nt,[bt,_t]),reactExports.useEffect(()=>{if(ht!==void 0){if(ht===!1){lt();return}tt()}},[ht]);const d=reactExports.useCallback(()=>{St&&St()},[St]),m=reactExports.useCallback($=>{warning(!1,$.toString()),k&&k($)},[k]);function pt(){const $=j.current;$&&$.classList.add("active")}function Y(){const $=j.current;$&&$.classList.remove("active")}const f=reactExports.useMemo(()=>bt.getViewport({scale:X,rotation:rt}),[bt,rt,X]);function dt(){if(!bt||!ht)return;const{current:$}=et;if(!$)return;$.innerHTML="";const Tt=bt.streamTextContent({includeMarkedContent:!0}),wt={container:$,textContentSource:Tt,viewport:f},at=pdfjs$1.renderTextLayer(wt),Rt=at;return at.promise.then(()=>{const Ut=document.createElement("div");Ut.className="endOfContent",$.append(Ut),j.current=Ut;const $t=$.querySelectorAll('[role="presentation"]');if(s){let Pt=0;ht.items.forEach((Vt,Kt)=>{if(!isTextItem(Vt))return;const ne=$t[Pt];if(!ne)return;const re=s(Object.assign({pageIndex:Wt,pageNumber:ut,itemIndex:Kt},Vt));ne.innerHTML=re,Pt+=Vt.str&&Vt.hasEOL?2:1})}d()}).catch(m),()=>cancelRunningTask(Rt)}return reactExports.useLayoutEffect(dt,[s,m,d,bt,Wt,ut,ht,f]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Y,onMouseDown:pt,ref:et})}function AnnotationLayer(){const b=useDocumentContext();invariant(b,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const s=usePageContext();invariant(s,"Unable to find Page context.");const ft=Object.assign(Object.assign({},b),s),{imageResourcesPath:o,linkService:k,onGetAnnotationsError:St,onGetAnnotationsSuccess:bt,onRenderAnnotationLayerError:Wt,onRenderAnnotationLayerSuccess:ut,page:rt,pdf:X,renderForms:mt,rotate:_t,scale:ht=1}=ft;invariant(rt,"Attempted to load page annotations, but no page was specified.");const[st,et]=useResolver(),{value:j,error:tt}=st,lt=reactExports.useRef(null);warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function ot(){j&&bt&&bt(j)}function nt(){tt&&(warning(!1,tt.toString()),St&&St(tt))}function d(){et({type:"RESET"})}reactExports.useEffect(d,[et,rt]);function m(){if(!rt)return;const $=makeCancellablePromise(rt.getAnnotations()),Tt=$;return $.promise.then(wt=>{et({type:"RESOLVE",value:wt})}).catch(wt=>{et({type:"REJECT",error:wt})}),()=>{cancelRunningTask(Tt)}}reactExports.useEffect(m,[et,rt,mt]),reactExports.useEffect(()=>{if(j!==void 0){if(j===!1){nt();return}ot()}},[j]);function pt(){ut&&ut()}function Y($){warning(!1,`${$}`),Wt&&Wt($)}const f=reactExports.useMemo(()=>rt.getViewport({scale:ht,rotation:_t}),[rt,_t,ht]);function dt(){if(!X||!rt||!j)return;const{current:$}=lt;if(!$)return;const Tt=f.clone({dontFlip:!0}),wt={accessibilityManager:null,annotationCanvasMap:null,div:$,l10n:null,page:rt,viewport:Tt},at={annotations:j,annotationStorage:X.annotationStorage,div:$,downloadManager:null,imageResourcesPath:o,linkService:k,page:rt,renderForms:mt,viewport:Tt};$.innerHTML="";try{new pdfjs$1.AnnotationLayer(wt).render(at),pt()}catch(Rt){Y(Rt)}return()=>{}}return reactExports.useEffect(dt,[j,o,k,rt,mt,f]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:lt})}var __rest=globalThis&&globalThis.__rest||function(b,s){var ft={};for(var o in b)Object.prototype.hasOwnProperty.call(b,o)&&s.indexOf(o)<0&&(ft[o]=b[o]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,o=Object.getOwnPropertySymbols(b);k<o.length;k++)s.indexOf(o[k])<0&&Object.prototype.propertyIsEnumerable.call(b,o[k])&&(ft[o[k]]=b[o[k]]);return ft};const defaultScale=1,Page=function b(s){const ft=useDocumentContext();invariant(ft,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const o=Object.assign(Object.assign({},ft),s),{_className:k="react-pdf__Page",_enableRegisterUnregisterPage:St=!0,canvasBackground:bt,canvasRef:Wt,children:ut,className:rt,customRenderer:X,customTextRenderer:mt,devicePixelRatio:_t,error:ht="Failed to load the page.",height:st,inputRef:et,loading:j="Loading page…",noData:tt="No page specified.",onGetAnnotationsError:lt,onGetAnnotationsSuccess:ot,onGetStructTreeError:nt,onGetStructTreeSuccess:d,onGetTextError:m,onGetTextSuccess:pt,onLoadError:Y,onLoadSuccess:f,onRenderAnnotationLayerError:dt,onRenderAnnotationLayerSuccess:$,onRenderError:Tt,onRenderSuccess:wt,onRenderTextLayerError:at,onRenderTextLayerSuccess:Rt,pageIndex:Ut,pageNumber:$t,pdf:Pt,registerPage:Vt,renderAnnotationLayer:Kt=!0,renderForms:ne=!1,renderMode:re="canvas",renderTextLayer:ct=!0,rotate:a,scale:h=defaultScale,unregisterPage:c,width:g}=o,_=__rest(o,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[it,gt]=useResolver(),{value:vt,error:Bt}=it,Lt=reactExports.useRef(null);invariant(Pt,"Attempted to load a page, but no document was specified.");const Ot=isProvided($t)?$t-1:Ut??null,Gt=$t??(isProvided(Ut)?Ut+1:null),Jt=a??(vt?vt.rotate:null),zt=reactExports.useMemo(()=>{if(!vt)return null;let Te=1;const Ee=h??defaultScale;if(g||st){const Ce=vt.getViewport({scale:1,rotation:Jt});g?Te=g/Ce.width:st&&(Te=st/Ce.height)}return Ee*Te},[st,vt,Jt,h,g]);function ue(){return()=>{isProvided(Ot)&&St&&c&&c(Ot)}}reactExports.useEffect(ue,[St,Pt,Ot,c]);function ye(){if(f){if(!vt||!zt)return;f(makePageCallback(vt,zt))}if(St&&Vt){if(!isProvided(Ot)||!Lt.current)return;Vt(Ot,Lt.current)}}function se(){Bt&&(warning(!1,Bt.toString()),Y&&Y(Bt))}function pe(){gt({type:"RESET"})}reactExports.useEffect(pe,[gt,Pt,Ot]);function Yt(){if(!Pt||!Gt)return;const Te=makeCancellablePromise(Pt.getPage(Gt)),Ee=Te;return Te.promise.then(Ce=>{gt({type:"RESOLVE",value:Ce})}).catch(Ce=>{gt({type:"REJECT",error:Ce})}),()=>cancelRunningTask(Ee)}reactExports.useEffect(Yt,[gt,Pt,Ot,Gt,Vt]),reactExports.useEffect(()=>{if(vt!==void 0){if(vt===!1){se();return}ye()}},[vt,zt]);const It=reactExports.useMemo(()=>vt&&isProvided(Ot)&&Gt&&isProvided(Jt)&&isProvided(zt)?{_className:k,canvasBackground:bt,customTextRenderer:mt,devicePixelRatio:_t,onGetAnnotationsError:lt,onGetAnnotationsSuccess:ot,onGetStructTreeError:nt,onGetStructTreeSuccess:d,onGetTextError:m,onGetTextSuccess:pt,onRenderAnnotationLayerError:dt,onRenderAnnotationLayerSuccess:$,onRenderError:Tt,onRenderSuccess:wt,onRenderTextLayerError:at,onRenderTextLayerSuccess:Rt,page:vt,pageIndex:Ot,pageNumber:Gt,renderForms:ne,renderTextLayer:ct,rotate:Jt,scale:zt}:null,[k,bt,mt,_t,lt,ot,nt,d,m,pt,dt,$,Tt,wt,at,Rt,vt,Ot,Gt,ne,ct,Jt,zt]),Nt=reactExports.useMemo(()=>makeEventProps(_,()=>vt&&(zt?makePageCallback(vt,zt):void 0)),[_,vt,zt]),qt=`${Ot}@${zt}/${Jt}`,ae=`${Ot}/${Jt}`;function oe(){switch(re){case"custom":return invariant(X,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(X,{key:`${qt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${ae}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${qt}_canvas`,canvasRef:Wt})}}function Ae(){return ct?React.createElement(TextLayer,{key:`${qt}_text`}):null}function Pe(){return Kt?React.createElement(AnnotationLayer,{key:`${qt}_annotations`}):null}function ve(){return React.createElement(PageContext.Provider,{value:It},oe(),Ae(),Pe(),ut)}function we(){return Gt?Pt===null||vt===void 0||vt===null?React.createElement(Message,{type:"loading"},typeof j=="function"?j():j):Pt===!1||vt===!1?React.createElement(Message,{type:"error"},typeof ht=="function"?ht():ht):ve():React.createElement(Message,{type:"no-data"},typeof tt=="function"?tt():tt)}return React.createElement("div",Object.assign({className:clsx(k,rt),"data-page-number":Gt,ref:mergeRefs(et,Lt),style:{"--scale-factor":`${zt}`,backgroundColor:bt||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Nt),we())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";export{Document$1 as D,Page$1 as P,React$1 as R,React as a,PropTypes as b,pdfjs$1 as p,reactExports as r};
